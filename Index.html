<!doctype html>
<html lang="bn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>RESCUES-The Blood Heros Community</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
  /* ==============================================
  THEME VARIABLES (UPDATED FOR LIGHT/DARK)
  ==============================================
  */
  :root{
    /* Dark Mode (Default) */
    --bg:#071022;
    --card:#0b1220;
    --accent:#e11d48;
    --muted:#94a3b8;
    --white: #e6eef7;
    --success:#16a34a;
    --danger:#ef4444;
    --glass-border: rgba(255,255,255,0.06);
    --neon: 0 0 16px rgba(225,29,72,0.18), 0 0 32px rgba(225,29,72,0.08);
    --header-h:64px;
    --footer-h:86px;
    --active-color: #e11d48;
    --text-color: var(--white);
    --bg-gradient: linear-gradient(180deg,#061426 0%, #071022 100%);
    --shadow: 0 4px 8px rgba(0,0,0,0.3);
  }

  /* Light Theme Overrides (Deeper Light for Eye Comfort) */
  .light-mode {
    --bg: #f3f4f6; /* Slightly deeper background */
    --card: #ffffff;
    --accent: #e11d48;
    --muted: #6b7280;
    --white: #1f2937; /* Dark text in light mode */
    --glass-border: rgba(0,0,0,0.1);
    --bg-gradient: linear-gradient(180deg,#e5e7eb 0%, #f3f4f6 100%);
    --text-color: #1f2937;
    --active-color: #e11d48;
    --shadow: 0 4px 8px rgba(0,0,0,0.08);
  }
  
  /* ==============================================
  GENERAL STYLES
  ==============================================
  */
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg-gradient);color:var(--text-color);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overflow:hidden}
  
  /* Utilities */
  .muted{color:var(--muted);font-size:13px}
  .small{font-size:12px}
  
  /* ===== INTRO STYLES ===== */
/* Loading Screen (Updated for CORNER) */
  #loadingScreen {
    position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: #000;
    z-index: 9999;
  }
  #squidIntro {
    display: flex;
    gap: 8px;
  }
  #squidIntro .letter {
    font-size: 64px;
    font-weight: 900;
    opacity: 0;
    transform: scale(0.5) translateY(60px);
    color: var(--accent);
    text-shadow: 0 0 12px rgba(225,29,72,0.4);
    animation: riseUp 0.6s ease forwards;
  }
  #squidIntro .letter:nth-child(1){ animation-delay: 0s; }
  #squidIntro .letter:nth-child(2){ animation-delay: 0.2s; }
  #squidIntro .letter:nth-child(3){ animation-delay: 0.4s; }
  #squidIntro .letter:nth-child(4){ animation-delay: 0.6s; }
  #squidIntro .letter:nth-child(5){ animation-delay: 0.8s; }
  #squidIntro .letter:nth-child(6){ animation-delay: 1.0s; } /* New delay for the 6th letter 'R' */
  #squidIntro .letter:nth-child(7){ animation-delay: 1.2s; } /* New felay for the 7th letter 'S' */
  @keyframes riseUp {
    0%   { opacity: 0; transform: scale(0.5) translateY(60px) rotate(-8deg); }
    60%  { opacity: 1; transform: scale(1.2) translateY(0) rotate(3deg); }
    100% { opacity: 1; transform: scale(1) translateY(0) rotate(0); }
  }
  #loadingFrom {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 17px;
    color: #aaa;
    opacity: 0;
    animation: fadeIn 1s ease forwards;
    animation-delay: 1.0s;
  }
  @keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
  }
  #app{display:none;height:100%;width:100%;position:relative;overflow:hidden}

/* =================================================================== */
/* üöÄ ‡¶´‡¶ø‡¶â‡¶ö‡¶æ‡¶∞‡ßá‡¶∏‡ßç‡¶ü‡¶ø‡¶ï ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶∂‡ßÅ‡¶∞‡ßÅ (FUTURISTIC STYLES) */
/* =================================================================== */

/* ‡¶Æ‡ßÇ‡¶≤ ‡¶™‡ßç‡¶∞‡¶Æ‡ßç‡¶™‡¶ü ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ */
.futuristic-prompt {
    padding: 25px 30px;
    border-radius: 12px;
    background-color: #1a1a2e; /* ‡¶ó‡¶æ‡ßù ‡¶®‡ßÄ‡¶≤/‡¶ï‡¶æ‡¶≤‡ßã ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° */
    color: #e0f7fa; /* ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü */
    border: 2px solid #4a4a8f; /* ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ */
    box-shadow: 0 0 20px rgba(74, 74, 143, 0.5); /* ‡¶´‡¶ø‡¶â‡¶ö‡¶æ‡¶∞‡ßá‡¶∏‡ßç‡¶ü‡¶ø‡¶ï ‡¶®‡¶ø‡¶Ø‡¶º‡¶® ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã */
    transition: transform 0.3s ease;
}
.futuristic-prompt:hover {
    transform: translateY(-2px);
}

/* ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ */
.main-message {
    font-size: 17px;
    color: #b3e5fc;
    line-height: 1.6;
    text-align: center;
}

/* ================== ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ================== */


.refresh-btn {
    padding: 12px 30px !important;
    font-size: 17px !important;
    width: auto !important;
}

/* WhatsApp ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ ‡¶¨‡¶æ‡¶ü‡¶® */
.btn.whatsapp-help {
    padding: 12px 25px;
    font-size: 17px;
    border-radius: 8px;
    background-color: #25D366; /* WhatsApp ‡¶ó‡ßç‡¶∞‡¶ø‡¶® */
    color: #fff;
    font-weight: bold;
    border: none;
    box-shadow: 0 0 10px rgba(37, 211, 102, 0.6);
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    cursor: pointer;
}
.btn.whatsapp-help:hover {
    background-color: #38ef7d;
    box-shadow: 0 0 15px rgba(37, 211, 102, 1);
}
.whatsapp-icon {
    vertical-align: middle;
    margin-right: 8px;
    fill: white;
}
.whatsapp-link {
    text-decoration: none;
    display: block;
    text-align: center;
}


/* ================== ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶ø‡¶™‡¶∏ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ================== */

/* ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶§‡¶•‡ßç‡¶Ø/‡¶°‡ßã‡¶®‡ßá‡¶∂‡¶® ‡¶¨‡¶ï‡ßç‡¶∏ */
.info-box-futuristic {
    margin-top: 25px;
    padding: 15px;
    background-color: #2e2e4e; /* ‡¶ó‡¶æ‡ßù ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá ‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶∂‡ßá‡¶° */
    border-radius: 6px;
}

/* ‡¶°‡ßã‡¶®‡ßá‡¶∂‡¶® ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶∏‡ßç‡¶™‡ßá‡¶∏‡¶ø‡¶´‡¶ø‡¶ï ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.donation-box {
    border-left: 4px solid #ff9800; /* ‡¶ó‡ßã‡¶≤‡ßç‡¶°‡ßá‡¶®-‡¶Ö‡¶∞‡ßá‡¶û‡ßç‡¶ú ‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü */
    text-align: center;
}
.donation-header {
    color: #ff9800;
    margin-top: 0;
    margin-bottom: 12px;
    font-size: 1.3em;
    font-weight: 800;
}
.donation-icon {
    font-size: 1.5em;
    display: block;
    margin-bottom: 5px;
}
.donation-text {
    font-size: 15px;
    color: #a5d6a7;
    margin-bottom: 15px;
}


/* ‡¶ó‡¶æ‡¶á‡¶° ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶∏‡ßç‡¶™‡ßá‡¶∏‡¶ø‡¶´‡¶ø‡¶ï ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.guide-box {
    border-left: 4px solid #00bcd4; /* ‡¶®‡¶ø‡¶Ø‡¶º‡¶® ‡¶¨‡ßç‡¶≤‡ßÅ ‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü */
}
.guide-header {
    color: #00bcd4;
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 1.15em;
}

/* ‡¶´‡¶ø‡¶â‡¶ö‡¶æ‡¶∞‡ßá‡¶∏‡ßç‡¶ü‡¶ø‡¶ï ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.info-list-futuristic {
    list-style: none;
    padding-left: 0;
    margin: 0;
    font-size: 14px;
    color: #b3e5fc;
}
.info-list-futuristic li {
    margin-bottom: 10px;
    position: relative;
    padding-left: 15px;
}
.info-list-futuristic li::before {
    content: '‚ö°'; /* ‡¶´‡¶ø‡¶â‡¶ö‡¶æ‡¶∞‡ßá‡¶∏‡ßç‡¶ü‡¶ø‡¶ï ‡¶Ü‡¶á‡¶ï‡¶® */
    position: absolute;
    left: 0;
    color: #00bcd4;
}

/* ‡¶∏‡ßá‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶∞ */
.separator {
    margin-top: 25px;
    margin-bottom: 25px;
    border: 0;
    border-top: 1px solid #3e3e6e;
}

/* ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ (‡¶ï‡ßç‡¶≤‡¶ø‡¶ï‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø) */
.text-back-prompt {
    color: #f9a825 !important;
    font-weight: bold;
    cursor: pointer;
    text-align: center;
    margin-top: 20px;
    font-size: 15px;
    text-decoration: underline;
    transition: color 0.3s ease;
}
.text-back-prompt:hover {
    color: #ffe082 !important;
}

/* ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶™‡ßç‡¶∞‡¶Æ‡ßç‡¶™‡¶ü ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ */
.futuristic-refresh-prompt {
    text-align:center;
    padding: 25px;
    background-color: #1a1a2e;
    border-radius: 12px;
    box-shadow: 0 0 10px rgba(0, 188, 212, 0.5);
}

/* ================== ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡ßã‡¶≤‡¶ø‡¶Ç ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ================== */

/* ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ */
.futuristic-banner-container {
    width:100%;
    border-radius:8px;
    overflow: hidden;
    margin-bottom: 25px;
}
/* ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡ßã‡¶≤‡¶ø‡¶Ç ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶®‡¶ø‡¶Ø‡¶º‡¶® ‡¶ó‡ßç‡¶≤‡ßã ‡¶á‡¶´‡ßá‡¶ï‡ßç‡¶ü */
.scrolling-text-futuristic {
    color: #fff;
    padding: 10px 0;
    font-weight: 800;
    font-size: 1.1em;
    text-transform: uppercase;
    white-space: nowrap;
    animation: glow 1.5s infinite alternate; /* ‡¶®‡¶ø‡¶Ø‡¶º‡¶® ‡¶ó‡ßç‡¶≤‡ßã ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
}

/* ‡¶®‡¶ø‡¶Ø‡¶º‡¶® ‡¶ó‡ßç‡¶≤‡ßã ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
@keyframes glow {
    from { text-shadow: 0 0 5px #fff, 0 0 10px #ff3d00; }
    to { text-shadow: 0 0 8px #fff, 0 0 15px #ff3d00, 0 0 20px #ff3d00; }
}
.no-search-wrapper {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

.blood-drop {
  width: 120px;
  height: 120px;
  animation: pump 1.2s infinite ease-in-out;
}

@keyframes pump {
  0% { transform: scale(1); }
  50% { transform: scale(1.12); }
  100% { transform: scale(1); }
}
/* =================================================================== */
/* üöÄ ‡¶´‡¶ø‡¶â‡¶ö‡¶æ‡¶∞‡ßá‡¶∏‡ßç‡¶ü‡¶ø‡¶ï ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶∂‡ßá‡¶∑ */
/* =================================================================== */
/* ==============================================
‡¶®‡¶§‡ßÅ‡¶® CSS: CORNER ‡¶è‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá ‡¶∏‡¶æ‡¶¨‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ 
==============================================
*/
#loadingSubtitle {
    margin-top: 10px; /* CORNER ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶®‡¶ø‡¶ö‡ßá ‡¶®‡¶æ‡¶Æ‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
    font-size: 13px; 
    font-weight: 300;
    color: #a4fff3; /* #loadingFrom ‡¶è‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶è‡¶ï‡¶á ‡¶∞‡¶ô ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã */
    opacity: 0;
    animation: fadeIn 1s ease forwards;
    animation-delay: 1.8s; /* CORNER ‡¶è‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶∂‡ßá‡¶∑ ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞‡¶™‡¶∞‡¶á ‡¶è‡¶ü‡¶ø ‡¶´‡ßá‡¶° ‡¶á‡¶® ‡¶π‡¶¨‡ßá */
}
  /* Header (Unchanged) */
  header.app-header{position:fixed;top:0;left:0;right:0;height:var(--header-h);display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:rgba(7, 16, 34, 0.8);border-bottom:1px solid var(--glass-border);z-index:30; backdrop-filter: blur(6px);}
  .light-mode header.app-header{background:rgba(243, 244, 246, 0.9); border-bottom:1px solid rgba(0,0,0,0.1);}
  .brand{display:flex;align-items:center;gap:12px;cursor:pointer;}
  .drop{width:44px;height:44px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:800;color:white;font-size:24px; background: }
  .brand h1{font-size:18px;margin:0}
  .menu-btn{width:48px;height:48px;border-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;border:1px solid var(--glass-border);background:rgba(255,255,255,0.01)}
  .light-mode .menu-btn{background:rgba(0,0,0,0.05); border:1px solid rgba(0,0,0,0.1);}
  
  /* Menu Overlay (Unchanged) */
  #menuOverlay{position:fixed;inset:0;background:rgba(2,6,23,0.9);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;flex-direction:column;z-index:60;padding:20px}
  .light-mode #menuOverlay{background:rgba(243, 244, 246, 0.95); backdrop-filter:blur(6px);}
  #menuOverlay.visible{display:flex}
  #menuOverlay .closeX{position:absolute;top:18px;right:18px;font-size:28px;cursor:pointer; color: var(--text-color)}
  #menuOverlay .menuItem{width:100%;max-width:420px;background:var(--card);border-radius:12px;padding:16px;margin:8px 0;border:1px solid var(--glass-border);display:flex;align-items:center;justify-content:space-between;cursor:pointer; transition: background 0.2s;}
  #menuOverlay .menuItem:hover{background: rgba(225,29,72,0.1);}
  .light-mode #menuOverlay .menuItem:hover{background: rgba(225,29,72,0.05);}
  #menuOverlay .menuItem h3{margin:0;font-size:18px}
  #menuOverlay .menuItem p{margin:0;color:var(--muted);font-size:13px}

  /* Main Content Area (Unchanged) */
  main{position:absolute;inset:var(--header-h) 0 var(--footer-h) 0; -webkit-overflow-scrolling: touch; overflow-y: auto;}
  .page {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    opacity: 0;
    transition: opacity 0.4s ease-in-out;
    padding: 12px 14px;
    overflow-x: hidden;
    min-height: 100%;
  }
  .page.active {
    display: block;
    opacity: 1;
  }
  .grid{display:grid;grid-template-columns:repeat(1,1fr);gap:12px}

  /* Card Styles (Unchanged) */
  .card{background:var(--card);padding:12px;border-radius:12px;border:1px solid var(--glass-border);display:flex;gap:12px;align-items:center;cursor:pointer; box-shadow: var(--shadow); transition: transform 0.2s;}
  .card.clickable:hover{transform: translateY(-2px); opacity: 0.95;}
  .avatar{width:56px;height:56px;border-radius:12px;background:linear-gradient(180deg,#0b1220,#09101a);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:20px;color:var(--white);border:1px solid rgba(255,255,255,0.04)}
  .light-mode .avatar{background:#e5e7eb; color:var(--text-color); border:1px solid rgba(0,0,0,0.1);}
  .card-body{flex:1}
  .name-row{display:flex;align-items:center;justify-content:space-between;gap:8px}
  .meta{font-size:13px;color:var(--muted);margin-top:6px}
  .tag{padding:6px 8px;border-radius:999px;font-weight:700;font-size:12px}
  .eligible{background:rgba(22,163,74,0.14);color:var(--success);border:1px solid rgba(22,163,74,0.08)}
  .not-eligible{background:rgba(239,68,68,0.06);color:var(--danger);border:1px solid rgba(239,68,68,0.06)}
  .blood-group{font-size:18px;font-weight:800;letter-spacing:0.6px; color: var(--accent);}
  .ratings { color: #f5b041; }
  .rating-star { font-size: 16px; margin: 0 1px; }

  /* Emergency Card (Unchanged) */
  .emergency-card {
      background: linear-gradient(135deg, var(--accent), #cc0c36); 
      color: white; 
      padding: 16px; 
      border-radius: 12px; 
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 16px rgba(225,29,72,0.4);
      margin-bottom: 12px;
  }
  .blood-group-large {
      font-size: 24px;
      font-weight: 900;
      padding: 4px 8px;
      border-radius: 6px;
      background: rgba(0, 0, 0, 0.2);
  }
  /* New emergency icon pulse effect */
  @keyframes emergency-pulse {
      0%, 100% {
          color: #ef4444; /* Red */
      }
      50% {
          color: #f59e0b; /* Yellow */
      }
  }
  .nav-btn.has-emergency svg {
      animation: emergency-pulse 1s infinite;
  }
  /* Add Page (Unchanged) */
  .add-center{display:flex;align-items:center;justify-content:center;height:60vh;flex-direction:column}
  
  /* Plus icon professional design (Unchanged) */
  .big-plus{
    width: 120px;
    height: 120px;
    border-radius: 25px; 
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 60px; 
    color: var(--text-color);
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
    border: 1px solid var(--glass-border);
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    box-shadow: 0 8px 30px rgba(225, 29, 72, 0.2), inset 0 0 10px rgba(255, 255, 255, 0.1);
}

.light-mode .big-plus{
    color: var(--text-color);
    background: #ffffff;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 8px 30px rgba(225, 29, 72, 0.2), inset 0 0 10px rgba(0, 0, 0, 0.1);
}
.big-plus:hover {
    transform: scale(1.05) translateY(-5px);
    border-color: rgba(225, 29, 72, 0.6);
    box-shadow: 0 12px 40px rgba(225, 29, 72, 0.4), inset 0 0 15px rgba(255, 255, 255, 0.2);
}

  /* Spinning animation (Unchanged) */
  @keyframes spin {
    0% { transform: rotate(0deg) scale(1); }
    50% { transform: rotate(180deg) scale(1.1); }
    100% { transform: rotate(360deg) scale(1); }
  }

  .spin-animation {
    animation: spin 0.6s ease-in-out;
  }
  
  /* =======================================================
  ‡ß®. Footer Navigation ‡¶Ü‡¶™‡¶°‡ßá‡¶ü (‡ß¨‡¶ü‡¶ø ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ) - ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
========================================================== */
footer.app-footer {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    bottom: 10px;
    background: rgba(7, 16, 34, 0.8);
    padding: 8px 10px;
    border-radius: 10px;
    /* ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: 6‡¶ü‡¶ø ‡¶ï‡¶≤‡¶æ‡¶Æ‡ßá ‡¶∏‡¶Æ‡¶æ‡¶®‡¶≠‡¶æ‡¶¨‡ßá ‡¶≠‡¶æ‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã */
    display: grid;
    grid-template-columns: repeat(6, 1fr); 
    width: 90%;
    max-width: 450px;
    z-index: 40;
    border: 0.1px solid var(--glass-border);
    backdrop-filter: blur(8px);
    box-shadow: 0 0 12px rgba(0,0,0,0.5);
    gap: 4px; 
}
.light-mode footer.app-footer {
    background: rgba(255,255,255,0.9);
    border: 0.1px solid rgba(0,0,0,0.1);
    box-shadow: 0 0 12px rgba(0,0,0,0.1);
}

.nav-btn {
    /* ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: ‡ß¨‡¶ü‡¶ø ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∂‡¶∏‡ßç‡¶§‡¶§‡¶æ ‡¶ì ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ ‡¶ï‡¶Æ‡¶æ‡¶®‡ßã */
    width: 100%; 
    height: 50px;
    border-radius: 10px; 
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    cursor: pointer;
    /* ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú ‡¶ï‡¶Æ‡¶æ‡¶®‡ßã */
    font-size: 10px; 
    color: var(--muted);
    gap: 4px; 
    transition: all 0.3s ease;
    position: relative;
    text-align: center;
}
/* ... .nav-btn.active ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá‡•§ ... */

  .nav-btn.active {
    color: var(--active-color);
    font-weight: 600;
    background-color: rgba(225, 29, 72, 0.1);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2), 0 0 10px rgba(225, 29, 72, 0.2);
  }
  .light-mode .nav-btn.active {
      background-color: rgba(225, 29, 72, 0.1);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1), 0 0 10px rgba(225, 29, 72, 0.2);
  }
  .nav-btn.active svg {
    color: var(--active-color);
  }
  .nav-btn.has-emergency::after {
      content: '';
      position: absolute;
      top: 5px;
      right: 5px;
      width: 8px;
      height: 8px;
      background: var(--danger);
      border-radius: 50%;
      box-shadow: 0 0 4px var(--danger);
  }

  /* Modal Styles (Unchanged) */
  .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.8);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;z-index:70;padding:18px}
  .light-mode .modal-backdrop{background:rgba(243, 244, 246, 0.95);}
  .modal-backdrop.visible{display:flex}
  .modal{width:100%;max-width:640px;background:var(--card);border-radius:12px;padding:18px;border:1px solid var(--glass-border); color: var(--text-color); box-shadow: var(--shadow);}
  
  /* Review Card (Unchanged) */
  .review-card {
    background: var(--bg);
    border: 1px solid var(--glass-border);
    border-radius: 10px;
    padding: 10px;
    margin-bottom: 8px;
  }
  .light-mode .review-card {
      background: #f8fafc;
      border: 1px solid rgba(0,0,0,0.1);
  }
  .review-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .review-meta {
    font-size: 12px;
    color: var(--muted);
  }

  /* Auth Form Container (Used for Modals) (Unchanged) */
  .auth-form-container {
      padding: 24px;
      border-radius: 20px;
      background: var(--card);
      border: 1px solid var(--glass-border);
      max-width: 420px;
      width: 100%;
      margin: 0 auto; 
      box-shadow: var(--shadow);
      animation: fadeInScale 0.4s ease-out;
  }
  .auth-form-container h3 { margin-top: 0; }
  
  @keyframes fadeInScale {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
  }

  /* Form Elements (Unchanged) */
  .input-group { margin-bottom: 12px; }
  .input-group label { display: block; font-size: 14px; margin-bottom: 4px; color: var(--muted); }
  
  .auth-form-container input, 
  .auth-form-container select, 
  .auth-form-container textarea {
      width:100%;
      padding:10px;
      border-radius:10px;
      border:1px solid var(--glass-border);
      background:var(--bg);
      color:var(--text-color);
      transition: border-color 0.2s, background 0.2s;
  }
  .light-mode .auth-form-container input, 
  .light-mode .auth-form-container select, 
  .light-mode .auth-form-container textarea {
      border:1px solid rgba(0,0,0,0.15); 
      background: #f8fafc;
  }
  .auth-form-container input:focus, 
  .auth-form-container select:focus, 
  .auth-form-container textarea:focus {
      border-color: var(--accent);
      outline: none;
      box-shadow: 0 0 0 2px rgba(225,29,72,0.3);
  }
  .auth-form-container .row{display:flex;gap:8px}

  /* Buttons (Unchanged) */
  .btn{padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700; transition: all 0.2s;}
  .btn.primary{background:linear-gradient(90deg,#ff6b86,#e11d48);color:white}
  .btn.primary:hover{background:linear-gradient(90deg,#e11d48,#ff6b86); transform: translateY(-1px);}
  .btn.ghost{background:transparent;border:1px solid var(--glass-border);color:var(--text-color)}
  .btn.ghost:hover{background: rgba(255,255,255,0.05); transform: translateY(-1px);}
  .light-mode .btn.ghost{border:1px solid rgba(0,0,0,0.15); color:var(--text-color);}
  .light-mode .btn.ghost:hover{background: rgba(0,0,0,0.05);}
  .btn.locked {
    background: transparent;
    border: 1px solid var(--muted); 
    color: var(--muted);
    cursor: not-allowed;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    opacity: 0.8;
    padding: 10px 14px; 
    font-weight: 700;
    border-radius: 10px;
    transition: none; /* Lock transition */
  }
  .btn.emergency {
      background: var(--danger);
      color: white;
  }
  .btn-group {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 20px;
  }

  /* Logout Modal Specific Styles (Unchanged) */
  #logoutReasonModal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(2,6,23,0.8);
    backdrop-filter: blur(6px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 70;
    padding: 18px;
  }
  .light-mode #logoutReasonModal {
      background: rgba(243, 244, 246, 0.95);
  }
  #logoutReasonModal textarea {
      color: var(--text-color);
      background: var(--bg);
      border: 1px solid var(--glass-border);
  }
  .light-mode #logoutReasonModal textarea {
      background: #f8fafc;
      border: 1px solid rgba(0,0,0,0.15);
  }
/* ‡¶¨‡ßç‡¶≤‡¶æ‡¶° ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡ßá‡¶∞ ‡¶™‡¶≤‡¶∏ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
@keyframes pulseBlood {
  0% { transform: scale(1); box-shadow: 0 0 0 rgba(231, 76, 60, 0.7); }
  50% { transform: scale(1.1); box-shadow: 0 0 15px rgba(231, 76, 60, 0.9); }
  100% { transform: scale(1); box-shadow: 0 0 0 rgba(231, 76, 60, 0.7); }
}

.blood-group.animated {
  display: inline-block;
  padding: 6px 12px;
  border-radius: 8px;
  background-color: #e74c3c;
  color: #fff;
  font-weight: bold;
  animation: pulseBlood 1.5s infinite;
}
/* ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.loading-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin: 30px auto;
    color: var(--muted);
}

/* ‡¶Ü‡¶á‡¶ï‡¶®‡¶ï‡ßá ‡¶ò‡ßã‡¶∞‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø CSS */
.rotating-spinner {
    animation: spin 1.5s linear infinite; /* 1.5 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ò‡ßÅ‡¶∞‡¶¨‡ßá */
    margin-bottom: 10px;
    display: inline-block; /* ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ø‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá */
}

/* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶ï‡¶ø-‡¶´‡ßç‡¶∞‡ßá‡¶Æ */
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.loading-container p {
    font-size: 1.1rem;
    font-weight: 500;
    margin: 0;
    color: var(--text);
}
/* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶¨‡¶æ‡¶ü‡¶æ‡¶∞‡ßá‡¶∞ ‡¶™‡¶≤‡¶∏ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
@keyframes pulseAvatar {
  0% { transform: scale(1); box-shadow: 0 0 0 rgba(0,0,0,0.2); }
  50% { transform: scale(1.05); box-shadow: 0 0 15px rgba(0,0,0,0.3); }
  100% { transform: scale(1); box-shadow: 0 0 0 rgba(0,0,0,0.2); }
}

.avatar.animated {
  border-radius: 50%;
  animation: pulseAvatar 1.5s infinite;
}
  /* ------------------------------------------------ */
  /* --- UPDATED SEARCH INPUT STYLING ---             */
  /* ------------------------------------------------ */
  .search-input-group {
      position: relative;
      display: flex;
      align-items: center;
      margin-bottom: 16px; /* Increased margin for better separation */
      box-shadow: var(--shadow); /* Added subtle shadow */
      border-radius: 12px;
      overflow: hidden; 
  }

  #searchInput {
      width:100%;
      padding:12px 14px; /* Increased padding */
      padding-right: 50px !important; /* Make room for the clear button */
      border-radius:12px !important;
      border:1px solid var(--glass-border) !important;
      background:var(--card) !important; /* Used card background */
      color:var(--text-color) !important;
      font-size: 16px;
      transition: border-color 0.2s, background 0.2s;
  }

  .light-mode #searchInput {
      background: #ffffff !important;
      border:1px solid rgba(0,0,0,0.1) !important;
  }

  #searchInput:focus {
      border-color: var(--accent) !important;
      outline: none;
      box-shadow: 0 0 0 2px rgba(225,29,72,0.3);
  }

  #clearSearch {
      position: absolute;
      right: 4px; /* Adjusted position */
      width: 40px; /* Made larger target area */
      height: 40px;
      border-radius: 50%;
      background: transparent; /* Changed to transparent */
      color: var(--muted); /* Use muted color for the icon */
      border: none;
      cursor: pointer;
      font-size: 20px; /* Larger icon */
      line-height: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s, color 0.2s;
      z-index: 10;
  }
  
  #clearSearch:hover {
      color: var(--accent); /* Hover effect */
  }

  #clearSearch.visible {
      opacity: 1;
      pointer-events: auto;
  }
  /* ------------------------------------------------ */

  /* Contact Card (Unchanged) */
  .contact-card {
      margin-top: 30px;
      padding: 16px;
      border-radius: 12px;
      background: var(--card);
      border: 1px solid var(--glass-border);
  }
  .contact-header h4 {
      margin: 0 0 12px 0;
      color: var(--accent);
      border-bottom: 1px dashed var(--glass-border);
      padding-bottom: 8px;
  }
  .light-mode .contact-header h4 {
      border-bottom: 1px dashed rgba(0,0,0,0.1);
  }
  .contact-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
  }
  .contact-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px;
      border-radius: 8px;
      background: var(--bg);
      color: var(--text-color);
      text-decoration: none;
      border: 1px solid var(--glass-border);
      transition: background 0.2s;
  }
  .contact-item:hover {
      background: var(--accent);
      color: white;
  }
  .light-mode .contact-item {
      background: #f8fafc;
      border: 1px solid rgba(0,0,0,0.1);
  }
  .light-mode .contact-item:hover {
      background: var(--accent);
      color: white;
  }
  .contact-item svg {
      width: 18px;
      height: 18px;
  }

  /* Calendar Modal (Unchanged) */
  .custom-calendar-modal {
      position: fixed;
      inset: 0;
      background: rgba(2,6,23,0.8);
      backdrop-filter: blur(6px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 80;
      padding: 18px;
  }
  .light-mode .custom-calendar-modal {
      background: rgba(243, 244, 246, 0.95);
  }
  .custom-calendar-modal.visible {
      display: flex;
  }
  .calendar-container {
      background: var(--card);
      padding: 15px;
      border-radius: 12px;
      border: 1px solid var(--glass-border);
      max-width: 320px;
      width: 100%;
  }
  .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
  }
  .calendar-header h4 {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
  }
  .calendar-header button {
      background: var(--bg);
      color: var(--text-color);
      border: 1px solid var(--glass-border);
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
  }
  .light-mode .calendar-header button {
      background: #f8fafc;
      border: 1px solid rgba(0,0,0,0.1);
  }
  .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      text-align: center;
      font-size: 12px;
  }
  .calendar-day {
      font-weight: 700;
      color: var(--accent);
      padding: 5px 0;
  }
  .calendar-date {
      padding: 8px 0;
      border-radius: 50%;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
  }
  .calendar-date:hover {
      background: rgba(225,29,72,0.1);
  }
  .calendar-date.current {
      border: 1px solid var(--accent);
  }
  .calendar-date.selected {
      background: var(--accent);
      color: white;
  }
  /* ‡¶™‡ßÅ‡¶∞‡ßã ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶á‡¶ï‡¶®‡¶ï‡ßá ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
.password-input-wrapper {
    position: relative; /* ‡¶Ü‡¶á‡¶ï‡¶®‡¶ï‡ßá ‡¶™‡¶ú‡¶ø‡¶∂‡¶® ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï */
    display: flex;
    align-items: center;
}

/* ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶´‡¶ø‡¶≤‡ßç‡¶°‡¶ï‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ö‡¶ì‡ßú‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶á‡¶ï‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶® */
.password-input-wrapper input {
    width: 100%;
    padding-right: 40px !important; /* ‡¶Ü‡¶á‡¶ï‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ */
}

/* Search bar layout */
.search-input-group {
    position: relative;
    display: flex;
    align-items: center;
}

.search-input-group input {
    width: 100%;
    padding: 10px 12px;
    padding-right: 32px;
    border: none;
    outline: none;
    font-size: 15px;
}

.search-input-group button {
    position: absolute;
    right: 10px;
    background: transparent;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: #777;
}

/* Blood Group Selector */
#bloodGroupFilter {
    width: 100%;
    padding: 8px 10px;
    font-size: 18px;
    border-radius: 8px;
    border: 1px solid #bbb;
    background: #e11d48;
}
/* ‡¶ü‡¶ó‡¶≤ ‡¶Ü‡¶á‡¶ï‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.toggle-password {
    position: absolute; /* Wrapper ‡¶è‡¶∞ ‡¶∏‡¶æ‡¶™‡ßá‡¶ï‡ßç‡¶∑‡ßá ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° */
    right: 10px; /* ‡¶°‡¶æ‡¶® ‡¶¶‡¶ø‡¶ï ‡¶•‡ßá‡¶ï‡ßá ‡¶¶‡ßÇ‡¶∞‡¶§‡ßç‡¶¨ */
    top: 50%;
    transform: translateY(-50%); /* ‡¶â‡¶≤‡ßç‡¶≤‡¶Æ‡ßç‡¶¨‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡¶æ‡¶ù‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
    background: transparent;
    border: none;
    cursor: pointer;
    font-size: 20px;
    color: var(--muted); 
    padding: 5px;
    z-index: 10;
}
/* --- ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ (Main App) --- */
.product-posts-container {
    margin-top: 20px;
    padding-bottom: 80px; 
}
.product-card-grid {
    display: grid;
    /* ‡¶õ‡ßã‡¶ü ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡ß® ‡¶ï‡¶≤‡¶æ‡¶Æ */
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); 
    gap: 12px;
}
.product-card {
    background: var(--card);
    border-radius: 12px;
    border: 1px solid var(--glass-border);
    overflow: hidden;
    box-shadow: var(--shadow);
    display: flex;
    flex-direction: column;
    transition: transform 0.2s;
}
.product-card:hover {
    transform: translateY(-2px);
    opacity: 0.98;
}
.product-image-container {
    width: 100%;
    /* ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶∏‡ßç‡¶ï‡ßü‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶á‡¶ú ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø: 1:1 Aspect Ratio */
    padding-top: 100%; 
    position: relative;
    overflow: hidden;
}
.product-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover; /* ‡¶õ‡¶¨‡¶ø‡¶ï‡ßá ‡¶ï‡ßç‡¶∞‡¶™ ‡¶ï‡¶∞‡ßá ‡¶∏‡ßç‡¶ï‡ßü‡¶æ‡¶∞ ‡¶ï‡¶®‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶´‡¶ø‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá */
}
.product-text-box {
    padding: 10px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}
.product-description {
    font-size: 14px;
    color: var(--text-color);
    margin: 0 0 10px 0;
    line-height: 1.4;
    max-height: 4.2em; /* 3 lines of text */
    overflow: hidden;
}
.buy-now-btn {
    width: 100%;
    padding: 8px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-weight: 700;
    background: var(--accent); /* ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® accent color ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã */
    color: white;
    text-align: center;
    text-decoration: none;
    font-size: 14px;
    transition: opacity 0.2s;
}
.buy-now-btn:active {
    opacity: 0.8;
}
/* ============================================== */
/* FAQ - ‡¶®‡¶§‡ßÅ‡¶® CSS ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
/* ============================================== */

/* FAQ-‡¶è‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶ì ‡¶¨‡¶æ‡¶ü‡¶®‡¶ï‡ßá ‡¶™‡¶æ‡¶∂‡¶æ‡¶™‡¶æ‡¶∂‡¶ø ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá */
.menu-item-with-details .question-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    /* ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶•‡¶ø‡¶Æ‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Æ‡¶æ‡¶®‡¶æ‡¶®‡¶∏‡¶á ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ */
    border-bottom: 1px solid var(--glass-border); 
}

/* ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.menu-item-with-details .answer-toggle-btn {
    background: var(--accent);
    color: var(--white);
    border: none;
    padding: 6px 10px;
    border-radius: 8px;
    font-size: 0.8rem;
    font-weight: 600;
    cursor: pointer;
    white-space: nowrap; 
    transition: background 0.3s ease; 
}

/* ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.menu-item-with-details.open .answer-toggle-btn {
    background: var(--card); /* ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® */
    color: var(--muted);
}

/* ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶Ö‡¶Ç‡¶∂: ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã ‡¶•‡¶æ‡¶ï‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡¶ø‡¶∂‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá */
.menu-item-with-details .item-details {
    max-height: 0; 
    overflow: hidden;
    transition: max-height 0.3s ease-in-out;
    padding: 0 10px;
}
.menu-item-with-details .item-details p.muted {
    padding: 10px 0;
    border-top: 1px dashed var(--glass-border); 
    margin: 0;
}
/* =======================================================
  ‡ßß. ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßá‡¶ï‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡ßÅ‡¶ï‡¶ø‡ßü‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ
========================================================== */
#shopPage {
    display: none; 
}
    /* 1. ‡¶ò‡ßÇ‡¶∞‡ßç‡¶£‡¶æ‡ßü‡¶Æ‡¶æ‡¶® ‡¶¨‡ßÉ‡¶§‡ßç‡¶§‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßÄ‡¶´‡ßç‡¶∞‡ßá‡¶Æ */
    @keyframes rotateCircle {
        from { transform: translate(-50%, -50%) rotate(0deg); }
        to { transform: translate(-50%, -50%) rotate(0deg); }
    }

    /* 2. ‡¶¨‡ßç‡¶≤‡¶æ‡¶° ‡¶°‡ßç‡¶∞‡¶™ ‡¶Ü‡¶á‡¶ï‡¶®‡¶ï‡ßá ‡¶â‡¶≤‡ßç‡¶ü‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ */
    .flipped-blood-drop {
        transform: scaleY(-1); 
    }

/* =======================================================
   ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶ì ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá: ‡¶™‡ßá‡¶∂‡¶æ‡¶¶‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
========================================================== */
.menuOverlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.75); /* ‡¶Ü‡¶∞‡¶ì ‡¶ó‡¶æ‡¶¢‡¶º, ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶≤‡ßÅ‡¶ï */
    display: none; 
    justify-content: center;
    align-items: center;
    z-index: 1000; /* ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ü‡¶ø ‡¶∏‡¶¨‡¶ï‡¶ø‡¶õ‡ßÅ‡¶∞ ‡¶â‡¶™‡¶∞‡ßá ‡¶•‡¶æ‡¶ï‡ßá */
    overflow-y: auto;
    padding: 20px 0;
}

.modal-container {
    background: var(--card);
    border-radius: 12px;
    box-shadow: var(--shadow);
    width: 95%;
    max-width: 600px;
    min-height: 200px;
    max-height: 650px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transform: scale(0.9); 
    opacity: 0;
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s ease;
}

.menuOverlay[style*="flex"] .modal-container {
    transform: scale(1);
    opacity: 1;
}

.modal-container .header {
    padding: 15px 20px;
    background: var(--background); 
    border-bottom: 1px solid var(--border-color);
}

.modal-container .header-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.modal-container h3 {
    font-weight: 700;
}

/* ‡¶ï‡ßç‡¶≤‡ßã‡¶ú ‡¶¨‡¶æ‡¶ü‡¶® (‡¶ï‡ßç‡¶∞‡¶∏ ‡¶ö‡¶ø‡¶π‡ßç‡¶®) ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.modal-container .back-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 5px;
    font-size: 1.6rem; 
    color: var(--muted-text);
    transition: color 0.2s ease, transform 0.3s ease;
    margin-right: auto;
    order: -1; 
}

.modal-container .back-btn:hover {
    color: var(--primary-color);
    transform: rotate(90deg); /* ‡¶ò‡ßã‡¶∞‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
}

.modal-container .content-area {
    padding: 20px;
    overflow-y: auto;
}
/* ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßÇ‡¶≤ CSS ‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶è‡¶á ‡¶Ö‡¶Ç‡¶∂‡¶ü‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶® */
@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.05); opacity: 0.8; }
  100% { transform: scale(1); opacity: 1; }
}
.blood-pulse {
  animation: pulse 1.5s infinite ease-in-out;
}
/* =======================================================
/* =======================================================
   ‡¶´‡¶∞‡ßç‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ (‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶Æ‡¶°‡¶æ‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
========================================================== */
.input-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 600;
    font-size: 0.95rem;
    color: var(--text-color); /* ‡¶≤‡ßá‡¶¨‡ßá‡¶≤ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ó‡¶æ‡¶¢‡¶º ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
}

.input-group input[type="text"],
.input-group input[type="date"],
.input-group textarea {
    width: 100%;
    padding: 10px 12px;
    box-sizing: border-box;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: var(--card); /* ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶´‡¶ø‡¶≤‡ßç‡¶°‡ßá‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∏‡¶æ‡¶¶‡¶æ (var(--card)) */
    
    /* ***** ‡¶è‡¶á‡¶ñ‡¶æ‡¶®‡ßá ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü‡ßá‡¶∞ ‡¶∞‡¶Ç ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã ***** */
    color: var(--text-color); /* ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü‡ßá‡¶∞ ‡¶∞‡¶Ç ‡¶ï‡¶æ‡¶≤‡ßã/‡¶ó‡¶æ‡¶¢‡¶º (#333333) ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã */
    /* *************************************************************** */
    
    font-size: 1rem;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

/* ‡¶™‡ßç‡¶≤‡ßá‡¶∏‡¶π‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü (‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ) */
.input-group input::placeholder,
.input-group textarea::placeholder {
    color: var(--muted-text); /* ‡¶™‡ßç‡¶≤‡ßá‡¶∏‡¶π‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ß‡ßÇ‡¶∏‡¶∞ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
    opacity: 1; /* ‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞‡¶´‡¶ï‡ßç‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
}

.input-group input:focus,
.input-group textarea:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.15);
    outline: none;
}
/* üîπ ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.story-card {
  background: var(--card);
  border-radius: 14px;
  border: 1px solid var(--glass-border);
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  padding: 14px 16px;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

/* Hover effect */
.story-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 18px rgba(225,29,72,0.3);
  border-color: rgba(225,29,72,0.4);
}

/* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶Ö‡¶Ç‡¶∂ (‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ) */
.story-card h4 {
  font-size: 1.1rem;
  margin: 0;
  color: var(--accent);
  font-weight: 700;
}

.story-card .story-meta {
  font-size: 0.85rem;
  color: var(--muted);
  margin-top: 2px;
}

/* ‡¶Æ‡ßÇ‡¶≤ ‡¶ó‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶Ö‡¶Ç‡¶∂ */
.story-card p.story-text {
  margin-top: 10px;
  font-size: 0.95rem;
  line-height: 1.6;
  color: var(--text-color);
  white-space: pre-wrap; /* ‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡¶æ‡¶á‡¶® ‡¶¨‡¶ú‡¶æ‡ßü ‡¶∞‡¶æ‡¶ñ‡ßá */
}

/* ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ divider effect */
.story-card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 6px;
  height: 100%;
  background: linear-gradient(180deg, #e11d48, #ff6b86);
  border-radius: 6px 0 0 6px;
}

/* ‡¶≤‡¶æ‡¶á‡¶ü ‡¶Æ‡ßã‡¶°‡ßá ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶®‡ßç‡¶Ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® */
.light-mode .story-card {
  background: #ffffff;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
.light-mode .story-card:hover {
  box-shadow: 0 6px 18px rgba(225,29,72,0.25);
}
/* ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶ø‡¶Ç ‡¶π‡ßá‡¶°‡¶≤‡¶æ‡¶á‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.scrolling-banner {
  background: var(--accent); /* ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶≤‡¶æ‡¶≤ ‡¶∞‡¶Ç ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá */
  color: var(--white);
  padding: 12px 0;
  overflow: hidden; /* ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶≤‡ßÅ‡¶ï‡¶ø‡¶Ø‡¶º‡ßá ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá */
  white-space: nowrap;
  box-shadow: var(--neon);
  margin-bottom: 10px;
}
/* ‡¶Ü‡¶ó‡ßá‡¶∞ .big-plus ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡ßá ‡¶è‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶® */
.blood-drop-plus-icon {
  /* ‡¶Ü‡¶á‡¶°‡¶ø‡¶ü‡¶ø ‡¶è‡¶ï‡¶á ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶Ø‡ßá‡¶® ‡¶ú‡¶æ‡¶≠‡¶æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶®‡¶æ ‡¶≤‡¶æ‡¶ó‡ßá */
  cursor: pointer;
  width: 120px; /* ‡¶Ü‡¶á‡¶ï‡¶®‡ßá‡¶∞ ‡¶Ü‡¶ï‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£ */
  height: 120px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 20px auto;
  /* ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶•‡¶ø‡¶Æ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡ßü‡ßá‡¶¨‡¶≤ (var(--accent), ‡¶Ø‡¶æ ‡¶≤‡¶æ‡¶≤) ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶°‡ßç‡¶∞‡¶™‡¶ü‡¶ø ‡¶≤‡¶æ‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶® */
  color: var(--accent); 
  transition: transform 0.3s ease;
  
  /* ‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶™‡ßç‡¶≤‡¶æ‡¶∏ ‡¶Ü‡¶á‡¶ï‡¶®‡ßá ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã ‡¶¨‡¶æ ‡¶ó‡ßç‡¶≤‡ßã ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶¨‡ßá ‡¶è‡¶ü‡¶ø ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®: */
  filter: drop-shadow(var(--neon));
}

.blood-drop-plus-icon:active {
  /* ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶õ‡ßã‡¶ü ‡¶π‡¶¨‡ßá, ‡¶Ø‡¶æ ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶Æ‡¶®‡ßá ‡¶π‡¶¨‡ßá */
  transform: scale(0.95);
}

.svg-icon {
  width: 100%;
  height: 100%;
}
.scrolling-text {
  display: inline-block;
  font-weight: 600;
  /* ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü‡¶ï‡ßá ‡¶°‡¶æ‡¶® ‡¶¶‡¶ø‡¶ï ‡¶•‡ßá‡¶ï‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
  padding-left: 100%; 
  /* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶®: ‡ß®‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶ß‡¶∞‡ßá ‡¶ö‡¶≤‡¶¨‡ßá, ‡¶∏‡¶Æ‡¶æ‡¶® ‡¶ó‡¶§‡¶ø‡¶§‡ßá, ‡¶¨‡¶ø‡¶∞‡¶§‡¶ø‡¶π‡ßÄ‡¶®‡¶≠‡¶æ‡¶¨‡ßá */
  animation: scrollText 35s linear infinite; 
}

/* ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶ø‡¶Ç ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø Keyframe ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
@keyframes scrollText {
  0% {
    transform: translateX(0); /* ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü‡¶ø‡¶Ç ‡¶™‡¶ú‡¶ø‡¶∂‡¶® */
  }
  100% {
    /* ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü‡¶ï‡ßá ‡¶§‡¶æ‡¶∞ ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶•‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶¨‡¶æ‡¶Æ‡ßá ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶Ø‡¶º, ‡¶´‡¶≤‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶ø‡¶Ç ‡¶π‡ßü */
    transform: translateX(-100%); 
  }
}
</style>

</head>
<body class="dark-mode">
<div id="logoutReasonModal" class="modal-backdrop" style="display:none;">
    <div class="modal">
        <h3 id="logoutModalTitle">Logout</h3>
        <p class="muted" id="logoutModalSubtitle">‡¶ï‡ßá‡¶®‡ßã ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡¶®? (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</p>
        <div style="margin-top:8px">
            <textarea id="logoutReasonInput" rows="3" style="width:100%;border-radius:8px;padding:8px;" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
            <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:8px">
                <button class="btn ghost" id="logoutCancelBtn" onclick="document.getElementById('logoutReasonModal').style.display='none'">Cancel</button>
                <button class="btn primary" id="logoutReasonSubmit">Logout</button> 
            </div>
        </div>
    </div>
</div>
<!-- ===== NEW INTRO OVERLAY (REPLACE OLD loadingScreen) ===== -->
<div id="loadingScreen">
  <div id="squidIntro">
    <span class="letter">R</span>
    <span class="letter">E</span>
    <span class="letter">S</span>
    <span class="letter">C</span>
    <span class="letter">U</span>
    <span class="letter">E</span>
    <span class="letter">S</span>
  </div>
  
  <div id="loadingSubtitle"><h4>Responding Every Second, Caring Until Every Survival</h4></div>
  <div id="loadingSubtitle">BETA/CONCEPT MODE</div>
  <div id="loadingFrom">from <b><svg 
  xmlns="http://www.w3.org/2000/svg" 
  width="16" 
  height="16" 
  viewBox="0 0 24 24" 
  fill="none" 
  stroke="currentColor" 
  stroke-width="1.8" 
  stroke-linecap="round" 
  stroke-linejoin="round"
>
  <path d="M20.24 4.24a6 6 0 0 0-8.49 0L3 13v8h8l8.75-8.75a6 6 0 0 0-.01-8.49zM14 8l2 2M2 22l6-6"/>
</svg>APPOZI</b></div>
</div>
<div id="app" aria-hidden="true">
<header class="app-header" role="banner">
    <div class="brand" aria-hidden="false" onclick="location.reload()">
      <div class="drop">
        <img 
          src="https://i.postimg.cc/k4VQMbqB/NGVPTTVIKPELYGK.jpg" 
          alt="Rescues Logo" 
          style="width:32px; height:32px; border-radius:50%; object-fit:cover;"
        />
      </div>

      <div>
        <h1 id="brandTitle">RESCUES</h1>
        <div class="muted small" id="brandSubtitle">‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶∏‡¶π‡¶æ‡ßü‡¶§‡¶æ</div>
      </div>
    </div>

    <div style="display:flex;gap:10px;align-items:center">
      <div id="userBadge" class="muted small" style="display:none"></div>
      <div id="menuBtn" class="menu-btn" aria-label="Open menu" title="Menu">
        <svg width="20" height="14" viewBox="0 0 24 24" fill="none">
          <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
      </div>
    </div>
  </header>
</div>
<div id="menuOverlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="closeX" id="closeMenu" aria-label="Close menu">√ó</div>
    
    <div class="menuItem" id="aboutBtn" role="button" tabindex="0">
      <div>
        <h3 id="aboutMenuTitle">About</h3>
        <p class="muted" id="aboutMenuSubtitle">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶ì ‡¶â‡¶¶‡ßç‡¶¶‡ßá‡¶∂‡ßç‡¶Ø</p>
      </div>
      <div>‚Ä∫</div>
    </div>
    
    <div class="menuItem" id="guidelinesBtn" role="button" tabindex="0">
      <div>
        <h3 id="guidelinesMenuTitle">Guidelines</h3>
        <p class="muted" id="guidelinesMenuSubtitle">‡¶°‡ßã‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ü‡¶ö‡¶∞‡¶£</p>
      </div>
      <div>‚Ä∫</div>
    </div>
    
    <div class="menuItem" id="healthCornerBtn" role="button" tabindex="0">
      <div>
        <h3 id="healthCornerMenuTitle">Health Corner</h3>
        <p class="muted" id="healthCornerMenuSubtitle">‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶® ‡¶ì ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶ü‡¶ø‡¶™‡¶∏</p>
      </div>
      <div>‚Ä∫</div>
    </div>
    
    <div class="menuItem" id="privacyPolicyBtn" role="button" tabindex="0">
      <div>
        <h3 id="privacyPolicyMenuTitle">Privacy Policy</h3>
        <p class="muted" id="privacyPolicyMenuSubtitle">‡¶ó‡ßã‡¶™‡¶®‡ßÄ‡ßü‡¶§‡¶æ ‡¶®‡ßÄ‡¶§‡¶ø ‡¶ì ‡¶§‡¶•‡ßç‡¶Ø ‡¶®‡¶ø‡ßü‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£</p>
      </div>
      <div>‚Ä∫</div>
    </div>
    <div class="menuItem" id="themeChangeBtn" role="button" tabindex="0">
      <div>
        <h3 id="themeMenuTitle">Change Theme</h3>
        <p class="muted" id="themeMenuSubtitle">Dark / Light Mode</p>
      </div>
      <div>
        <span id="currentTheme">Dark</span> ‚Ä∫
      </div>
    </div>
    
    <div class="menuItem" id="languageChangeBtn" role="button" tabindex="0">
      <div>
        <h3 id="languageMenuTitle">Change Language</h3>
        <p class="muted" id="languageMenuSubtitle">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ / English</p>
      </div>
      <div>
        <span id="currentLang">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</span> ‚Ä∫
      </div>
    </div>
    
    <div class="menuItem" id="logoutBtn" role="button" tabindex="0">
      <div>
        <h3 id="logoutMenuTitle">Logout</h3>
        <p class="muted" id="logoutMenuSubtitle">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡ßá‡¶∞ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶®</p>
      </div>
      <div>‚Ä∫</div>
    </div>
  </div>

  <main role="main">
  

    <section id="homePage" class="page active" aria-label="Home">
  <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
    <h2 style="margin:0" id="homePageTitle">Home</h2>
    <div class="muted small" id="homePageSubtitle">‡¶∏‡¶ï‡¶≤ ‡¶°‡ßã‡¶®‡¶æ‡¶∞</div>
  </div>

  <div id="donorsGrid" class="grid" aria-live="polite"></div>
  <div id="noData" class="muted" style="display:none;margin-top:20px"></div>
  
  <!-- üîπ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡¶Æ‡ßç‡¶™‡¶ü -->
<div id="donorsLoginPrompt" style="display:none;" class="futuristic-prompt">

    <div id="authRequiredBanner" class="scrolling-banner futuristic-banner-container">
        <div class="scrolling-text scrolling-text-futuristic">
            ‚ö° ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶ü: ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶¨‡¶ø‡¶≤‡¶Æ‡ßç‡¶¨‡ßá ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!         ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶§‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶®, ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ/‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ/‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø **‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶ß‡ßç‡¶Ø‡¶§‡¶æ‡¶Æ‡ßÇ‡¶≤‡¶ï**‡•§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶õ‡¶æ‡ßú‡¶æ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡ßÄ‡¶Æ‡¶ø‡¶§ ‡¶™‡¶∞‡¶ø‡¶∏‡¶∞‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§ ‚ö° 
        </div>
    </div>

    <p id="loginPromptText" class="main-message">
        ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶§‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶®, ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ/‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø **‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶•‡¶æ‡¶ï‡¶æ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï**‡•§
    </p>
    <hr class="separator">

    <button class="btn primary register-btn" onclick="openAuthModal('register')" id="loginPromptBtn" style="font-size:15px; width:100%;">
        ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠‡ßá‡¶ü ‡¶´‡ßÅ‡¶≤ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏)
    </button>

<div class="text-back-prompt" onclick="refreshDonors()" style="font-size:12px;">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
         viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"
         style="vertical-align: middle; margin-right: 6px;">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 19 5 12 12 5"></polyline>
    </svg>
    ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶õ‡¶æ‡ßú‡¶æ ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‚Äî |‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®|
</div>

<!-- üîπ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ / ‡¶ó‡¶æ‡¶á‡¶° ‡¶¨‡¶ï‡ßç‡¶∏ -->
<div class="info-box-futuristic guide-box">
  <h4 class="guide-header">‚öôÔ∏è ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü‡¶´‡¶∞‡ßç‡¶Æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ</h4>

  <ul class="info-list-futuristic">

    <!-- ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ -->
    <li><b>‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡¶≤‡ßá:</b> ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡¶æ‡¶∞‡ßã ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§</li>
    <li><b></b> ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡ßü ‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶°‡¶ø‡¶ü ‡¶¨‡¶æ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§</li>
    <li><b></b> ‡¶ú‡ßá‡¶≤‡¶æ/‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ/‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏ ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§</li>
    <li><b></b> ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ì ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§</li>

    <!-- ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶®‡¶æ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∏‡ßÄ‡¶Æ‡¶æ‡¶¨‡¶¶‡ßç‡¶ß‡¶§‡¶æ -->
    <li><b>‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶®‡¶æ ‡¶ï‡¶∞‡¶≤‡ßá:</b> ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§</li>
    <li><b></b> ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶¨‡¶æ ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§</li>
    <li><b></b> ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏ ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶¨‡¶æ ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡¶™‡¶∂‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§</li>

  </ul>
</div>
    


<div id="donorsRefreshPrompt" style="display:none;" class="futuristic-refresh-prompt">
    <button class="btn primary refresh-btn" onclick="refreshDonors()" id="refreshBtn">
        ‡¶°‡ßá‡¶ü‡¶æ ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®
    </button>
</div>

</section>
<section id="shareViewPage" class="page" aria-label="Shared Donor View" style="display:none; padding: 20px; min-height: 100vh;">
    
    <div style="text-align: center; margin-bottom: 30px; margin-top: 40px;">
        <div style="width:60px; height:60px; margin:0 auto 15px; background:var(--accent); border-radius:50%; display:flex; align-items:center; justify-content:center;">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line></svg>
        </div>
        <h2 style="color: var(--accent); margin-bottom: 5px;">‡¶∞‡¶ï‡ßç‡¶§‡¶Ø‡ßã‡¶¶‡ßç‡¶ß‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</h2>
        <p class="muted small">‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶≤‡¶ø‡¶Ç‡¶ï‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶á ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡¶õ‡ßá‡¶®</p>
    </div>

    <div id="sharedDonorContainer" class="grid" style="max-width: 400px; margin: 0 auto;">
        </div>

    <div style="text-align: center; margin-top: 40px;">
        <button class="btn primary" onclick="exitShareMode()" style="padding: 12px 30px; display: inline-flex; align-items: center; gap: 10px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            ‡¶Æ‡ßÇ‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®
        </button>
    </div>

</section>
<section id="searchPage" class="page" aria-label="Search">

    <div class="search-input-group stylish-box">
        <input id="searchInput" type="text" placeholder="‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®..." />
        <button id="clearSearch" aria-label="Clear search">√ó</button>
    </div>

    <!-- Blood Group Selector (Hidden Initially) -->
    <div id="bloodGroupWrapper" class="stylish-box" style="display:none;">
        <select id="bloodGroupFilter">
            <option value="">‡¶∏‡¶¨ ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™</option>
            <option value="A+">A+</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="O+">O+</option>
            <option value="O-">O-</option>
            <option value="AB+">AB+</option>
            <option value="AB-">AB-</option>
        </select>
    </div>
<p text="note" style="font-size:20px;"></p>
    <div id="searchGrid" class="grid"></div>
    <div id="noSearch" class="muted" style="display:none;margin-top:20px">
        ‡¶ï‡ßã‡¶®‡ßã ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶Æ‡ßá‡¶≤‡ßá‡¶®‡¶ø‡•§
    </div>

</section>
<section id="addPage" class="page" aria-label="Add" style="
    
    <div style="position: relative; z-index: 1;">
        
        <div class="add-center" style="text-align:center; margin-bottom:40px; padding-top:20px;">
            <div class="muted" id="addPagePrompt" style="font-size:1.2rem;font-weight: bold; margin-bottom:15px; color:#e11d48;">
                **‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶Ü‡¶á‡¶ï‡¶®‡ßá ‡¶ö‡¶æ‡¶™ ‡¶¶‡¶ø‡¶®**
            </div>

            <div id="addPlus" class="blood-drop-plus-icon" aria-label="Add donor" 
                 style="display:inline-block; cursor:pointer; transition:transform 0.2s, box-shadow 0.3s;
                        box-shadow: 0 0 15px rgba(229, 57, 53, 0.8), inset 0 0 10px rgba(255, 255, 255, 0.5);
                        border-radius: 50%;
                        padding: 5px;
                        background: rgba(255, 255, 255, 0.1);
                        position: relative;
                        width: 95px; /* ‡¶á‡¶Æ‡ßá‡¶ú‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶Ü‡¶ï‡¶æ‡¶∞ */
                        height: 95px; /* ‡¶á‡¶Æ‡ßá‡¶ú‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶Ü‡¶ï‡¶æ‡¶∞ */
                        display: flex;
                        justify-content: center;
                        align-items: center;"
                 onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 0 25px rgba(229, 57, 53, 1), inset 0 0 15px rgba(255, 255, 255, 0.8)';" 
                 onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 0 15px rgba(229, 57, 53, 0.8), inset 0 0 10px rgba(255, 255, 255, 0.5)';">

                <div style="
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    width: 120%; 
                    height: 120%;
                    border: 2px solid rgba(255, 0, 0, 0.5);
                    border-radius: 50%;
                    animation: rotateCircle 10s linear infinite; 
                    box-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
                    pointer-events: none;
                    transform-origin: center;
                ">
                    <div style="
                        position: absolute;
                        top: -2px; /* ‡¶∏‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶≤‡ßá‡¶∞ ‡¶¨‡¶æ‡¶á‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶â‡¶™‡¶∞‡ßá */
                        right: -2px; /* ‡¶∏‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶≤‡ßá‡¶∞ ‡¶¨‡¶æ‡¶á‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶°‡¶æ‡¶®‡ßá */
                        width: 35px;
                        height: 35px;
                        background: #4CAF50; /* ‡¶∏‡¶¨‡ßÅ‡¶ú ‡¶∞‡¶ô */
                        border-radius: 50%;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        color: white;
                        font-size: 2.2rem;
                        font-weight: bold;
                        box-shadow: 0 0 8px rgba(76, 175, 80, 0.7);
                        z-index: 2; /* ‡¶á‡¶Æ‡ßá‡¶ú‡ßá‡¶∞ ‡¶â‡¶™‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
                    ">+</div>
                </div>

                <img src="https://i.postimg.cc/2SvLGpX7/Picsart-25-11-22-21-55-02-417.png" 
                     alt="Heart Icon" 
                     style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; position: relative; z-index: 1;">
            </div>

            <div class="muted small" id="addPageSubtitle" style="margin-top:15px; font-size:1rem;font-weight: bold; color:#b0b0b0;">
                ‡¶®‡¶ø‡¶ú‡ßá ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡ßá‡¶∞ ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶®‡ßá ‡¶â‡ßé‡¶∏‡¶æ‡¶π‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®
            </div>
        </div>

        <div class="content-box" style="
            background: rgba(255, 255, 255, 0.9);
            border-radius: 18px;
            padding: 25px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3), 0 0 10px rgba(229, 57, 53, 0.5);
            border: 1px solid rgba(229, 57, 53, 0.2);
        ">
            <h3 style="display:flex; align-items:center; gap:10px; font-size:1.3rem; margin-bottom:15px; color:#d32f2f;">
                <i class="fas fa-bell"></i> ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü
            </h3>
            <p class="muted" style="text-align:center; margin-bottom:20px; font-size:1rem;font-weight: bold; color:#333;">
                ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡¶¶‡¶ø ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶® ‡¶π‡¶Ø‡¶º, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶è‡¶á ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
            </p>

            <button class="btn emergency" style="
                width:100%; 
                padding:15px 0; 
                font-size:1.1rem; 
                display:flex; 
                align-items:center; 
                justify-content:center; 
                gap:10px; 
                background: linear-gradient(90deg, #e53935 0%, #d32f2f 100%); 
                color:#fff; 
                border:none; 
                border-radius:10px; 
                cursor:pointer;
                box-shadow: 0 4px 15px rgba(229, 57, 53, 0.6);
                transition:background 0.2s, transform 0.1s, box-shadow 0.3s;"
                onmouseover="this.style.background='linear-gradient(90deg, #d32f2f 0%, #c62828 100%)'; this.style.transform='scale(1.02)'; this.style.boxShadow='0 6px 20px rgba(229, 57, 53, 0.8)';" 
                onmouseout="this.style.background='linear-gradient(90deg, #e53935 0%, #d32f2f 100%)'; this.style.boxShadow='0 4px 15px rgba(229, 57, 53, 0.6)'; this.style.transform='scale(1)';"
                onclick="openEmergencyPostModal()">
                
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" 
                     viewBox="0 0 24 24" fill="none" stroke="currentColor" 
                     stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2v4"></path>
                    <path d="M5.22 5.22l2.83 2.83"></path>
                    <path d="M2 12h4"></path>
                    <path d="M20 12h4"></path>
                    <path d="M18.78 5.22l-2.83 2.83"></path>
                    <path d="M12 8a4 4 0 0 0-4 4v4H8a2 2 0 0 0-2 2v2h12v-2a2 2 0 0 0-2-2h0v-4a4 4 0 0 0-4-4z"></path>
                </svg>
                ‡¶á‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
        </div>

    </div>
</section>
    <section id="profilePage" class="page" aria-label="Profile">
      <h2 id="profilePageTitle">Profile</h2>
      <div style="margin-top:12px" id="profileInfo"></div>
      <h3 style="margin-top:18px" id="myDonorsTitle">Your Added Donors</h3>
      <div id="myDonors" class="grid" style="margin-top:12px"></div>
      <div id="noMyDonors" class="muted" style="display:none;margin-top:12px">‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßã‡¶®‡ßã ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßã‡¶®‡¶ø‡•§</div>
    </section>
    <section id="shopPage" class="page" aria-label="Shop/Products">
  <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
    <h2 style="margin:0" id="shopPageTitle">Shop / Products</h2>
    <div class="muted small" id="shopPageSubtitle">‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡¶£‡ßç‡¶Ø‡¶∏‡¶Æ‡ßÇ‡¶π</div>
  </div>
  
  <div id="productPostsContainer" class="product-posts-container">
      <div id="productCardGrid" class="product-card-grid">
          <div class="muted" id="initialProductLoadMessage">‡¶™‡¶£‡ßç‡¶Ø ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
      </div>
      <div id="noProductPosts" class="muted" style="display:none;margin-top:20px; text-align:center;">
          ‡¶è‡¶á ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡¶£‡ßç‡¶Ø ‡¶®‡ßá‡¶á‡•§
      </div>
  </div>

  </section>

    <section id="emergencyPage" class="page" aria-label="Emergency Posts">
      
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
        <h2 style="margin:0" id="emergencyPageTitle">Emergency Posts</h2>
        <button class="btn primary small" onclick="openEmergencyPostModal()">+ New Post</button>
    </div>
    <div id="emergencyGrid" class="grid" aria-live="polite"></div>
    <div id="noEmergencyPosts" class="muted" style="display:none;margin-top:20px">‡¶ï‡ßã‡¶®‡ßã ‡¶á‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶®‡ßá‡¶á‡•§</div>
    
    <div class="contact-card" style="margin-top: 20px;">
        <div class="contact-header">
            <h4 id="contactHeader" style="text-align:center;font-size:20px; ">Support</h4>
        </div>
        <div class="contact-grid">
            <a href="https://www.facebook.com/appozi" target="_blank" class="contact-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
                <span>Follow Page</span>
            </a>
            <a href="https://www.facebook.com/groups/fenipolytechnicbondhumohol" target="_blank" class="contact-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                <span>Join Group</span>
            </a>
            <a href="mailto:dev.appozi@gmail.com" class="contact-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                <span>E-mail-Us</span>
            </a>
            <a href="tel:+8809638551941" class="contact-item">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" 
         stroke="currentColor" stroke-width="2" stroke-linecap="round" 
         stroke-linejoin="round" class="feather feather-phone">
        <path d="M22 16.92v3a2 2 0 0 1-2.18 2h-2.82a2 2 0 0 1-1.74-1.23L10.43 15a1 1 0 0 1 
        .4-1.42l3.41-2.28a1 1 0 0 1 1.41.4l.26.42a1 1 0 0 0 
        1.25.29l1.62-.97a2 2 0 0 1 2.38.35L22 16.92zM12 
        2a10 10 0 1 0 0 20A10 10 0 0 0 12 2z"></path>
    </svg>
    <span>Contact Us</span>
</a>
            <a href="#donorStories" class="contact-item" onclick="openDonorPostModal()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                <span>Make A Post</span>
            </a>
            <a href="#faqPage" class="contact-item" onclick="toggleOverlay('faqPage')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                <span>FAQ </span>
            </a>
        
        </div>
    </div>
    
    <div id="donorStories" class="contact-card" aria-label="Donor Experience Stories" style="margin-top: 10px;">
        <div class="contact-header">
            <h4 id="donorStoriesHeader" style="text-align:center; font-size:15px; ">‡¶Ü‡¶™‡¶®‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ï‡¶•‡¶æ</h4>
            
        </div>
        <div id="storiesGrid" class="grid" aria-live="polite">
            <div class="muted" style="margin-top:10px; text-align: center; padding: 15px;">
                ‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§
            </div>
        </div>
    </div>
    
    <div class="menuOverlay" id="faqPage" onclick="closeFaqAndReset()" style="display: none;">
        <div class="modal-container" onclick="event.stopPropagation()">
            
            <div class="header" style="background:var(--card)">
                <div class="header-inner">
                    <button class="back-btn" onclick="closeFaqAndReset()"> 
                        <i class="icon" style="--icon: 'close-outline';">‚ùå</i>
                    </button>
                    <h3>‡¶∏‡¶ö‡¶∞‡¶æ‡¶ö‡¶∞ ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶∏‡¶æ (FAQ)</h3>
                </div>
            </div>

            <div class="content-area">
                <div id="faq-initial-screen" style="padding: 30px; text-align: center;">
                    <p class="muted" style="margin-bottom: 20px; font-size: 1.1rem;font-weight: bold; line-height: 1.5;">
                        ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶® ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ, ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ü‡¶ö‡¶∞‡¶£ ‡¶è‡¶¨‡¶Ç ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶æ‡¶¨‡¶≤‡ßÄ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶ì ‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ö‡¶æ‡¶™ ‡¶¶‡¶ø‡¶®‡•§
                    </p>
                    <button id="showFaqQuestionsBtn" class="primary-btn" style="width: 100%; max-width: 300px; padding: 12px 20px;" onclick="showFaqQuestions()">
                        <i class="icon" style="--icon: 'list-circle-outline'; margin-right: 8px;font-weight: bold;"></i>
                        ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶æ‡¶¨‡¶≤‡ßÄ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
                    </button>
                </div>
           <div class="menu-list" id="faq-list" style="display: none;">

    <!-- ‡ßß -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ßß. ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶ì ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶¨‡¶Ø‡¶º‡¶∏ ‡¶ï‡¶§?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡ßß‡ßÆ ‡¶•‡ßá‡¶ï‡ßá ‡ß¨‡ß´ ‡¶¨‡¶õ‡¶∞ ‡¶¨‡ßü‡¶∏ ‡¶π‡¶≤‡ßá ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡•§ ‡¶§‡¶¨‡ßá ‡¶¶‡¶æ‡¶§‡¶æ‡¶∞ ‡¶∂‡¶æ‡¶∞‡ßÄ‡¶∞‡¶ø‡¶ï ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶ì ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶ì‡¶™‡¶∞ ‡¶è‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡¶∞ ‡¶ï‡¶∞‡ßá‡•§</p>
        </div>
    </div>

    <!-- ‡ß® -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ß®. ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶ì‡¶ú‡¶® ‡¶ï‡¶§ ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ ‡¶ö‡¶æ‡¶á?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß™‡ß´ ‡¶ï‡¶ø‡¶≤‡ßã‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ (kg) ‡¶¨‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡•§</p>
        </div>
    </div>

    <!-- ‡ß© -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ß©. ‡¶ï‡¶§‡¶¶‡¶ø‡¶® ‡¶™‡¶∞ ‡¶™‡¶∞ ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶è‡¶ï‡¶ú‡¶® ‡¶∏‡ßÅ‡¶∏‡ßç‡¶• ‡¶™‡ßÅ‡¶∞‡ßÅ‡¶∑ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß© ‡¶Æ‡¶æ‡¶∏ (‡ßØ‡ß¶ ‡¶¶‡¶ø‡¶®) ‡¶™‡¶∞ ‡¶™‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßÅ‡¶∏‡ßç‡¶• ‡¶Æ‡¶π‡¶ø‡¶≤‡¶æ ‡ß™ ‡¶Æ‡¶æ‡¶∏ (‡ßß‡ß®‡ß¶ ‡¶¶‡¶ø‡¶®) ‡¶™‡¶∞ ‡¶™‡¶∞ ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡•§</p>
        </div>
    </div>

    <!-- ‡ß™ -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ß™. ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶ï‡ßÄ ‡¶ß‡¶∞‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£‡ßá ‡¶ú‡¶≤ ‡¶™‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶™‡ßá‡¶ü ‡¶≠‡¶∞‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ñ‡ßá‡ßü‡ßá ‡¶Ü‡¶∏‡ßÅ‡¶®‡•§ ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶™‡ßá‡¶ü‡ßá ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶â‡¶ö‡¶ø‡¶§ ‡¶®‡¶Ø‡¶º‡•§</p>
        </div>
    </div>

    <!-- ‡ß´ -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ß´. ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶ø‡¶§‡ßá ‡¶Æ‡ßã‡¶ü ‡¶ï‡¶§ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶≤‡¶æ‡¶ó‡ßá?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶™‡ßÅ‡¶∞‡ßã ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶æ‡¶Ø‡¶º ‡ß©‡ß¶ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶®‡ßá‡¶Ø‡¶º‡•§ ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶ì ‡¶∞‡¶ï‡ßç‡¶§ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π (‡ßß‡ß¶-‡ßß‡ß´ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü) ‡¶Ö‡¶®‡ßç‡¶§‡¶∞‡ßç‡¶≠‡ßÅ‡¶ï‡ßç‡¶§‡•§</p>
        </div>
    </div>

    <!-- ‡ß¨ -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ß¨. ‡¶Ö‡¶∏‡ßÅ‡¶∏‡ßç‡¶• ‡¶¨‡¶æ ‡¶ì‡¶∑‡ßÅ‡¶ß ‡¶ñ‡ßá‡¶≤‡ßá ‡¶ï‡¶ø ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶®‡¶æ‡•§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü‡¶ø‡¶¨‡¶æ‡¶Ø‡¶º‡ßã‡¶ü‡¶ø‡¶ï ‡¶¨‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶ï‡ßã‡¶®‡ßã ‡¶ì‡¶∑‡ßÅ‡¶ß ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶¨‡¶æ ‡¶Ö‡¶∏‡ßÅ‡¶∏‡ßç‡¶• ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶â‡¶ö‡¶ø‡¶§ ‡¶®‡¶Ø‡¶º‡•§ ‡¶™‡ßÅ‡¶∞‡ßã‡¶™‡ßÅ‡¶∞‡¶ø ‡¶∏‡ßÅ‡¶∏‡ßç‡¶• ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞‡¶á ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        </div>
    </div>

    <!-- ‡ß≠ -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ß≠. ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶ï‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶ï‡¶∞‡¶¨?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">Add ‡¶™‡ßá‡¶ú‡ßá ‡¶ó‡ßá‡¶≤‡ßá ‡¶è‡¶¨‡¶Ç ‡¶è‡¶á ‡¶™‡ßá‡¶ú‡ßá‡¶∞ ‡¶â‡¶™‡¶∞‡ßá '+new post' ‡¶Ö‡¶™‡¶∂‡¶®‡¶ü‡¶ø ‡¶¨‡ßá‡¶õ‡ßá ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶∞‡ßã‡¶ó‡ßÄ‡¶∞ ‡¶ì ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®‡•§</p>
        </div>
    </div>

    <!-- ‡ßÆ -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ßÆ. ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶ï‡ßÄ ‡¶ß‡¶∞‡¶®‡ßá‡¶∞ ‡¶Ü‡¶ö‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶â‡¶ö‡¶ø‡¶§?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶°‡ßã‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∏‡¶∞‡ßç‡¶¨‡¶¶‡¶æ ‡¶¨‡¶ø‡¶®‡¶Ø‡¶º‡ßÄ ‡¶ì ‡¶ï‡ßÉ‡¶§‡¶ú‡ßç‡¶û ‡¶•‡¶æ‡¶ï‡ßÅ‡¶®‡•§ ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶ì ‡¶∏‡¶ø‡¶¶‡ßç‡¶ß‡¶æ‡¶®‡ßç‡¶§‡¶ï‡ßá ‡¶∏‡¶Æ‡ßç‡¶Æ‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶™ ‡¶∏‡ßÉ‡¶∑‡ßç‡¶ü‡¶ø ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§</p>
        </div>
    </div>

    <!-- ‡ßØ -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ßØ. ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ï‡ßÄ ‡¶ï‡¶∞‡¶æ ‡¶â‡¶ö‡¶ø‡¶§?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶™‡¶∞ ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ßß‡ß´ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡¶¨‡¶ø‡¶∂‡ßç‡¶∞‡¶æ‡¶Æ ‡¶®‡¶ø‡¶®‡•§ ‡¶™‡ßç‡¶∞‡¶ö‡ßÅ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£‡ßá ‡¶ú‡¶≤, ‡¶´‡¶≤‡ßá‡¶∞ ‡¶∞‡¶∏ ‡¶¨‡¶æ ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø‡¶ï‡¶∞ ‡¶™‡¶æ‡¶®‡ßÄ‡¶Ø‡¶º ‡¶™‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßá‡¶á ‡¶¶‡¶ø‡¶® ‡¶≠‡¶æ‡¶∞‡ßÄ ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶ø‡¶∞‡¶§ ‡¶•‡¶æ‡¶ï‡ßÅ‡¶®‡•§</p>
        </div>
    </div>

    <!-- ‡ßß‡ß¶ -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ßß‡ß¶. ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶® ‡¶ï‡¶ø ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßç‡¶∑‡¶§‡¶ø‡¶ï‡¶∞?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶®‡¶æ, ‡¶è‡¶ü‡¶ø ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßç‡¶∑‡¶§‡¶ø‡¶ï‡¶∞ ‡¶®‡¶Ø‡¶º‡•§ ‡¶¨‡¶∞‡¶Ç ‡¶è‡¶ü‡¶ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡¶ï‡ßç‡¶§‡¶ï‡¶£‡¶ø‡¶ï‡¶æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡ßá ‡¶è‡¶¨‡¶Ç ‡¶∂‡¶∞‡ßÄ‡¶∞‡¶ï‡ßá ‡¶∏‡¶§‡ßá‡¶ú ‡¶∞‡¶æ‡¶ñ‡ßá‡•§</p>
        </div>
    </div>

    <!-- ‡ßß‡ßß -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ßß‡ßß. ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ ‡¶ú‡¶æ‡¶®‡¶ø ‡¶®‡¶æ, ‡¶§‡¶¨‡ßÅ‡¶ì ‡¶ï‡¶ø ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶®‡¶æ, ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ ‡¶ú‡¶æ‡¶®‡¶æ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∞‡¶ï‡ßç‡¶§ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßá ‡¶§‡¶¨‡ßá‡¶á ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        </div>
    </div>

    <!-- ‡ßß‡ß® -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ßß‡ß®. ‡¶ï‡ßá‡¶â ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶∞ ‡¶¨‡¶ø‡¶®‡¶ø‡¶Æ‡¶Ø‡¶º‡ßá ‡¶∞‡¶ï‡ßç‡¶§ ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‡¶ï‡ßÄ ‡¶ï‡¶∞‡¶¨?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ï‡¶Æ‡¶ø‡¶â‡¶®‡¶ø‡¶ü‡¶ø **‡¶®‡¶ø‡¶É‡¶∏‡ßç‡¶¨‡¶æ‡¶∞‡ßç‡¶• ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡¶ï‡ßá** ‡¶â‡ßé‡¶∏‡¶æ‡¶π‡¶ø‡¶§ ‡¶ï‡¶∞‡ßá‡•§ ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶Ü‡¶∞‡ßç‡¶•‡¶ø‡¶ï ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶¨‡¶æ ‡¶¨‡¶ø‡¶®‡¶ø‡¶Æ‡¶Ø‡¶º‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡¶æ‡¶¨ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶¨‡¶æ ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶®‡¶ø‡¶∑‡¶ø‡¶¶‡ßç‡¶ß‡•§ ‡¶Ø‡¶¶‡¶ø ‡¶è‡¶Æ‡¶® ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶¶‡ßá‡¶ñ‡ßá‡¶®, ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        </div>
    </div>

    <!-- ‡ßß‡ß© -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ßß‡ß©. ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶ñ‡¶æ‡¶®‡•§ ‡¶§‡ßá‡¶≤‡ßá‡¶∞ ‡¶¨‡¶æ ‡¶≠‡¶æ‡¶∞‡ßÄ ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶è‡¶°‡¶º‡¶ø‡¶Ø‡¶º‡ßá ‡¶ö‡¶≤‡ßÅ‡¶®‡•§ ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶ú‡¶≤ ‡¶™‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        </div>
    </div>

    <!-- ‡ßß‡ß™ -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ßß‡ß™. ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶™‡¶∞‡ßá ‡¶∂‡¶∞‡ßÄ‡¶∞‡ßá‡¶∞ ‡¶ï‡ßã‡¶® ‡¶Ö‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ï‡ßç‡¶≤‡¶æ‡¶®‡ßç‡¶§‡¶ø ‡¶¨‡¶æ ‡¶Æ‡¶æ‡¶•‡¶æ ‡¶ò‡ßã‡¶∞‡¶æ ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§ ‡¶¨‡¶ø‡¶∂‡ßç‡¶∞‡¶æ‡¶Æ ‡¶®‡¶ø‡¶® ‡¶è‡¶¨‡¶Ç ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶ú‡¶≤ ‡¶™‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡¶∞ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶°‡¶æ‡¶ï‡ßç‡¶§‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§</p>
        </div>
    </div>

    <!-- ‡ßß‡ß´ -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ßß‡ß´. ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶™‡¶∞ ‡¶ï‡¶§‡¶¶‡¶ø‡¶® ‡¶ï‡¶≠‡¶æ‡¶∞‡ßá‡¶ú ‡¶¨‡¶æ ‡¶∞‡ßã‡¶ó ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∞‡ßã‡¶ß ‡¶ï‡¶Æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶è‡¶ï‡¶ú‡¶® ‡¶∏‡ßÅ‡¶∏‡ßç‡¶• ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶® ‡¶∂‡¶∞‡ßÄ‡¶∞‡¶ï‡ßá ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶ ‡¶∞‡¶æ‡¶ñ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶∞‡ßã‡¶ó ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∞‡ßã‡¶ß ‡¶ï‡ßç‡¶∑‡¶Æ‡¶§‡¶æ ‡¶ï‡¶Æ‡¶æ‡¶Ø‡¶º ‡¶®‡¶æ‡•§ ‡¶§‡¶¨‡ßá ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡¶ø‡¶∂‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ì ‡¶∏‡ßÅ‡¶∑‡¶Æ ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡•§</p>
        </div>
    </div>

    <!-- ‡ßß‡ß¨ -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ßß‡ß¨. ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º ‡¶Ø‡ßá ‡¶∞‡¶ï‡ßç‡¶§ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶∞‡¶ï‡ßç‡¶§ ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡¶ï‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶ì ‡¶∞‡¶ï‡ßç‡¶§ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡•§ ‡¶∞‡¶ï‡ßç‡¶§ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∏‡¶ï‡¶≤ ‡¶∏‡ßá‡¶´‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶ü‡ßã‡¶ï‡¶≤ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡•§</p>
        </div>
    </div>

    <!-- ‡ßß‡ß≠ -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ßß‡ß≠. ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶§‡¶æ ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶Ø‡ßã‡¶ó ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶π‡ßç‡¶Ø‡¶æ‡¶Å, ‡¶∏‡ßÅ‡¶∏‡ßç‡¶• ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶π‡¶¨‡ßá, ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶ò‡ßÅ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶ñ‡ßá‡¶Ø‡¶º‡ßá ‡¶Ü‡¶∏‡¶æ ‡¶â‡¶ö‡¶ø‡¶§‡•§ ‡¶∞‡ßã‡¶ó ‡¶¨‡¶æ ‡¶ì‡¶∑‡ßÅ‡¶ß ‡¶®‡¶ø‡¶≤‡ßá ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§</p>
        </div>
    </div>

    <!-- ‡ßß‡ßÆ -->
    <div class="menu-item-with-details">
        <div class="question-row">
            <span>‡ßß‡ßÆ. ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∂‡¶∞‡ßÄ‡¶∞‡ßá‡¶∞ ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶ï‡¶ø ‡¶ï‡¶Æ‡ßá ‡¶Ø‡¶æ‡¶Ø‡¶º?</span>
            <button class="answer-toggle-btn" onclick="toggleDetails(this)">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </div>
        <div class="item-details">
            <p class="muted">‡¶®‡¶æ, ‡¶∂‡¶∞‡ßÄ‡¶∞ ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡¶ï‡ßç‡¶§‡¶ï‡¶£‡¶ø‡¶ï‡¶æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá‡•§ ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶® ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶ ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßç‡¶¨‡¶≤‡ßç‡¶™ ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶≠‡¶æ‡¶¨‡¶ø‡¶ï ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ü‡¶∏‡ßá‡•§</p>
        </div>
    </div>

</div>
            </div>

        </div>
    </div>

<div class="menuOverlay" id="donorPostModal" onclick="closeDonorPostModal()" style="display: none;">
    <div class="modal-container" onclick="event.stopPropagation()" style="max-width: 500px;">
        
        <div class="header" style="background:var(--card)">
            <div class="header-inner">
                <button class="back-btn" onclick="closeDonorPostModal()"> 
                    <i class="icon" style="--icon: 'close-outline';"></i>
                </button>
                <h3 style="font-size:15px; text-align:center;">
                    ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶∏‡ßç‡¶¨‡¶æ‡¶ß‡ßÄ‡¶® ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§!
                </h3>
            </div>
        </div>

        <div class="content-area" style="padding: 20px;">
            <form id="donorPostForm">

                <!-- ‡¶®‡¶æ‡¶Æ -->
                <div class="input-group">
                    <label for="donorName">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï):</label>
                    <input 
                        type="text" 
                        id="donorName" 
                        placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∞‡¶´‡¶ø‡¶ï ‡¶Ü‡¶π‡¶Æ‡ßá‡¶¶"
                        style="
                            width:100%;
                            padding:10px;
                            border-radius:8px;
                            border:1px solid var(--border);
                            background:#3ca6;
                            color:var(--text);
                        "
                    >
                </div>

                <!-- ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ -->
                <div class="input-group" style="margin-top: 15px;">
                    <label for="donationDate">‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
                    <input 
                        type="date" 
                        id="donationDate" 
                        required
                        style="
                            width:100%;
                            padding:10px;
                            border-radius:8px;
                            border:1px solid var(--border);
                            background:var(--muted);
                            color:var(--text);
                        "
                    >
                </div>

                <!-- ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ -->
                <div class="input-group" style="margin-top: 15px;">
                    <label for="donorStory">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ø‡¶ï):</label>
                    <textarea 
                        id="donorStory" 
                        rows="6" 
                        required
                        placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ, ‡¶Ö‡¶®‡ßÅ‡¶≠‡ßÇ‡¶§‡¶ø ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."
                        style="
                            width:100%;
                            padding:10px;
                            border-radius:8px;
                            border:1px solid var(--border);
                            background:var(--accent);
                            color:var(--text);
                            resize: vertical;
                        "
                    ></textarea>
                </div>

                <p class="muted" style="font-size: 0.9em; margin-top: 15px;">
                    * ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂‡ßá‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§
                </p>

                <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 25px;">
                    <button type="button" class="btn small" onclick="closeDonorPostModal()" style="width:30%;">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    <button type="submit" class="btn primary small" style="width:70%;">‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>

            </form>
        </div>

    </div>
</div>
</section>
      </div>
      
    </section>
    
  </main>
<footer class="app-footer" role="navigation" aria-label="Footer">
    <div id="navHome" class="nav-btn active" title="Home" onclick="scrollToTop()">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V10.5z" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"></path></svg>
      <div class="small" id="navHomeText">Home</div>
    </div>
    
    <div id="navSearch" class="nav-btn" title="Search" onclick="scrollToTop()">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16z" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"></path></svg>
      <div class="small" id="navSearchText">Search</div>
    </div>
    <div id="navAdd" class="nav-btn" title="Add" onclick="scrollToTop()">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg>
      <div class="small" id="navAddText">Add</div>
    </div>
   <div id="navEmergency" class="nav-btn" title="‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü" onclick="scrollToTop()">
    <svg id="emergencyIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-octagon">
        <polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>
        <line x1="12" y1="8" x2="12" y2="12"></line>
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
    </svg>
    
    <div class="small" id="navEmergencyText">‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø</div>
</div>

<div id="navShop" class="nav-btn" title="Shop" onclick="scrollToTop()">
  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shopping-bag">
    <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
    <line x1="3" y1="6" x2="21" y2="6"></line>
    <path d="M16 10a4 4 0 0 1-8 0"></path>
  </svg>
  <div class="small" id="navShopText">Shop</div>
</div>
<div id="navProfile" class="nav-btn" title="Profile" onclick="scrollToTop()">
      <div id="profileIconContainer">
        <svg width="20" height="20" viewBox="0 0 0 24 24" fill="none"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"></path></svg>
      </div>
      <div class="small" id="navProfileText">Profile</div>
    </div>


</footer>

</div>
<div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true">
    <div id="modalContent"></div>
  </div>
</div>
<div id="customCalendarModal" class="custom-calendar-modal" aria-hidden="true">
  <div class="calendar-container">
    <div class="calendar-header">
      <button id="prevMonthBtn">‚Äπ</button>
      <h4 id="calendarMonthYear">RESCUES Calendar - </h4>
      <button id="nextMonthBtn">‚Ä∫</button>
    </div>
    <div class="calendar-grid" id="calendarGrid"></div>
    <div style="display:flex;justify-content:flex-end;margin-top:12px;gap:8px">
      <button class="btn ghost small" id="clearDateBtn">Clear Date</button>
      <button class="btn ghost small" onclick="closeCalendarModal()">Cancel</button>
    </div>
  </div>
</div>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
// Firebase Config and Initial Setup (Unchanged)
const firebaseConfig = {
  apiKey: "AIzaSyDtFcTxfwB2tkfVx0MpnFZKpd7ibSqYudU",
  authDomain: "blood-bfa8c.firebaseapp.com",
  projectId: "blood-bfa8c",
  storageBucket: "blood-bfa8c.appspot.com",
  messagingSenderId: "460305345299",
  appId: "1:460305345299:web:1f07370c34a61755a748e6",
  measurementId: "G-ZJMLVH8XN0",
  databaseURL: "https://blood-bfa8c-default-rtdb.firebaseio.com"
};
firebase.initializeApp(firebaseConfig);

// DOM Elements
const loadingScreen = document.getElementById('loadingScreen');
const app = document.getElementById('app');
const menuBtn = document.getElementById('menuBtn');
const menuOverlay = document.getElementById('menuOverlay');
const closeMenu = document.getElementById('closeMenu');
const aboutBtn = document.getElementById('aboutBtn');
const guidelinesBtn = document.getElementById('guidelinesBtn');
const logoutBtn = document.getElementById('logoutBtn');
const modalBackdrop = document.getElementById('modalBackdrop');
const modalContent = document.getElementById('modalContent');
// DOM Elements ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
const pages = {
  home: document.getElementById('homePage'),
  search: document.getElementById('searchPage'),
  add: document.getElementById('addPage'),
  profile: document.getElementById('profilePage'),
  emergency: document.getElementById('emergencyPage'),
  shop: document.getElementById('shopPage'),
  shareView: document.getElementById('shareViewPage') // ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßá‡¶ú
};

// ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ ‡¶≠‡ßá‡¶∞‡¶ø‡ßü‡ßá‡¶¨‡¶≤
const sharedDonorContainer = document.getElementById('sharedDonorContainer');
const donorsGrid = document.getElementById('donorsGrid');
const searchGrid = document.getElementById('searchPage');
const myDonorsGrid = document.getElementById('myDonors');
const emergencyGrid = document.getElementById('emergencyGrid');
const noData = document.getElementById('noData');
const noMyDonors = document.getElementById('noMyDonors');
const noSearch = document.getElementById('noSearch');
const noEmergencyPosts = document.getElementById('noEmergencyPosts');
// ...
const navProfile = document.getElementById('navProfile');
const navEmergency = document.getElementById('navEmergency');
// ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§:
const navShop = document.getElementById('navShop'); 

// ...

const emergencyIcon = document.getElementById('emergencyIcon');
const profileIconContainer = document.getElementById('profileIconContainer');
const searchInput = document.getElementById('searchInput');
const clearSearch = document.getElementById('clearSearch');
const addPlus = document.getElementById('addPlus');
const userBadge = document.getElementById('userBadge');
const logoutReasonModal = document.getElementById('logoutReasonModal');
const logoutReasonInput = document.getElementById('logoutReasonInput');
const logoutReasonSubmit = document.getElementById('logoutReasonSubmit');
const customCalendarModal = document.getElementById('customCalendarModal');
const calendarMonthYear = document.getElementById('calendarMonthYear');
const calendarGrid = document.getElementById('calendarGrid');
const prevMonthBtn = document.getElementById('prevMonthBtn');
const nextMonthBtn = document.getElementById('nextMonthBtn');
const clearDateBtn = document.getElementById('clearDateBtn');
const donorsLoginPrompt = document.getElementById('donorsLoginPrompt');
const donorsRefreshPrompt = document.getElementById('donorsRefreshPrompt');

let donors = {};
let users = {};
let allEmergencyPosts = {};
let currentUser = null;
let donorsRef = firebase.database().ref('donors');
let usersRef = firebase.database().ref('users');
let emergencyRef = firebase.database().ref('emergencyPosts');
let appRatingsRef = firebase.database().ref('appRatings');

let activeDateInput = null;
let currentCalendarDate = new Date();

// NEW: Theme and Language Handlers
const themeChangeBtn = document.getElementById('themeChangeBtn');
const languageChangeBtn = document.getElementById('languageChangeBtn');
const currentThemeSpan = document.getElementById('currentTheme');
const currentLangSpan = document.getElementById('currentLang');
let currentTheme = localStorage.getItem('theme') || 'dark'; // Default to dark
let currentLang = localStorage.getItem('lang') || 'bn'; // Default to Bengali

// Language translation object (unchanged)
const translations = {
    bn: {
        brandSubtitle: '‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶∏‡¶π‡¶æ‡ßü‡¶§‡¶æ',
        navEmergencyText: '‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø',
        navSearchText: '‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®',
        navHomeText: '‡¶π‡ßã‡¶Æ',
        navAddText: '‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®',
        navProfileText: '‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤',
        navShopText: '‡¶™‡¶£‡ßç‡¶Ø', 
        aboutMenuTitle: '‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ï‡¶•‡¶æ',
        aboutMenuSubtitle: '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶ì ‡¶â‡¶¶‡ßç‡¶¶‡ßá‡¶∂‡ßç‡¶Ø',
        guidelinesMenuTitle: '‡¶®‡¶ø‡ßü‡¶Æ‡¶æ‡¶¨‡¶≤‡ßÄ',
        guidelinesMenuSubtitle: '‡¶°‡ßã‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ü‡¶ö‡¶∞‡¶£',
        themeMenuTitle: '‡¶•‡¶ø‡¶Æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®',
        themeMenuSubtitle: 'Dark / Light Mode',
        languageMenuTitle: '‡¶≠‡¶æ‡¶∑‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®',
        languageMenuSubtitle: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ / English',
        logoutMenuTitle: '‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü',
        logoutMenuSubtitle: '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡ßá‡¶∞ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶®',
        logoutModalTitle: '‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü',
        logoutModalSubtitle: '‡¶ï‡ßá‡¶®‡ßã ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡¶®? (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)',
        logoutCancelBtn: '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤',
        logoutReasonPlaceholder: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...',
        logoutBtnText: '‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü',
        homePageTitle: '‡¶π‡ßã‡¶Æ',
        homePageSubtitle: '‡¶∏‡¶ï‡¶≤ ‡¶°‡ßã‡¶®‡¶æ‡¶∞',
        searchPlaceholder: '‡¶ú‡ßá‡¶≤‡¶æ/‡¶∂‡¶π‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®..',

        addPagePrompt: '‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶´‡ßã‡¶Å‡¶ü‡¶æ ‡¶Ü‡¶á‡¶ï‡¶®‡ßá ‡¶ö‡¶æ‡¶™ ‡¶¶‡¶ø‡¶®',
        addPageSubtitle: '‡¶®‡¶ø‡¶ú‡ßá ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡ßá‡¶∞ ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶®‡ßá ‡¶â‡ßé‡¶∏‡¶æ‡¶π‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®',
        profilePageTitle: '‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤',
        myDonorsTitle: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶°‡ßã‡¶®‡¶æ‡¶∞',
        emergencyPageTitle: '‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶™‡ßã‡¶∏‡ßç‡¶ü',
        noEmergencyPosts: '‡¶ï‡ßã‡¶®‡ßã ‡¶á‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶®‡ßá‡¶á‡•§',
        loginPromptBtn: '‡¶∞‡ßá‡¶ú‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
        refreshBtn: '‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®',
        contactHeader: '‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø',
        eligibleNow: 'Eligible Now',
        daysLeft: '‡¶¶‡¶ø‡¶® ‡¶¨‡¶æ‡¶ï‡¶ø',
        call: '‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®',
        callLocked: '‡¶ï‡¶≤ ‡¶≤‡¶ï‡¶°-‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶ï‡ßá‡¶®‡ßã?',
        noPhone: '‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶®‡ßá‡¶á',
        lastDonate: '‡¶∂‡ßá‡¶∑ ‡¶¶‡¶æ‡¶®',
        edit: '‡¶è‡¶°‡¶ø‡¶ü',
        delete: '‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®',
        firstTime: '‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞' // ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§
    },
    en: {
        brandSubtitle: 'Blood Assistance',
        navEmergencyText: 'Urgent',
        navSearchText: 'Search',
        navHomeText: 'Home',
        navAddText: 'Add',
        navProfileText: 'Profile',
        navShopText: 'Shop',
        aboutMenuTitle: 'About Us',
        aboutMenuSubtitle: 'App functions and goals',
        guidelinesMenuTitle: 'Guidelines',
        guidelinesMenuSubtitle: 'Donor etiquette',
        themeMenuTitle: 'Change Theme',
        themeMenuSubtitle: 'Dark / Light Mode',
        languageMenuTitle: 'Change Language',
        languageMenuSubtitle: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ / English',
        logoutMenuTitle: 'Logout',
        logoutMenuSubtitle: 'Log out from the account',
        logoutModalTitle: 'Logout',
        logoutModalSubtitle: 'Why are you logging out? (Optional)',
        logoutCancelBtn: 'Cancel',
        logoutReasonPlaceholder: 'Enter your reason...',
        logoutBtnText: 'Logout',
        homePageTitle: 'Home',
        homePageSubtitle: 'All Donors',
        searchPlaceholder: 'Search With Zila or Towns Name..',
        
        addPagePrompt: 'Tap the Blood Drop icon below to add a new donor',
        addPageSubtitle: 'Donate yourself and encourage others',
        profilePageTitle: 'Profile',
        myDonorsTitle: 'Your Added Donors',
        emergencyPageTitle: 'Emergency Posts',
        noEmergencyPosts: 'No emergency posts found.',
        loginPromptBtn: 'Sign up',
        refreshBtn: 'Refresh',
        contactHeader: 'Support',
        eligibleNow: 'Eligible Now',
        daysLeft: 'Days Left',
        call: 'Call',
        callLocked: 'Call Locked-see why?',
        noPhone: 'No Phone',
        lastDonate: 'Last Donate',
        edit: 'Edit',
        delete: 'Delete',
        firstTime: 'First Time' // ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§
    }
};

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('lang', lang);
    const t = translations[lang];
    
    // Header/Footer Navigation
    document.getElementById('brandSubtitle').textContent = t.brandSubtitle;
    document.getElementById('navEmergencyText').textContent = t.navEmergencyText;
    document.getElementById('navSearchText').textContent = t.navSearchText;
    // ...
    document.getElementById('navHomeText').textContent = t.navHomeText;
    document.getElementById('navAddText').textContent = t.navAddText;
    document.getElementById('navProfileText').textContent = t.navProfileText;
    // ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§:
    document.getElementById('navShopText').textContent = t.navShopText; 
    
    // Menu
// ...

    
    // Menu
    document.getElementById('aboutMenuTitle').textContent = t.aboutMenuTitle;
    document.getElementById('aboutMenuSubtitle').textContent = t.aboutMenuSubtitle;
    document.getElementById('guidelinesMenuTitle').textContent = t.guidelinesMenuTitle;
    document.getElementById('guidelinesMenuSubtitle').textContent = t.guidelinesMenuSubtitle;
    document.getElementById('themeMenuTitle').textContent = t.themeMenuTitle;
    document.getElementById('themeMenuSubtitle').textContent = t.themeMenuSubtitle;
    document.getElementById('languageMenuTitle').textContent = t.languageMenuTitle;
    document.getElementById('languageMenuSubtitle').textContent = t.languageMenuSubtitle;
    document.getElementById('currentLang').textContent = lang === 'bn' ? '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ' : 'English';
    document.getElementById('logoutMenuTitle').textContent = t.logoutMenuTitle;
    document.getElementById('logoutMenuSubtitle').textContent = t.logoutMenuSubtitle;
    
    // Pages
    document.getElementById('homePageTitle').textContent = t.homePageTitle;
    document.getElementById('homePageSubtitle').textContent = t.homePageSubtitle;
    document.getElementById('searchInput').placeholder = t.searchPlaceholder;
document.getElementById('noSearch').innerHTML = `
<style>
/* 1. ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® - ‡¶´‡ßã‡¶Å‡¶ü‡¶æ‡¶ü‡¶ø ‡¶Ø‡ßá‡¶® ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶¶‡ßÅ‡¶≤‡¶õ‡ßá ‡¶¨‡¶æ ‡¶ï‡¶æ‡¶Å‡¶™‡¶õ‡ßá (‡¶Ø‡ßá‡¶Æ‡¶® ‡¶ï‡¶æ‡¶®‡ßç‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶π‡ßü) */
@keyframes weep {
    0% { transform: translateY(0); opacity: 1; }
    50% { transform: translateY(-3px) scale(1.02); opacity: 0.95; }
    100% { transform: translateY(0); opacity: 1; }
}




/* 4. ‡¶ö‡ßã‡¶ñ‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.eye {
    fill: #ffffff; /* ‡¶∏‡¶æ‡¶¶‡¶æ ‡¶ö‡ßã‡¶ñ */
}
.pupil {
    fill: #000000; /* ‡¶ï‡¶æ‡¶≤‡ßã ‡¶§‡¶æ‡¶∞‡¶æ */
}

/* 5. ‡¶Æ‡ßÅ‡¶ñ‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.mouth {
    fill: none; /* ‡¶Æ‡ßÅ‡¶ñ ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶ï ‡¶π‡¶¨‡ßá */
    stroke: #ffffff; /* ‡¶∏‡¶æ‡¶¶‡¶æ ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶ï */
    stroke-width: 3;
    stroke-linecap: round;
    stroke-linejoin: round;
}

/* 6. ‡¶õ‡ßã‡¶ü ‡¶ü‡¶ø‡ßü‡¶æ‡¶∞‡¶°‡ßç‡¶∞‡¶™ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï, ‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶ö‡¶æ‡¶®) */
.teardrop {
    fill: #4da6ff; /* ‡¶ú‡¶≤‡ßá‡¶∞ ‡¶∞‡¶ô */
    opacity: 0.7;
    transform-origin: 50% 50%;
    animation: dropFall 1s ease-out infinite;
}

@keyframes dropFall {
    0% { transform: translateY(0); opacity: 0.8; }
    100% { transform: translateY(40px); opacity: 0; } /* ‡¶®‡¶ø‡¶ö‡ßá ‡¶™‡¶°‡¶º‡ßá ‡¶Æ‡¶ø‡¶≤‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ */
}

/* 7. ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.blood-drop text {
    user-select: none;
}

.text b {
    color: #E50914; /* '‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶' ‡¶∂‡¶¨‡ßç‡¶¶‡¶ü‡¶ø‡¶ï‡ßá ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶∞‡¶ô‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Æ‡¶ø‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã */
}
</style>

<div class="no-search-wrapper">
    <svg class="blood-drop" viewBox="0 0 100 120">
        <path d="M50 0 C25 0 0 25 0 50 C0 75 25 100 50 100 C75 100 100 75 100 50 C100 25 75 0 50 0 Z"
              fill="#E50914"/>

        <circle class="eye" cx="35" cy="40" r="8"/>
        <circle class="pupil" cx="37" cy="42" r="3"/>

        <circle class="eye" cx="65" cy="40" r="8"/>
        <circle class="pupil" cx="63" cy="42" r="3"/>

        <path class="mouth" d="M35 70 Q50 60 65 70"/>
        
        <circle class="teardrop" cx="30" cy="50" r="3" />
        <circle class="teardrop" cx="70" cy="50" r="3" />


    </svg>
</div>
<p class="text" style="text-align:center;">‡¶è‡¶á ‡¶∏‡ßç‡¶•‡¶æ‡¶®‡ßá‡¶∞/‡¶è‡¶á ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡ßá‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Ü‡¶™‡¶æ‡¶§‡¶§ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶ø‡¶ï‡¶ü ‡¶®‡ßá‡¶á,‡¶§‡¶¨‡ßá ‡¶ñ‡ßÅ‡¶¨ ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶ø‡¶á ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§‡¶™‡¶æ‡¶∂‡ßá ‡¶•‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø <b>‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶</b></p>
`;
    document.getElementById('addPagePrompt').textContent = t.addPagePrompt;
    document.getElementById('addPageSubtitle').textContent = t.addPageSubtitle;
    document.getElementById('profilePageTitle').textContent = t.profilePageTitle;
    document.getElementById('myDonorsTitle').textContent = t.myDonorsTitle;
    document.getElementById('noMyDonors').textContent = t.noMyDonors;
    document.getElementById('emergencyPageTitle').textContent = t.emergencyPageTitle;
    document.getElementById('noEmergencyPosts').textContent = t.noEmergencyPosts;
    document.getElementById('loginPromptText').textContent = t.loginPromptText;
    document.getElementById('loginPromptBtn').textContent = t.loginPromptBtn;
    document.getElementById('refreshBtn').textContent = t.refreshBtn;
    document.getElementById('contactHeader').textContent = t.contactHeader;

    // Logout Modal
    document.getElementById('logoutModalTitle').textContent = t.logoutModalTitle;
    document.getElementById('logoutModalSubtitle').textContent = t.logoutModalSubtitle;
    document.getElementById('logoutReasonInput').placeholder = t.logoutReasonPlaceholder;
    document.getElementById('logoutCancelBtn').textContent = t.logoutCancelBtn;
    document.getElementById('logoutReasonSubmit').textContent = t.logoutBtnText;

    // Re-render dynamic content (donor cards, etc.)
    renderAll();
}

function setAppTheme(theme) {
    currentTheme = theme;
    localStorage.setItem('theme', theme);
    document.body.classList.remove('dark-mode', 'light-mode');
    document.body.classList.add(theme + '-mode');
    currentThemeSpan.textContent = theme === 'dark' ? 'Dark' : 'Light';
}

// Initial setup
setAppTheme(currentTheme);
setLanguage(currentLang);

// Menu Handlers
themeChangeBtn.addEventListener('click', () => {
    closeMenuFunc();
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    setAppTheme(newTheme);
});

languageChangeBtn.addEventListener('click', () => {
    closeMenuFunc();
    const newLang = currentLang === 'bn' ? 'en' : 'bn';
    setLanguage(newLang);
});

function fmtDate(d){ const dt = new Date(d); if(isNaN(dt)) return "-"; return dt.toLocaleDateString(); }
function daysBetween(a,b){ return Math.ceil((a - b)/(1000*60*60*24)); } 
function uidInitials(name){ if(!name) return "?"; return name.trim().split(" ").map(s=>s[0]?.toUpperCase()).slice(0,2).join(""); }
function escapeHtml(unsafe) {
  if (unsafe === undefined || unsafe === null) return '';
  return String(unsafe)
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;")
    .replace(/"/g, "&quot;")
    .replace(/'/g, "&#039;");
}
function formatInputDate(iso){ if(!iso) return ''; const d = new Date(iso); const y = d.getFullYear(); const m = String(d.getMonth()+1).padStart(2,'0'); const day = String(d.getDate()).padStart(2,'0'); return `${y}-${m}-${day}`; }
function renderStars(rating){
  let stars = '';
  const roundedRating = Math.round(rating * 2) / 2; // Round to nearest 0.5
  for(let i=1; i<=5; i++){
    const color = i <= roundedRating ? '#f5b041' : (i - 0.5 === roundedRating ? 'linear-gradient(to right, #f5b041 50%, var(--muted) 50%)' : 'var(--muted)');
    
    if (i - 0.5 === roundedRating) {
        // Half star placeholder. A real implementation would use a better icon/method.
        stars += `<span class="rating-star" style="color: #f5b041; position:relative;">
                    ‚òÖ
                    <span style="position:absolute; left:0; overflow:hidden; width:50%; color:var(--muted);">‚òÖ</span>
                  </span>`;
    } else {
        stars += `<span class="rating-star" style="color: ${i <= roundedRating ? '#f5b041' : 'var(--muted)'}">‚òÖ</span>`;
    }
  }
  return stars;
}
function openModal(html){ modalContent.innerHTML = html; modalBackdrop.classList.add('visible'); modalBackdrop.setAttribute('aria-hidden','false'); }
function closeModal(){ modalBackdrop.classList.remove('visible'); modalBackdrop.setAttribute('aria-hidden','true'); }
modalBackdrop.addEventListener('click', (e)=> { if(e.target === modalBackdrop) closeModal(); });
menuBtn.addEventListener('click', ()=> {
  menuOverlay.classList.add('visible');
  menuOverlay.setAttribute('aria-hidden','false');
});
closeMenu.addEventListener('click', ()=> {
  menuOverlay.classList.remove('visible');
  menuOverlay.setAttribute('aria-hidden','true');
});
function closeMenuFunc(){ menuOverlay.classList.remove('visible'); menuOverlay.setAttribute('aria-hidden','true'); }
function setActivePage(name){
  const currentActivePage = document.querySelector('.page.active');
  const nextActivePage = pages[name];
  if (currentActivePage === nextActivePage) {
      return;
  }
  if (currentActivePage) {
      currentActivePage.classList.remove('active');
      setTimeout(() => {
          currentActivePage.style.display = 'none';
      }, 400);
  }
  nextActivePage.style.display = 'block';
  setTimeout(() => {
      nextActivePage.classList.add('active');
  }, 10);
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  if(name === 'home') navHome.classList.add('active');
  if(name === 'search') navSearch.classList.add('active');
  // ...
  if(name === 'add') navAdd.classList.add('active');
  if(name === 'profile') navProfile.classList.add('active');
  if(name === 'emergency') navEmergency.classList.add('active');
  // ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§:
  if(name === 'shop') navShop.classList.add('active'); 
}

navHome.addEventListener('click', () => setActivePage('home'));

// **********************************
// ‚ú® ‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶ø‡¶§: Search ‡¶™‡ßá‡¶ú-‡¶è ‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡¶ó‡¶á‡¶® ‡¶ö‡ßá‡¶ï ‡¶®‡ßá‡¶á
// **********************************
navSearch.addEventListener('click', () => {
    setActivePage('search');
});
// **********************************

navAdd.addEventListener('click', () => {
    if (currentUser) {
        setActivePage('add');
    } else {
        openAuthModal('register');
    }
});
navEmergency.addEventListener('click', () => {
    setActivePage('emergency');
});
navProfile.addEventListener('click', () => {
    if (currentUser) {
        setActivePage('profile');
    } else {
        openAuthModal('login');
    }
});

// ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§: Shop Navigation
navShop.addEventListener('click', () => {
    // ‡¶è‡¶á ‡¶∏‡ßá‡¶ï‡¶∂‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡¶ó‡¶á‡¶® ‡¶ö‡ßá‡¶ï ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá, ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø setActivePage ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã‡•§
    setActivePage('shop'); 
});

setTimeout(()=> {
  loadingScreen.style.opacity = 0;
  setTimeout(()=> { loadingScreen.style.display='none'; app.style.display='block'; app.setAttribute('aria-hidden','false'); }, 220);
}, 3000);

firebase.auth().onAuthStateChanged(user => {
  if (user) {
    currentUser = { uid: user.uid, email: user.email, displayName: user.displayName || user.email };
    userBadge.style.display = 'inline-block';
    userBadge.textContent = currentUser.displayName || currentUser.email;
    logoutBtn.style.display = 'flex';
    profileIconContainer.innerHTML = `<div style="width:20px;height:20px;border-radius:50%;background:var(--accent);color:var(--white);font-size:11px;display:flex;align-items:center;justify-content:center;font-weight:700;">${uidInitials(currentUser.displayName)}</div>`;

    const userRef = firebase.database().ref(`users/${currentUser.uid}`);
    userRef.once('value').then(snapshot => {
      const userData = snapshot.val();
      const loginCount = userData?.loginCount || 0;
      const appRated = userData?.appRated || false;
      const showRatingAfter = userData?.showRatingAfter || 0;
      const now = Date.now();

      if (!appRated && (loginCount >= 3 || now > showRatingAfter)) {
        openAppRatingModal();
        userRef.update({ 
          loginCount: loginCount + 1,
          showRatingAfter: now + 7 * 24 * 60 * 60 * 1000 
        });
      } else if (!appRated && loginCount < 3) {
        userRef.update({ loginCount: loginCount + 1 });
      }
    });

  } else {
    currentUser = null;
    userBadge.style.display = 'none';
    logoutBtn.style.display = 'none';
    profileIconContainer.innerHTML = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"></path></svg>`;
  }
  loadAndRenderDonors();
});
donorsRef.on('value', snapshot => {
  donors = snapshot.val() || {};
  renderAll();
});
usersRef.on('value', snapshot => {
  users = snapshot.val() || {};
  renderAll();
});
async function addEmergencyPost(post) {
  if (!currentUser) return alert('‡¶è‡¶á ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
  const postId = 'em_' + Date.now();
  const newPostData = {
    ...post,
    user: currentUser.uid,
    timestamp: firebase.database.ServerValue.TIMESTAMP,
    expiresAt: Date.now() + 24 * 60 * 60 * 1000
  };
  await emergencyRef.child(postId).set(newPostData);
}
async function updateEmergencyPost(postId, post) {
    if (!currentUser) return alert('‡¶è‡¶á ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
    const existingPost = allEmergencyPosts[postId];
    if (!existingPost || existingPost.user !== currentUser.uid) {
        alert('‡¶è‡¶á ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡¶ü‡¶ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶®‡ßá‡¶á‡•§');
        return;
    }
    await emergencyRef.child(postId).update({
        ...post,
        timestamp: firebase.database.ServerValue.TIMESTAMP,
    });
}
async function deleteEmergencyPost(postId) {
  if (!currentUser) return alert('‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
  const post = allEmergencyPosts[postId];
  if (!post || post.user !== currentUser.uid) {
    alert('‡¶è‡¶á ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶®‡ßá‡¶á‡•§');
    return;
  }
  if (!confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶á‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) return;
  await emergencyRef.child(postId).remove();
  alert('‡¶á‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§');
}
emergencyRef.on('value', snapshot => {
  const postsData = snapshot.val() || {};
  allEmergencyPosts = {};
  let hasActivePosts = false;
  
  for(const id in postsData) {
      if(postsData[id].expiresAt > Date.now()) {
          allEmergencyPosts[id] = postsData[id];
          hasActivePosts = true;
      } else {
          emergencyRef.child(id).remove();
      }
  }
  if (hasActivePosts) {
      navEmergency.classList.add('has-emergency');
  } else {
      navEmergency.classList.remove('has-emergency');
  }
  renderAll();
});

function openEmergencyPostModal(postId = null) {
  if (!currentUser) {
    openAuthModal('login');
    return;
  }
  
  const isEdit = postId !== null;
  const payload = isEdit && allEmergencyPosts[postId] ? allEmergencyPosts[postId] : {};
  openModal(`
    <div class="auth-form-container">
      <h3 style="text-align:Center;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" 
     viewBox="0 0 24 24" fill="none" stroke="currentColor" 
     stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
     class="feather feather-alert">
  <path d="M12 2v4"></path>
  <path d="M5.22 5.22l2.83 2.83"></path>
  <path d="M2 12h4"></path>
  <path d="M20 12h4"></path>
  <path d="M18.78 5.22l-2.83 2.83"></path>
  <path d="M12 8a4 4 0 0 0-4 4v4H8a2 2 0 0 0-2 2v2h12v-2a2 2 0 0 0-2-2h0v-4a4 4 0 0 0-4-4z"></path>
</svg> ‡¶á‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü</h3>
      <p class="muted" style="text-align: center;">‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡¶ü‡¶ø‡¶∞ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶†‡¶ø‡¶ï ‡¶è‡¶¨‡¶Ç ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡ßÅ‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®‡•§</p>
      
      <div class="input-group">
        <label>‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™</label>
        <select id="emBlood"style="background:#4ca9; opacity:70%; color:#000;">
          <option value="A+" ${payload.blood === 'A+' ? 'selected' : ''}>A+</option>
          <option value="A-" ${payload.blood === 'A-' ? 'selected' : ''}>A-</option>
          <option value="B+" ${payload.blood === 'B+' ? 'selected' : ''}>B+</option>
          <option value="B-" ${payload.blood === 'B-' ? 'selected' : ''}>B-</option>
          <option value="O+" ${payload.blood === 'O+' ? 'selected' : ''}>O+</option>
          <option value="O-" ${payload.blood === 'O-' ? 'selected' : ''}>O-</option>
          <option value="AB+" ${payload.blood === 'AB+' ? 'selected' : ''}>AB+</option>
          <option value="AB-" ${payload.blood === 'AB-' ? 'selected' : ''}>AB-</option>
        </select>
      </div>
      
      <div class="input-group">
        <label>‡¶∞‡ßã‡¶ó‡ßÄ‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
        <input id="emPatientName" type="text" value="${escapeHtml(payload.patientName || '')}" placeholder="‡¶∞‡ßã‡¶ó‡ßÄ‡¶∞ ‡¶®‡¶æ‡¶Æ"style="background:#4ca9; opacity:70%; color:#000;"/>
      </div>
      
      <div class="input-group">
        <label>‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ / ‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
        <input id="emPatientAddress" type="text" value="${escapeHtml(payload.patientAddress || payload.location || '')}" placeholder="‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶∞‡¶ï‡ßç‡¶§ ‡¶≤‡¶æ‡¶ó‡¶¨‡ßá, ‡¶§‡¶æ‡¶∞ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ"style="background:#4ca9; opacity:70%; color:#000;"/>
      </div>
      <div class="input-group">
        <label>‡¶∞‡ßã‡¶ó‡ßÄ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶ì ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®</label>
        <textarea id="emDetails" rows="3" placeholder="‡¶ï‡ßã‡¶•‡¶æ‡ßü, ‡¶ï‡¶ñ‡¶®, ‡¶ï‡¶§‡¶ü‡ßÅ‡¶ï‡ßÅ ‡¶∞‡¶ï‡ßç‡¶§ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®, ‡¶∞‡ßã‡¶ó‡ßÄ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø"style="background:#4ca9; opacity:70%; color:#000;">${escapeHtml(payload.details || '')}</textarea>
      </div>
      <div class="input-group">
        <label>‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</label>
        <input id="emPhone" type="tel" value="${escapeHtml(payload.phone || '')}" placeholder="‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞"style="background:#4ca9; opacity:70%; color:#000;"/>
      </div>
      <div class="btn-group" style="justify-content:flex-end;">
        <button class="btn ghost" onclick="closeModal()" style="width:20%;background:#000; color:#fff;">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
        <button class="btn primary" id="postEmergencyBtn" style="width:80%;">${isEdit ? '‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®' : '‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®'}</button>
      </div>
    </div>
  `);
  setTimeout(() => {
    document.getElementById('postEmergencyBtn').onclick = async () => {
      const newPayload = {
        blood: document.getElementById('emBlood').value,
        patientName: document.getElementById('emPatientName').value.trim(),
        // üåü ‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶ø‡¶§ ‡¶Ö‡¶Ç‡¶∂: ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
        patientAddress: document.getElementById('emPatientAddress').value.trim(), 
        details: document.getElementById('emDetails').value.trim(),
        phone: document.getElementById('emPhone').value.trim(),
      };
      if (!newPayload.blood || !newPayload.details || !newPayload.phone) {
        alert('‡¶∏‡¶ï‡¶≤ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï‡•§');
        return;
      }
      try {
        if(isEdit) {
            await updateEmergencyPost(postId, newPayload);
            alert('‡¶á‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
        } else {
            await addEmergencyPost(newPayload);
            alert('‡¶á‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
        }
        closeModal();
      } catch (e) {
        alert('‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá: ' + (e.message || e));
      }
    };
  }, 50);
}

async function registerUser(name,email,password){
  const cred = await firebase.auth().createUserWithEmailAndPassword(email,password);
  await cred.user.updateProfile({ displayName: name });
  await firebase.database().ref('users/' + cred.user.uid).set({ name, email, joined: Date.now(), loginCount: 0 });
  return cred.user;
}
async function loginUser(email,password){
  const u = await firebase.auth().signInWithEmailAndPassword(email,password);
  return u.user;
}
async function logoutUser(){
  await firebase.auth().signOut();
}
async function addDonor(donor){
  const id = donor.id || ('d_' + Date.now() + '_' + Math.floor(Math.random()*9999));
  donor.id = id; donor.owner = currentUser ? currentUser.uid : null; donor.createdAt = donor.createdAt || Date.now();
  await firebase.database().ref('donors/' + id).set(donor);
}
async function updateDonor(id,payload){
  await firebase.database().ref('donors/' + id).update(payload);
}
async function deleteDonor(id){
  if(!confirm('‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) return;
  await firebase.database().ref('donors/' + id).remove();
}
function openRatingModal(donorId){
  if(!currentUser){
    openAuthModal('register');
    return;
  }

  const d = donors[donorId];
  if(!d) return;

  const userRatings = Object.values(d.ratings || {}).filter(r => r.rater === currentUser.uid);
  if(userRatings.length > 0){
    openModal(`
      <h3>You've Already Rated</h3>
      <p class="muted">‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶è‡¶á ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡¶ï‡ßá ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶¶‡¶ø‡ßü‡ßá‡¶õ‡•§ ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§</p>
      <div style="margin-top:12px;text-align:center">
        ${renderStars(userRatings[0].rating)}
      </div>
      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px">
        <button class="btn ghost" onclick="closeModal()">Close</button>
      </div>
    `);
    return;
  }

  openModal(`
    <h3>Rate ${escapeHtml(d.name)}</h3>
    <div style="margin-top:12px;text-align:center">
      <div id="ratingStars" class="ratings" style="font-size:36px;cursor:pointer;">
        <span data-rating="1">‚òÖ</span><span data-rating="2">‚òÖ</span><span data-rating="3">‚òÖ</span>
        <span data-rating="4">‚òÖ</span><span data-rating="5">‚òÖ</span>
      </div>
    </div>
    <div style="margin-top:16px;">
      <label class="muted small">Your feedback (optional)</label>
      <textarea id="ratingComment" rows="3" style="width:100%;border-radius:8px;padding:8px;border:1px solid var(--glass-border);background:var(--bg);color:var(--text-color)"></textarea>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
      <div style="display:flex;gap:8px;margin-left:auto">
        <button class="btn ghost" onclick="closeModal()">Cancel</button>
        <button class="btn primary" id="submitRatingBtn">Submit Rating</button>
      </div>
    </div>
  `);

  // ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶è‡¶∞‡¶ø‡ßü‡¶æ ‡¶•‡¶ø‡¶Æ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ
  const ratingCommentTextarea = document.getElementById('ratingComment');
  if (currentTheme === 'light') {
    ratingCommentTextarea.style.background = '#f8fafc';
    ratingCommentTextarea.style.border = '1px solid rgba(0,0,0,0.15)';
    ratingCommentTextarea.style.color = '#111';
  } else {
    ratingCommentTextarea.style.background = 'var(--bg)';
    ratingCommentTextarea.style.border = '1px solid var(--glass-border)';
    ratingCommentTextarea.style.color = '#f0f0f0';
  }

  const starsContainer = document.getElementById('ratingStars');
  let selectedRating = 0;

  // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶á‡¶®‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü
  Array.from(starsContainer.children).forEach(star => {
    star.style.color = currentTheme === 'light' ? '#000' : '#fff';
  });

  // ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®: ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
  function getStarColor(isFilled){
    if(isFilled) return '#FFD700'; // ‡¶´‡¶ø‡¶≤‡ßç‡¶°‡ßá‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ó‡ßã‡¶≤‡ßç‡¶°
    return currentTheme === 'light' ? '#000' : '#fff'; // ‡¶á‡¶®‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞
  }

  function updateStars(rating){
    Array.from(starsContainer.children).forEach(star => {
      const starRating = parseInt(star.dataset.rating);
      star.style.color = starRating <= rating ? getStarColor(true) : getStarColor(false);
    });
  }

  // ‡¶π‡ßã‡¶≠‡¶æ‡¶∞ ‡¶á‡¶´‡ßá‡¶ï‡ßç‡¶ü
  starsContainer.addEventListener('mouseover', (e) => {
    if(e.target.tagName === 'SPAN'){
      const rating = parseInt(e.target.dataset.rating);
      updateStars(rating);
    }
  });
  starsContainer.addEventListener('mouseout', () => {
    updateStars(selectedRating);
  });
  starsContainer.addEventListener('click', (e) => {
    if(e.target.tagName === 'SPAN'){
      selectedRating = parseInt(e.target.dataset.rating);
      updateStars(selectedRating);
    }
  });

  // ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç
  document.getElementById('submitRatingBtn').addEventListener('click', async () => {
    if(selectedRating === 0){
      alert('‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶¶‡¶ø‡¶®!');
      return;
    }
    const comment = document.getElementById('ratingComment').value.trim();
    try {
      await firebase.database().ref(`donors/${donorId}/ratings`).push({
        rating: selectedRating,
        comment: comment,
        rater: currentUser.uid,
        timestamp: Date.now()
      });
      alert('‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
      closeModal();
    } catch (error) {
      alert('‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶¶‡¶ø‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá: ' + error.message);
    }
  });
}
function calculateAverageRating(donor){
  if(!donor.ratings) return { avg: 0, count: 0 };
  const ratings = Object.values(donor.ratings);
  const sum = ratings.reduce((acc, curr) => acc + (curr.rating || 0), 0);
  const avg = ratings.length > 0 ? (sum / ratings.length) : 0;
  return { avg: avg.toFixed(1), count: ratings.length };
}
function animateBloodGroup(donorId) {
  // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶è‡¶ñ‡¶® SVG Path ‡¶è‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá
  const containerEl = document.querySelector(`#donorBloodContainer-${donorId}`);
  if (containerEl) containerEl.classList.add('animated', 'blood-pulse'); 
}

function animateAvatar(donorId) {
  const avatarEl = document.querySelector(`#donorAvatar-${donorId}`);
  if (avatarEl) avatarEl.classList.add('animated');
}

function openDonorDetailsModal(donorId) {
  const d = donors[donorId];
  if (!d) return;

  const { avg, count } = calculateAverageRating(d);
  const ratingsList = d.ratings ? Object.values(d.ratings) : [];
  
  // ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø HTML ‡¶Ö‡¶Ç‡¶∂ ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§...

  const reviewsHtml = ratingsList.map(r => {
    const raterName = users[r.rater] ? users[r.rater].name : 'Anonymous';
    return `
      <div class="review-card">
        <div class="review-header">
          <div>${renderStars(r.rating)}</div>
          <div class="review-meta">${escapeHtml(raterName)}</div>
        </div>
        <div class="muted" style="margin-top:6px">${escapeHtml(r.comment || '‚ô°')}</div>
      </div>
    `;
  }).join('');

  const addedDateStr = d.createdAt ? fmtDate(new Date(d.createdAt)) : 'N/A';
  
  const buttonTextColor = currentTheme === 'light' ? 'var(--text-color)' : 'white';
  const svgFillColor = currentTheme === 'light' ? 'var(--text-color)' : 'white';
  
  // ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï SVG ‡¶Ü‡¶á‡¶ï‡¶® ‡¶¨‡¶æ‡¶ü‡¶® HTML
  const facebookButtonHtml = d.facebook ? `
    <a href="${escapeHtml(d.facebook)}" target="_blank" rel="noopener noreferrer" style="
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 8px;
      width: 100%; 
      border-radius: 4px;
      background-color: var(--primary-color); 
      color: ${buttonTextColor}; 
      text-decoration: none;
      font-weight: bold;
      font-size: 15px;
    ">
      <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:1em;height:1em;fill:${svgFillColor};"> 
        <path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.65 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.57-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.42 19.12-40.42 38.73V256h68.79l-11 71.69h-57.79V501.65C413.31 482.65 504 379.78 504 256z"/>
      </svg>
      Facebook Profile
    </a>
  ` : '';
  
  // **‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: Reviews ‡¶∏‡ßá‡¶ï‡¶∂‡¶®‡ßá‡¶∞ HTML ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã**
  const reviewsSectionHtml = `
    <div style="margin-top:10px;">
      <h4 style="margin:0; cursor: pointer; display: flex; align-items: center; gap: 4px; font-size: 16px; color: var(--text-color);" 
          onclick="
            const content = document.getElementById('reviewsContent-${d.id}');
            const chevron = document.getElementById('reviewsChevron-${d.id}');
            if (content.style.display === 'none') {
              content.style.display = 'block';
              chevron.style.transform = 'rotate(180deg)';
            } else {
              content.style.display = 'none';
              chevron.style.transform = 'rotate(0deg)';
            }
          ">
        Reviews
        <i id="reviewsChevron-${d.id}" class="fas fa-chevron-down" style="font-size: 0.8em; transition: transform 0.3s; color: var(--text-color);"></i>
      </h4>
      <div id="reviewsContent-${d.id}" style="margin-top:8px; max-height: 200px; overflow-y: auto; padding-right: 5px; display: none;">
        ${reviewsHtml || '<div class="muted">‡¶ï‡ßã‡¶®‡ßã ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶®‡ßá‡¶á‡•§</div>'}
      </div>
    </div>
  `;

  openModal(`
    <div class="auth-form-container" style="padding: 15px; color: var(--text-color);">
      
      <div style="display:flex; gap:15px; align-items:flex-start;">
          
          <div class="avatar" id="donorAvatar-${d.id}" style="width: 80px; height: 80px; font-size: 28px; flex-shrink: 0; background-color: var(--primary-color);">
            ${uidInitials(d.name)}
          </div>
          
          <div style="flex-grow: 1; min-height: 80px; background-color: var(--secondary-bg); padding: 8px; border-radius: 4px;">
              <h3 style="margin:0; font-size: 18px; color: var(--text-color);">${escapeHtml(d.name)} ‚ô° </h3>
              <div class="meta">${escapeHtml(d.location || 'Location: N/A')}</div>
              <div class="muted small" style="margin-top: 4px;">
                Last Donate: ${d.lastDonateDate ? fmtDate(d.lastDonateDate) : 'First Time'}<br>
                Added: ${addedDateStr}
              </div>
          </div>
      </div>
      
      <div style="margin-top: 10px; min-height: 40px; border-radius: 4px;">
        ${facebookButtonHtml}
      </div>

      <div style="display:flex; justify-content: space-between; align-items: center; margin-top: 15px;">
          
          <div style="flex-shrink: 0;">
              <div style="margin-bottom: 5px;">
                  <div style="font-size: 14px; color: var(--text-color);">Overall Review: ${avg}/5</div>
                  <div class="ratings">${renderStars(avg)}</div>
              </div>
              ${reviewsSectionHtml}
          </div>
          
          <div id="donorBloodContainer-${d.id}" style="flex-shrink: 0; position: relative; width: 100px; height: 100px; margin-left: 15px;">
              <svg viewBox="0 0 24 24" style="width: 100%; height: 100%;">
                <path fill="red" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.11C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
              </svg>
              <div id="donorBloodGroup-${d.id}" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-weight: bold; font-size: 26px;">
                  ${escapeHtml(d.blood || 'N/A')}
              </div>
          </div>
      </div>

      <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:20px">
        <button class="btn ghost" onclick="closeModal()">Cancel</button>
        <button class="btn primary" onclick="openRatingModal('${d.id}')">Rate This Donor</button>
      </div>
    </div>
  `);

  // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶ö‡¶æ‡¶≤‡¶æ‡¶®‡ßã
  animateAvatar(d.id);
  animateBloodGroup(d.id);
}

function renderAll(){
  renderDonorsGrid();
  renderSearchGrid();
  renderMyDonors();
  renderProfile();
  renderEmergencyPosts();
}

// **********************************
// ‚ú® ‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶ø‡¶§: renderDonorsGrid - ‡¶≤‡¶ó‡¶á‡¶® ‡¶ö‡ßá‡¶ï ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá
// **********************************
function renderDonorsGrid(){
    donorsGrid.innerHTML = '';
    
    // ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ (‡¶≤‡¶ó‡¶á‡¶® ‡¶ö‡ßá‡¶ï ‡¶õ‡¶æ‡ßú‡¶æ‡¶á)
    donorsLoginPrompt.style.display = 'none'; // ‡¶≤‡¶ó‡¶á‡¶® ‡¶™‡ßç‡¶∞‡¶Æ‡ßç‡¶™‡¶ü ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã ‡¶π‡¶≤‡ßã
        
    const arr = Object.values(donors || {}).sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0));
        
    if (arr.length === 0) {
        // ‡¶°‡ßá‡¶ü‡¶æ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá, ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶™‡ßç‡¶∞‡¶Æ‡ßç‡¶™‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá
        donorsRefreshPrompt.style.display = 'block';
        noData.textContent = translations[currentLang].noSearchResult;
        noData.style.display = 'block';
    } else {
        donorsRefreshPrompt.style.display = 'none';
        noData.style.display = 'none';
            
        // Render the latest emergency post at the top
        const latestEmergencyPost = Object.values(allEmergencyPosts).sort((a,b)=>b.timestamp - a.timestamp)[0];
        if (latestEmergencyPost) {
            const postEl = document.createElement('div');
            postEl.className = 'emergency-card';
            postEl.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <h3 style="margin: 0; color: white;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" 
     viewBox="0 0 24 24" fill="none" stroke="currentColor" 
     stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
     class="feather feather-alert">
  <path d="M12 2v4"></path>
  <path d="M5.22 5.22l2.83 2.83"></path>
  <path d="M2 12h4"></path>
  <path d="M20 12h4"></path>
  <path d="M18.78 5.22l-2.83 2.83"></path>
  <path d="M12 8a4 4 0 0 0-4 4v4H8a2 2 0 0 0-2 2v2h12v-2a2 2 0 0 0-2-2h0v-4a4 4 0 0 0-4-4z"></path>
</svg> ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®!</h3>
                    <div class="blood-group-large">${latestEmergencyPost.blood}</div>
                </div>
                <p style="margin: 0; font-size: 16px;">
                    <span style="font-weight: 600;">‡¶∞‡ßã‡¶ó‡ßÄ:</span> ${escapeHtml(latestEmergencyPost.patientName)}<br>
                    <span style="font-weight: 600;">‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:</span> ${escapeHtml(latestEmergencyPost.patientAddress || latestEmergencyPost.location || '‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡¶®‡¶ø')}<br>
                    <span style="font-weight: 600;">‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§:</span> ${escapeHtml(latestEmergencyPost.details)}
                </p>
                <div style="margin-top: 12px; display: flex; justify-content: space-between; align-items: center;">
                    <a href="tel:${encodeURIComponent(latestEmergencyPost.phone)}" class="btn ghost" style="color: white; border-color: rgba(255,255,255,0.4);">‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</a>
                    <div style="font-size: 12px; opacity: 0.7;">‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®: ${users[latestEmergencyPost.user] ? users[latestEmergencyPost.user].name : 'Unknown User'}</div>
                </div>
            `;
            donorsGrid.appendChild(postEl);
        }
            
        arr.forEach(d => donorsGrid.appendChild(renderCard(d)));
    }
}
// **********************************

// **********************************
// ‚ú® ‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶ø‡¶§: renderSearchGrid - ‡¶≤‡¶ó‡¶á‡¶® ‡¶ö‡ßá‡¶ï ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá
// **********************************
function renderSearchGrid(){
  const q = (searchInput && searchInput.value || '').trim().toLowerCase();
  searchGrid.querySelector('.grid').innerHTML = ''; // Clear the grid for search results
  
  // ‡¶è‡¶ñ‡¶® ‡¶≤‡¶ó‡¶á‡¶® ‡¶ö‡ßá‡¶ï ‡¶õ‡¶æ‡ßú‡¶æ‡¶á ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶π‡¶¨‡ßá
  
  const arr = Object.values(donors || {}).sort((a,b)=> (b.createdAt||0) - (a.createdAt||0));
  const filtered = arr.filter(d=>{
    if(!q) return true;
    return (d.name||'').toLowerCase().includes(q) || (d.location||'').toLowerCase().includes(q) || (d.blood||'').toLowerCase().includes(q) || (d.phone||'').toLowerCase().includes(q);
  });
  
  if(filtered.length===0) noSearch.style.display='block'; else noSearch.style.display='none';
  filtered.forEach(d => searchGrid.querySelector('.grid').appendChild(renderCard(d)));
}
// **********************************

function renderMyDonors(){
  myDonorsGrid.innerHTML = '';
  const arr = Object.values(donors || {}).filter(d => d.owner === (currentUser && currentUser.uid)).sort((a,b)=> (b.createdAt||0) - (a.createdAt||0));
  if(arr.length===0) noMyDonors.style.display='block'; else noMyDonors.style.display='none';
  arr.forEach(d => myDonorsGrid.appendChild(renderCard(d, false, true)));
}
function renderEmergencyPosts() {
    emergencyGrid.innerHTML = '';
    const posts = Object.entries(allEmergencyPosts).sort(([,a], [,b]) => b.timestamp - a.timestamp);
    if (posts.length === 0) {
        noEmergencyPosts.style.display = 'block';
    } else {
        noEmergencyPosts.style.display = 'none';
        posts.forEach(([postId, post]) => {
            const postEl = document.createElement('div');
            postEl.className = 'emergency-card';
            const isOwner = currentUser && post.user === currentUser.uid;
            postEl.innerHTML = `
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <h3 style="margin: 0; color: white;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" 
     viewBox="0 0 24 24" fill="none" stroke="currentColor" 
     stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
     class="feather feather-alert">
  <path d="M12 2v4"></path>
  <path d="M5.22 5.22l2.83 2.83"></path>
  <path d="M2 12h4"></path>
  <path d="M20 12h4"></path>
  <path d="M18.78 5.22l-2.83 2.83"></path>
  <path d="M12 8a4 4 0 0 0-4 4v4H8a2 2 0 0 0-2 2v2h12v-2a2 2 0 0 0-2-2h0v-4a4 4 0 0 0-4-4z"></path>
</svg> ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®!</h3>
                <div class="blood-group-large">${post.blood}</div>
              </div>
              <p style="margin: 0; font-size: 16px;">
                <span style="font-weight: 600;">‡¶∞‡ßã‡¶ó‡ßÄ:</span> ${escapeHtml(post.patientName)}<br>
                <span style="font-weight: 600;">‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:</span> ${escapeHtml(post.patientAddress || post.location || '‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡¶®‡¶ø')}<br>
                <span style="font-weight: 600;">‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§:</span> ${escapeHtml(post.details)}
              </p>
              <div style="margin-top: 12px; display: flex; justify-content: space-between; align-items: center;">
                <a href="tel:${encodeURIComponent(post.phone)}" class="btn ghost" style="color: white; border-color: rgba(255,255,255,0.4);">‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</a>
                <div style="font-size: 12px; opacity: 0.7;">‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®: ${users[post.user] ? users[post.user].name : 'Unknown User'}</div>
              </div>
              ${isOwner ? `
              <div style="display:flex; gap:8px; margin-top:12px">
                <button class="btn primary small" onclick="openEmergencyPostModal('${postId}')">${translations[currentLang].edit}</button>
                <button class="btn ghost small" onclick="deleteEmergencyPost('${postId}')">${translations[currentLang].delete}</button>
              </div>
              ` : ''}
            `;
            emergencyGrid.appendChild(postEl);
        });
    }
}
function renderProfile() {
    const container = document.getElementById('profileInfo');

    // Not logged in
    if (!currentUser) {
        container.innerHTML = `
        <div class="auth-form-container">
            <h3>Login / Register</h3>
            <p class="muted" style="text-align: center;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶™‡ßá‡¶§‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
            <div style="display:flex;gap:8px;margin-top:10px;justify-content:center;">
                <button class="btn primary" onclick="openAuthModal('register')">Register</button>
                <button class="btn ghost" onclick="openAuthModal('login')">Login</button>
            </div>
        </div>`;
        return;
    }

    const name = currentUser.displayName || currentUser.email || 'User';
    const email = currentUser.email || '';
    const phone = currentUser.phone || 'N/A';
    const bloodGroup = currentUser.bloodGroup || 'N/A';

    const userEmergencyPosts = Object.entries(allEmergencyPosts).filter(
        ([, post]) => post.user === currentUser.uid
    );

    const emergencyPostSection =
        userEmergencyPosts.length > 0
            ? `
        <div style="
            padding:14px;
            border:1px solid var(--glass-border);
            border-radius:12px;
            background:rgba(225,29,72,0.1);
            margin-top:16px;
        ">
            <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" 
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" 
                     stroke-linejoin="round" class="feather feather-alert" style="color:var(--accent);">
                    <path d="M12 2v4"></path>
                    <path d="M5.22 5.22l2.83 2.83"></path>
                    <path d="M2 12h4"></path>
                    <path d="M20 12h4"></path>
                    <path d="M18.78 5.22l-2.83 2.83"></path>
                    <path d="M12 8a4 4 0 0 0-4 4v4H8a2 2 0 0 0-2 2v2h12v-2a2 2 0 0 0-2-2h0v-4a4 4 0 0 0-4-4z"></path>
                </svg>
                <h4 style="margin:0;color:var(--accent);">
                    ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü (${userEmergencyPosts.length})
                </h4>
            </div>

            <p class="muted small" style="margin-top:2px;">
                ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶§‡ßá Emergency ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡ßá ‡¶Ø‡¶æ‡¶®‡•§
            </p>

            <button class="btn primary small" style="margin-top:8px;" onclick="setActivePage('emergency')">
                View Posts
            </button>
        </div>`
            : '';

    // Final HTML for Profile UI
    container.innerHTML = `
    <div class="profile-main-area">

        <div 
            style="
                height:160px;
                background-image:url('https://i.postimg.cc/3xYQSVKF/1763828387028.png');
                background-size:cover;
                background-position:center;
                border-radius:14px;
                position:relative;
                margin-bottom:-55px;
            "
        >
            <div style="
                position:absolute;
                top:10px;
                right:12px;
                background:rgba(0,0,0,0.35);
                color:#fff;
                padding:4px 10px;
                border-radius:6px;
                font-size:13px;
                font-weight:600;
            ">
                unlocked new feature
            </div>
        </div>

        <div style="
            padding:16px;
            background:var(--glass-bg);
            border-radius:14px;
            box-shadow:0 4px 12px rgba(0,0,0,0.07);
        ">

            <div style="display:flex;justify-content:space-between;align-items:flex-start;">

                <div style="position:relative;">
                    <div style="
                        width:95px;
                        height:95px;
                        border-radius:50%;
                        background:#071022;
                        border:4px solid var(--body-bg);
                        display:flex;
                        align-items:center;
                        justify-content:center;
                        font-size:32px;
                        font-weight:700;
                        color:var(--accent);
                        margin-top:-35px;
                        box-shadow:0 4px 12px rgba(0,0,0,0.15);
                    ">
                        ${uidInitials(name)}
                    ‚ô° </div>
                    <button onclick="openEditProfile('picture')" style="
                        position:absolute;
                        bottom:0;
                        right:0;
                        background:#071022;
                        color:#fff;
                        border:2px solid var(--body-bg);
                        border-radius:50%;
                        width:30px;
                        height:30px;
                        display:flex;
                        align-items:center;
                        justify-content:center;
                        padding:0;
                        cursor:pointer;
                    ">
                        <i class="fas fa-camera" style="font-size:14px;">üü¢</i>
                    </button>
                </div>

                </div>

            <div style="display:flex;align-items:center;gap:8px;margin:12px 0 2px 0;">
                <h3 style="margin:0;">${escapeHtml(name)}</h3>
                <button onclick="openEditProfile('name')" style="background:none;border:none;color:var(--accent);padding:0;cursor:pointer;">
                    <i class="fas fa-pencil-alt" style="font-size:16px;"></i>
                </button>
            </div>
            
            <div class="muted small">${escapeHtml(email)}</div>

       
                <button class="btn primary small" onclick="openEditProfile('details')" style="margin-top:15px;width:100%;">
                    Edit Profile
                </button>
            </div>

        </div>

        ${emergencyPostSection}

    `;
}
function renderCard(d, showCall=false, showEdit=false){
    const t = translations[currentLang];
    const el = document.createElement('div');
    el.className = 'card clickable';
    el.onclick = () => openDonorDetailsModal(d.id);

    const lastDate = d.lastDonateDate ? new Date(d.lastDonateDate) : null;
    const nextEligible = lastDate ? new Date(lastDate.getTime() + 1000 * 60 * 60 * 24 * 120) : null; 
    const now = new Date();
    const isEligible = d.willing && (!nextEligible || nextEligible <= now);
    
    let daysRemaining = 0;
    if (nextEligible && nextEligible > now) {
        daysRemaining = Math.ceil((nextEligible - now) / (1000*60*60*24));
    }
    
    const { avg, count } = calculateAverageRating(d);

    // ‡ßß. ‡¶ï‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶≤‡¶ï‡¶° ‡¶ï‡¶ø‡¶®‡¶æ ‡¶§‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
    // ‡¶Ø‡¶¶‡¶ø ‡¶´‡ßã‡¶® ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá OR ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶®‡¶ø‡¶ö‡ßç‡¶õ‡ßÅ‡¶ï OR ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø ‡¶®‡¶æ ‡¶π‡¶®, ‡¶§‡¶¨‡ßá ‡¶ï‡¶≤ ‡¶≤‡¶ï‡¶°
    const isCallLocked = !d.phone || !d.willing || !isEligible;

    let callButtonHTML = '';
    if (d.phone) {
        if (!d.willing) {
            callButtonHTML = `<button class="btn locked" onclick="event.stopPropagation(); showNotWillingModal('${escapeHtml(d.name)}')">üîí ${t.callLocked}</button>`;
        } else if (isEligible) {
            callButtonHTML = `<a href="tel:${encodeURIComponent(d.phone)}" class="btn ghost" style="display:inline-flex;align-items:center;gap:8px" onclick="event.stopPropagation()"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M6.62 10.79a15.053 15.053 0 006.59 6.59l2.2-2.2a1 1 0 011.11-.21c1.21.48 2.53.74 3.88.74a1 1 0 011 1v3.5a1 1 0 01-1 1C10.07 22 2 13.93 2 4a1 1 0 011-1h3.5a1 1 0 011 1c0 1.35.26 2.67.74 3.88a1 1 0 01-.21 1.11l-2.2 2.2z"/></svg>${t.call}</a>`;
        } else {
            callButtonHTML = `<button class="btn locked" onclick="event.stopPropagation(); showCountdownModal('${escapeHtml(d.name)}', ${daysRemaining})">üîí ${t.callLocked}</button>`;
        }
    } else {
        callButtonHTML = `<div class="btn locked" style="cursor: default; opacity: 1;">${t.noPhone}</div>`;
    }

    // ‡ß®. ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡¶ü‡¶ø‡¶ï‡ßá ‡¶∂‡¶∞‡ßç‡¶§‡¶∏‡¶æ‡¶™‡ßá‡¶ï‡ßç‡¶∑‡ßá ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
    let shareButtonHTML = '';
    if (!isCallLocked) {
        shareButtonHTML = `<button class="btn ghost small" style="padding: 6px 10px; font-size: 12px; border-color: var(--accent); color: var(--accent);" 
            onclick="event.stopPropagation(); shareDonorCard('${d.id}', '${escapeHtml(d.name)}')">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:4px; vertical-align:middle;"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg> Share
        </button>`;
    }

    const locationHTML = d.location
      ? `<a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(d.location)}" target="_blank" style="text-decoration:none;color:inherit;display:flex;align-items:center;gap:4px;" onclick="event.stopPropagation()"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5S10.62 6.5 12 6.5 14.5 7.62 14.5 9 13.38 11.5 12 11.5z"/></svg>${escapeHtml(d.location)}</a>`
      : '';

    el.innerHTML = `
        <div class="avatar">${uidInitials(d.name)}</div>
        <div class="card-body">
            <div class="name-row">
                <h4 style="margin:0">${escapeHtml(d.name || 'Unknown')}</h4>
                <div class="tag ${isEligible ? 'eligible' : 'not-eligible'}">
                    ${isEligible ? t.eligibleNow : daysRemaining > 0 ? `${daysRemaining} ${t.daysLeft}` : (!d.willing ? 'Not Willing' : t.firstTime)}
                </div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:4px;">
                <div class="meta">${locationHTML}</div>
                <div class="ratings">${renderStars(avg)} <span class="muted small">${avg}/5</span> (${count})</div>
            </div>
            <div style="display:flex;align-items:end;justify-content:space-between;margin-top:12px;gap:8px">
                <div>
                    <div class="blood-group">${escapeHtml(d.blood || 'N/A')}</div>
                    <div class="muted small" style="margin-bottom: 8px;">${t.lastDonate} : ${d.lastDonateDate ? fmtDate(d.lastDonateDate) : t.firstTime}</div>
                    ${shareButtonHTML} </div>
                <div style="display:flex;flex-direction:column;gap:8px;align-items:flex-end">
                    ${callButtonHTML}
                    ${showEdit && currentUser && d.owner===currentUser.uid 
                        ? `<div style="display:flex;gap:8px">
                             <button class="btn primary small" onclick="event.stopPropagation(); openEditDonor('${d.id}')">${t.edit}</button>
                             <button class="btn ghost small" onclick="event.stopPropagation(); deleteDonor('${d.id}')">${t.delete}</button>
                           </div>` 
                        : ''}
                </div>
            </div>
        </div>
    `;
    return el;
}

// ‡ßß. ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
function shareDonorCard(id, name) {
    const baseUrl = window.location.href.split('?')[0];
    const shareUrl = `${baseUrl}?share=${id}`;

    // ‡¶™‡ßá‡¶∂‡¶æ‡¶¶‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶§‡¶•‡ßç‡¶Ø‡¶¨‡¶π‡ßÅ‡¶≤ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ
    const shareText = `‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®? RESCUES ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶∞‡¶ï‡ßç‡¶§‡¶Ø‡ßã‡¶¶‡ßç‡¶ß‡¶æ ${name}-‡¶è‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ, ‡¶§‡¶ø‡¶®‡¶ø ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶â‡¶™‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶Ü‡¶õ‡ßá‡¶®‡•§ ‡¶Ø‡¶¶‡¶ø ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü, ‡¶§‡¶¨‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶¨‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶®‡¶ø‡¶§‡ßá ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§`;
    
    if (navigator.share) {
        navigator.share({
            title: 'RESCUES - ‡¶∞‡¶ï‡ßç‡¶§‡¶Ø‡ßã‡¶¶‡ßç‡¶ß‡¶æ', // ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤‡¶ü‡¶ø‡¶ï‡ßá‡¶ì ‡¶Ü‡¶∞‡¶ì ‡¶™‡ßç‡¶∞‡¶æ‡¶∏‡¶ô‡ßç‡¶ó‡¶ø‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
            text: shareText,
            url: shareUrl
        }).catch((error) => console.log('Sharing failed', error));
    } else {
        navigator.clipboard.writeText(shareUrl).then(() => {
            // ‡¶™‡ßá‡¶∂‡¶æ‡¶¶‡¶æ‡¶∞ ‡¶ï‡¶™‡¶ø ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú
            alert('‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ñ‡¶® ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶ö‡¶ø‡¶§‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡•§');
        }).catch(err => {
            prompt("‡¶è‡¶á ‡¶≤‡¶ø‡¶Ç‡¶ï‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®:", shareUrl);
        });
    }
}

// ‡ß®. ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶Æ‡ßã‡¶° ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡ßá‡¶∞ ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
function exitShareMode() {
    const cleanUrl = window.location.href.split('?')[0];
    window.history.pushState({path: cleanUrl}, '', cleanUrl);

    if(pages.shareView) pages.shareView.style.display = 'none';
    setActivePage('home');
    loadAndRenderDonors();
}

// **********************************
// ‚ú® ‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶ø‡¶§: loadAndRenderDonors - ‡¶≤‡¶ó‡¶á‡¶® ‡¶ö‡ßá‡¶ï ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá
// **********************************
function loadAndRenderDonors() {
    donorsGrid.innerHTML = '';

    const urlParams = new URLSearchParams(window.location.search);
    const sharedDonorId = urlParams.get('share');

    if (sharedDonorId) {
        donorsLoginPrompt.style.display = 'none';
        donorsRefreshPrompt.style.display = 'none';
        noData.style.display = 'none';
    } else {
        // ‡¶≤‡¶ó‡¶á‡¶® ‡¶ö‡ßá‡¶ï ‡¶õ‡¶æ‡ßú‡¶æ‡¶á ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶á‡¶®‡ßç‡¶°‡¶ø‡¶ï‡ßá‡¶ü‡¶∞
        donorsLoginPrompt.style.display = 'none';
        donorsRefreshPrompt.style.display = 'none';
        noData.style.display = 'block';
        noData.textContent = "Donor Data Is Loading....";
    }

    donorsRef.off();

    donorsRef.once('value').then(snapshot => {
        donors = snapshot.val() || {};
        
        // üî• ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶≤‡¶ú‡¶ø‡¶ï üî•
        if (sharedDonorId) {
            if (donors[sharedDonorId]) {
                const specificDonor = donors[sharedDonorId];
                const card = renderCard(specificDonor); 
                
                sharedDonorContainer.innerHTML = '';
                sharedDonorContainer.appendChild(card);

                Object.values(pages).forEach(p => { if(p) p.style.display = 'none'; });
                if(pages.shareView) {
                    pages.shareView.style.display = 'block';
                    pages.shareView.classList.add('active');
                }
                return; 
            } else {
                alert("‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶è‡¶á ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ‡•§");
                exitShareMode(); 
                return;
            }
        }

        // --- ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ---
        const arr = Object.values(donors || {}).sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0));
        const latestEmergencyPost = Object.values(allEmergencyPosts).sort((a,b)=>b.timestamp - a.timestamp)[0];
        
        if (latestEmergencyPost) {
             const postEl = document.createElement("div");
             postEl.className = "emergency-card";
             postEl.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                  <h3 style="margin: 0; color: white;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert"><path d="M12 2v4"></path><path d="M5.22 5.22l2.83 2.83"></path><path d="M2 12h4"></path><path d="M20 12h4"></path><path d="M18.78 5.22l-2.83 2.83"></path><path d="M12 8a4 4 0 0 0-4 4v4H8a2 2 0 0 0-2 2v2h12v-2a2 2 0 0 0-2-2h0v-4a4 4 0 0 0-4-4z"></path></svg> ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®!</h3>
                  <div class="blood-group-large">${escapeHtml(latestEmergencyPost.blood || "")}</div>
                </div>
                <p style="margin: 0; font-size: 16px;">
                  <span style="font-weight: 600;">‡¶∞‡ßã‡¶ó‡ßÄ:</span> ${escapeHtml(latestEmergencyPost.patientName || "")}<br>
                  <span style="font-weight: 600;">‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:</span> ${escapeHtml(latestEmergencyPost.patientAddress || latestEmergencyPost.location || '‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡¶®‡¶ø')}<br>
                </p>
                <div style="margin-top: 12px;">
                  <a href="tel:${encodeURIComponent(latestEmergencyPost.phone || "")}" class="btn ghost" style="color: white; border-color: rgba(255,255,255,0.4);">‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</a>
                </div>
              `;
             donorsGrid.appendChild(postEl);
        }

        if (arr.length === 0) {
            // ‡¶°‡ßá‡¶ü‡¶æ ‡¶®‡ßá‡¶á
            donorsRefreshPrompt.style.display = 'block';
            noData.textContent = translations[currentLang].noSearchResult;
            noData.style.display = 'block';
        } else {
            noData.style.display = 'none';
            donorsRefreshPrompt.style.display = 'none';
            arr.forEach(d => donorsGrid.appendChild(renderCard(d)));
        }

    }).catch(error => {
        console.error("Error:", error);
        if(!sharedDonorId) {
            noData.textContent = "‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§";
            noData.style.display = 'block';
            donorsRefreshPrompt.style.display = 'block';
        }
    });

    if(!sharedDonorId){
        donorsRef.on('value', snapshot => {
            donors = snapshot.val() || {};
            renderAll();
        });
    }
}
// **********************************

// Countdown modal for 120-day restriction
function showCountdownModal(name, daysRemaining) {
    openModal(`
        <div class="auth-form-container" style="text-align: center; max-width: 320px;">
            <h3>‡¶ï‡¶≤ ‡¶Ö‡¶™‡¶∂‡¶® ‡¶≤‡¶ï‡¶° üîí</h3>
            <p class="muted">‡¶°‡ßã‡¶®‡¶æ‡¶∞ <strong>${name}</strong> ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶®‡¶®‡•§</p>
            <div style="font-size: 48px; font-weight: 800; color: var(--danger); margin: 20px 0;">
                ${daysRemaining}
            </div>
            <p style="font-size: 18px; margin-top: -10px; font-weight: 600;">
                ‡¶¶‡¶ø‡¶® ‡¶™‡¶∞ ‡¶§‡¶ø‡¶®‡¶ø Eligible ‡¶π‡¶¨‡ßá‡¶®‡•§
            </p>
            <p class="small muted">‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ßß‡ß®‡ß¶ ‡¶¶‡¶ø‡¶® ‡¶¨‡¶ø‡¶∞‡¶§‡¶ø ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï‡•§</p>
            <div style="display:flex;justify-content:center;margin-top:12px;">
                <button class="btn primary" onclick="closeModal()">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>
    `);
}

// Modal for unwilling donors
function showNotWillingModal(name){
    openModal(`
        <div class="auth-form-container" style="text-align:center; max-width:320px;">
            <h3>‡¶ï‡¶≤ ‡¶Ö‡¶™‡¶∂‡¶® ‡¶≤‡¶ï‡¶° üîí</h3>
            <p class="muted" style="margin-top:10px;">
                ‡¶°‡ßã‡¶®‡¶æ‡¶∞ <strong>${name}</strong> ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶®‡ßá ‡¶Ö‡¶®‡¶ø‡¶ö‡ßç‡¶õ‡ßÅ‡¶ï ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®‡•§ 
                ‡¶ì‡¶®‡¶æ‡¶∞ ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶®‡¶æ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶ï‡¶≤ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§
            </p>
            <div style="display:flex;justify-content:center;margin-top:12px;">
                <button class="btn primary" onclick="closeModal()">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>
    `);
}
window.showCountdownModal = showCountdownModal;
window.showNotWillingModal = showNotWillingModal;


function addPasswordToggle(inputId, toggleId) {
    const passwordInput = document.getElementById(inputId);
    const toggleButton = document.getElementById(toggleId);

    if (passwordInput && toggleButton) {
        toggleButton.addEventListener('click', function() {
            // ‡¶á‡¶®‡¶™‡ßÅ‡¶ü‡ßá‡¶∞ ‡¶ü‡¶æ‡¶á‡¶™ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            
            // ‡¶Ü‡¶á‡¶ï‡¶®‡ßá‡¶∞ ‡¶≠‡¶ø‡¶ú‡ßç‡¶Ø‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ
            if (type === 'text') {
                toggleButton.innerHTML = 'üôà'; // ‡¶ö‡ßã‡¶ñ ‡¶ñ‡ßã‡¶≤‡¶æ (‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá)
            } else {
                toggleButton.innerHTML = 'üëÅÔ∏è'; // ‡¶ö‡ßã‡¶ñ ‡¶¨‡¶®‡ßç‡¶ß (‡¶π‡¶æ‡¶á‡¶°)
            }
        });
    }
}


function openAuthModal(tab='register'){
  openModal(`
    <div id="authFormContent"></div>
    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px"><button class="btn ghost" onclick="closeModal()">Close</button></div>
  `);
  showAuthTab(tab);
}

function showAuthTab(tab){
  const c = document.getElementById('authFormContent');
  if(tab==='register'){
    c.innerHTML = `
      <div class="auth-form-container">
        <h3>Register</h3>
        <p class="muted" style="text-align: center;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶°‡ßã‡¶®‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ö‡¶®‡ßç‡¶Ø‡¶ï‡ßá ‡¶â‡ßé‡¶∏‡¶æ‡¶π‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        <div class="input-group"><label>Name</label><input id="regName" type="text" style="background:#3ca9; color:#000;border:2px solid #000;" placeholder="‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ.." /></div>
        <div class="input-group"><label>Email</label><input id="regEmail" type="email" style="background:#4ca9; color:#000;" placeholder="example@gmail.com" /></div>
        
        <div class="input-group">
            <label>Password</label>
            <div class="password-input-wrapper">
                <input id="regPass" type="password" style="background:#8ca9; color:#000;" placeholder="password.." />
                <button type="button" id="regToggle" class="toggle-password" aria-label="Toggle password visibility">üëÅÔ∏è</button>
            </div>
        </div>
        <div style="display:flex;align-items:center;gap:8px;margin-top:8px"><input id="tncCheckbox" type="checkbox" style="width: auto;"/>
        <label for="tncCheckbox" class="muted small">I agree to <a href="#" id="openTnC" class="link" style="color: var(--accent); text-decoration: none;">terms & conditions</a></label></div>
        <div class="btn-group">
          <button class="btn primary" id="regBtn" style="width:100%; ">Register</button>
        </div>
        <div class="text-link" style="text-align: center; margin-top: 10px;">
          <button class="btn ghost" style="width: 100%;" onclick="showAuthTab('login')">Have A Account? Login Now</button>
        </div>
      </div>`;
    document.getElementById('openTnC').addEventListener('click', (e)=>{ e.preventDefault(); openModal(`<h3>Terms & Conditions & Privacy Policy</h3><div class="muted">üìú Terms & Conditions (T&C) ‚Äì RESCUES App  
<div>1. **Eligibility (‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø‡¶§‡¶æ)** - ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶ï‡ßá ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ 18 ‡¶¨‡¶õ‡¶∞ ‡¶¨‡ßü‡¶∏‡ßÄ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§  
   - ‡¶∏‡¶†‡¶ø‡¶ï ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø‡¶ó‡¶§ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡ßü ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§  </div>
<div>2. **Accuracy of Information (‡¶§‡¶•‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡ßÅ‡¶≤‡¶§‡¶æ)** - ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶Ø‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡¶¨‡ßá (‡¶®‡¶æ‡¶Æ, ‡¶¨‡ßü‡¶∏, ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™, ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø) ‡¶§‡¶æ ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶∏‡¶†‡¶ø‡¶ï ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§  
   - ‡¶≠‡ßÅ‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§  </div>
<hr>

<div style="font-weight:bold;margin-top:15px;">**‡ß©. PRIVACY POLICY & DATA CONTROL (‡¶ó‡ßã‡¶™‡¶®‡ßÄ‡¶Ø‡¶º‡¶§‡¶æ ‡¶®‡ßÄ‡¶§‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶§‡¶•‡ßç‡¶Ø ‡¶®‡¶ø‡ßü‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£)**</div>

<div>3.1. **Data Collection and Usage (‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ì ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞)** - RESCUES ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶®‡¶æ‡¶Æ, ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™, ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶è‡¶¨‡¶Ç ‡¶≠‡ßå‡¶ó‡ßã‡¶≤‡¶ø‡¶ï ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® (Location) ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá‡•§  
   - ‡¶è‡¶á ‡¶§‡¶•‡ßç‡¶Ø ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶§‡¶æ ‡¶ì ‡¶ó‡ßç‡¶∞‡¶π‡ßÄ‡¶§‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßá‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶§‡ßá ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö‡¶ø‡¶Ç ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶¨‡ßá‡•§  
   - ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶õ‡¶æ‡ßú‡¶æ ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶æ‡¶£‡¶ø‡¶ú‡ßç‡¶Ø‡¶ø‡¶ï ‡¶¨‡¶æ ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®‡¶Æ‡ßÇ‡¶≤‡¶ï ‡¶â‡¶¶‡ßç‡¶¶‡ßá‡¶∂‡ßç‡¶Ø‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá ‡¶®‡¶æ‡•§</div>

<div>3.2. **Data Security & Storage (‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶ì ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£)** - ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§ ‡¶§‡¶•‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶ ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø ‡¶è‡¶®‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶æ‡¶∞‡ßç‡¶° ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶∏‡¶ø‡¶ï‡¶ø‡¶â‡¶∞‡¶ø‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá‡•§  
   - ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶ï‡¶†‡ßã‡¶∞‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡•§</div>

<div>3.3. **User Data Rights (‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ö‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞)** - ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶§‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ ‡¶§‡¶•‡ßç‡¶Ø‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏, ‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶® ‡¶¨‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü‡ßá‡¶∞ ‡¶Ö‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶∞‡¶æ‡¶ñ‡ßá‡•§  
   - ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶≤‡ßá ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶ï‡¶∞‡¶≤‡ßá, ‡¶Ü‡¶á‡¶®‡¶ø ‡¶¨‡¶æ‡¶ß‡ßç‡¶Ø‡¶¨‡¶æ‡¶ß‡¶ï‡¶§‡¶æ ‡¶∏‡¶æ‡¶™‡ßá‡¶ï‡ßç‡¶∑‡ßá ‡¶§‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶¨‡ßá‡•§ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ü‡¶ø‡¶Æ‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§</div>
<hr>

<div>4. **Responsibility (‡¶¶‡¶æ‡ßü‡¶ø‡¶§‡ßç‡¶¨)** - ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶¶‡¶æ‡¶§‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶∂‡¶æ‡¶∞‡ßÄ‡¶∞‡¶ø‡¶ï ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®‡•§  
   - ‡¶∞‡¶ï‡ßç‡¶§ ‡¶ó‡ßç‡¶∞‡¶π‡ßÄ‡¶§‡¶æ ‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤‡ßá‡¶∞ ‡¶®‡¶ø‡ßü‡¶Æ ‡¶Æ‡ßá‡¶®‡ßá ‡¶¶‡¶æ‡¶§‡¶æ‡¶∞ ‡¶∞‡¶ï‡ßç‡¶§ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡¶ø‡ßü‡ßá ‡¶®‡ßá‡¶¨‡ßá‡¶®‡•§  </div>
<div>5. **Prohibited Activities (‡¶®‡¶ø‡¶∑‡¶ø‡¶¶‡ßç‡¶ß ‡¶ï‡¶æ‡¶ú)** - ‡¶≠‡ßÅ‡ßü‡¶æ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶§‡ßà‡¶∞‡¶ø, ‡¶≠‡ßÅ‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡ßá‡¶ì‡ßü‡¶æ, ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶Ü‡¶∞‡ßç‡¶•‡¶ø‡¶ï ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶ø‡¶∑‡¶ø‡¶¶‡ßç‡¶ß‡•§  
   - ‡¶ï‡ßã‡¶®‡ßã ‡¶ß‡¶∞‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶æ‡¶∞‡¶£‡¶æ ‡¶¨‡¶æ ‡¶Ö‡¶™‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ü‡¶á‡¶®‡¶æ‡¶®‡ßÅ‡¶ó ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶®‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶¨‡ßá‡•§  </div>
<div>6. **Liability Disclaimer (‡¶¶‡¶æ‡ßü‡¶¨‡¶¶‡ßç‡¶ß‡¶§‡¶æ ‡¶Ö‡¶∏‡ßç‡¶¨‡ßÄ‡¶ï‡¶æ‡¶∞)** - ‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡ßá‡¶¨‡¶≤ ‡¶¶‡¶æ‡¶§‡¶æ ‡¶ì ‡¶ó‡ßç‡¶∞‡¶π‡ßÄ‡¶§‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡•§  
   - ‡¶∞‡¶ï‡ßç‡¶§ ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶§ ‡¶ï‡ßã‡¶®‡ßã ‡¶ù‡ßÅ‡¶Å‡¶ï‡¶ø‡¶∞ ‡¶¶‡¶æ‡ßü‡¶≠‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶≠‡¶æ‡¶¨‡ßá ‡¶¶‡¶æ‡¶§‡¶æ ‡¶ì ‡¶ó‡ßç‡¶∞‡¶π‡ßÄ‡¶§‡¶æ‡¶∞‡•§  </div>
<div>7. **Modification of Terms (‡¶∂‡¶∞‡ßç‡¶§‡¶æ‡¶¨‡¶≤‡ßÄ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®)** - ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶∂‡¶∞‡ßç‡¶§‡¶æ‡¶¨‡¶≤‡ßÄ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§  
   - ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞‡¶æ ‡¶®‡¶ø‡ßü‡¶Æ‡¶ø‡¶§‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶¨‡ßá‡¶®‡•§  </div>
<div>‚úÖ "Agree" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶â‡¶™‡¶∞‡ßã‡¶ï‡ßç‡¶§ ‡¶∏‡¶¨ ‡¶∂‡¶∞‡ßç‡¶§‡¶æ‡¶¨‡¶≤‡ßÄ ‡¶è‡¶¨‡¶Ç ‡¶ó‡ßã‡¶™‡¶®‡ßÄ‡ßü‡¶§‡¶æ ‡¶®‡ßÄ‡¶§‡¶ø ‡¶Æ‡ßá‡¶®‡ßá ‡¶®‡¶ø‡¶ö‡ßç‡¶õ‡ßá‡¶®‡•§</div><div style="display:flex;justify-content:flex-end;margin-top:10px"><button class="btn ghost" onclick="closeModal()">Close</button></div>`); });

    // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶ó‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ
    addPasswordToggle('regPass', 'regToggle'); 
    
    setTimeout(()=> document.getElementById('regBtn').onclick = async ()=> {
      const name = document.getElementById('regName').value.trim();
      const email = document.getElementById('regEmail').value.trim();
      const pass = document.getElementById('regPass').value;
      const tnc = document.getElementById('tncCheckbox').checked;
      if(!name || !email || !pass){ alert('‡¶∏‡¶¨ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®'); return; }
      if(!tnc){ alert('Terms & Conditions-‡¶è ‡¶∏‡¶Æ‡ßç‡¶Æ‡¶§‡¶ø ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®'); return; }
      try { await registerUser(name,email,pass); alert('Registration successful'); closeModal(); } catch(e){ alert('Error: ' + (e.message || e)); }
    }, 50);
  } else {
    c.innerHTML = `
      <div class="auth-form-container">
        <h3>Login</h3>
        <p class="muted" style="text-align: center;">‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ú‡¶æ‡¶®‡¶§‡¶æ‡¶Æ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ñ‡ßÅ‡¶¨ ‡¶∂‡ßÄ‡¶ó‡ßç‡¶∞‡¶á ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ü‡¶∏‡¶¨‡ßá‡¶® ,‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        <div class="input-group"><label>Email</label><input id="loginEmail" type="email"style="background:#3ca9; color:#000;border:2px solid #000;"  placeholder="example@gmail.com" /></div>
        
        <div class="input-group">
            <label>Password</label>
            <div class="password-input-wrapper">
                <input id="loginPass" type="password"style="background:#2ca9; color:#000;border:2px solid #000;"  placeholder="password.." />
                <button type="button" id="loginToggle" class="toggle-password" aria-label="Toggle password visibility">üëÅÔ∏è</button>
            </div>
        </div>
        <div class="btn-group">
          <button class="btn primary" id="loginBtn" style="width:100%; ">Login</button>
        </div>
        
        <div class="text-link" style="text-align: right; margin-top: 10px;">
          <button class="btn link" id="forgotPassBtn" style="padding: 0; background: none; border: none; color: var(--accent); cursor: pointer;">Forgot Password?</button>
        </div>
        
        <div class="text-link" style="text-align: center; margin-top: 10px;">
          <button class="btn ghost" style="width: 100%;" onclick="showAuthTab('register')">New User? Registration Now</button>
        </div>
      </div>`;
      
    // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶ó‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ
    addPasswordToggle('loginPass', 'loginToggle'); 
    
    setTimeout(()=> {
        document.getElementById('loginBtn').onclick = async ()=> {
          const email = document.getElementById('loginEmail').value.trim();
          const pass = document.getElementById('loginPass').value;
          if(!email || !pass){ alert('‡¶∏‡¶¨ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®'); return; }
          try{ await loginUser(email,pass); alert('Login successful'); closeModal(); } catch(e){ alert('Error: ' + (e.message || e)); }
        };
        
        // ‚úÖ ‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï: Forgot Password ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ
        document.getElementById('forgotPassBtn').onclick = () => {
            showPasswordResetDialog();
        };
        
    }, 50);
  }
}
function showPasswordResetDialog() {
    // ‡¶°‡¶æ‡¶Ø‡¶º‡¶æ‡¶≤‡¶ó ‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶≤ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø UI
    const dialogContent = `
        <div style="padding: 20px;">
            <h3>Forgot Password</h3>
            <p class="muted">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶ø‡¶§ ‡¶á‡¶Æ‡ßá‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶¶‡¶ø‡¶®‡•§ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶™‡¶æ‡¶†‡¶æ‡¶¨‡•§</p>
            <div class="input-group" style="margin-top: 20px;">
                <label>Email</label>
                <input id="resetEmailInput" type="email" placeholder="example@mail.com" style="width: 100%; padding: 10px; box-sizing: border-box;" />
            </div>
            <div style="display:flex;justify-content:flex-end;gap:10px;margin-top:20px">
                <button class="btn ghost" onclick="closeModal()">Cancel</button>
                <button class="btn primary" id="sendResetLinkBtn">Send Reset Link</button>
            </div>
        </div>
    `;

    openModal(dialogContent);

    // ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞
    document.getElementById('sendResetLinkBtn').onclick = async () => {
        const email = document.getElementById('resetEmailInput').value.trim();
        if (!email) {
            alert('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§');
            return;
        }

        try {
            // ‚úÖ Compat ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶†‡¶ø‡¶ï ‡¶ï‡¶≤
            await firebase.auth().sendPasswordResetEmail(email); 
            
            closeModal();
            alert('‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶®‡¶¨‡¶ï‡ßç‡¶∏ ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶è‡¶∞ spam section ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
        } catch (e) {
            let errorMessage = '‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶á‡¶Æ‡ßá‡¶≤ ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§';
            if (e.code === 'auth/user-not-found') {
                errorMessage = '‡¶è‡¶á ‡¶á‡¶Æ‡ßá‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§';
            } else if (e.message) {
                 errorMessage = 'Error: ' + e.message;
            }
            alert(errorMessage);
            console.error(e);
        }
    };
}
// App Rating ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶è‡¶∞‡¶∞ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá ‡¶®‡¶æ
function openAppRatingModal() { /* intentionally empty */ }
window.dismissRatingModal = () => { /* intentionally empty */ };
function openCalendarModal(initialDate) {
    customCalendarModal.classList.add('visible');
    currentCalendarDate = initialDate ? new Date(initialDate) : new Date();
    renderCalendar();
}

function closeCalendarModal() {
    customCalendarModal.classList.remove('visible');
}

function renderCalendar() {
    calendarGrid.innerHTML = '';
    const today = new Date();
    const month = currentCalendarDate.getMonth();
    const year = currentCalendarDate.getFullYear();
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    
    calendarMonthYear.textContent = new Date(year, month).toLocaleString('en-US', { month: 'long', year: 'numeric' });
    calendarMonthYear.prepend("Rescues Calendar - ");

    const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
    daysOfWeek.forEach(day => {
        const dayEl = document.createElement('div');
        dayEl.className = 'calendar-day';
        dayEl.textContent = day;
        calendarGrid.appendChild(dayEl);
    });

    for (let i = 0; i < firstDay; i++) {
        calendarGrid.appendChild(document.createElement('div'));
    }

    for (let i = 1; i <= daysInMonth; i++) {
        const dateEl = document.createElement('div');
        dateEl.className = 'calendar-date';
        dateEl.textContent = i;
        const date = new Date(year, month, i);

        if (date.toDateString() === today.toDateString()) {
            dateEl.classList.add('current');
        }

        if (activeDateInput && activeDateInput.value) {
            const selectedDate = new Date(activeDateInput.value);
            // Fix: Compare dates based on YYYY-MM-DD string to avoid time zone issues on date selection
            const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
            const selectedDateString = `${selectedDate.getFullYear()}-${String(selectedDate.getMonth() + 1).padStart(2, '0')}-${String(selectedDate.getDate()).padStart(2, '0')}`;
            
            if (dateString === selectedDateString) {
                dateEl.classList.add('selected');
            }
        }
        
        dateEl.addEventListener('click', () => {
            if (activeDateInput) {
                const y = date.getFullYear();
                const m = String(date.getMonth() + 1).padStart(2, '0');
                const d = String(date.getDate()).padStart(2, '0');
                
                const selectedDateISO = new Date(y, m - 1, d).toISOString();
                
                activeDateInput.value = `${y}-${m}-${d}`;
                document.getElementById('donLastDisplay').value = `${y}-${m}-${d}`;
                closeCalendarModal();
            }
        });

        calendarGrid.appendChild(dateEl);
    }
}
prevMonthBtn.addEventListener('click', () => {
    currentCalendarDate.setMonth(currentCalendarDate.getMonth() - 1);
    renderCalendar();
});
nextMonthBtn.addEventListener('click', () => {
    currentCalendarDate.setMonth(currentCalendarDate.getMonth() + 1);
    renderCalendar();
});
clearDateBtn.addEventListener('click', () => {
    if(activeDateInput) {
        activeDateInput.value = '';
        const donLastDisplay = document.getElementById('donLastDisplay');
        if (donLastDisplay) donLastDisplay.value = '';
        closeCalendarModal();
    }
});

function openAddDonorForm(prefill){
  const d = prefill || {name:'',phone:'',blood:'A+',location:'',lastDonateDate:'',willing:true, facebook:''};

  openModal(`
    <div class="auth-form-container">
      <h3>${prefill ? 'Edit Donor' : 'Add Donor'}</h3>
      <p>‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶® ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Æ‡¶π‡ßé ‡¶ï‡¶æ‡¶ú, ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
      
      <div class="input-group">
        <label for="donName">Name</label>
        <input id="donName" type="text" value="${escapeHtml(d.name||'')}" placeholder="‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ"/>
      </div>
      
      <div class="input-group">
        <label for="donPhone">Phone</label>
        <input id="donPhone" type="tel" value="${escapeHtml(d.phone||'')}" placeholder="‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞"/>
      </div>
      
      <div class="input-group">
        <label for="donBlood">Blood Group</label>
        <select id="donBlood">
          <option value="A+" ${d.blood==='A+'?'selected':''}>A+</option>
          <option value="A-" ${d.blood==='A-'?'selected':''}>A-</option>
          <option value="B+" ${d.blood==='B+'?'selected':''}>B+</option>
          <option value="B-" ${d.blood==='B-'?'selected':''}>B-</option>
          <option value="O+" ${d.blood==='O+'?'selected':''}>O+</option>
          <option value="O-" ${d.blood==='O-'?'selected':''}>O-</option>
          <option value="AB+" ${d.blood==='AB+'?'selected':''}>AB+</option>
          <option value="AB-" ${d.blood==='AB-'?'selected':''}>AB-</option>
        </select>
      </div>

      <div class="input-group">
        <label for="donFacebook">Facebook Profile Link (Optional)</label>
        <input id="donFacebook" type="url" value="${escapeHtml(d.facebook||'')}" placeholder="https://facebook.com/yourprofile"/>
      </div>
      
      <div class="input-group">
        <label for="donLocation">Location</label>
        <input id="donLocation" type="text" value="${escapeHtml(d.location||'')}" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ"/>
      </div>
      
      <div class="input-group">
          <label for="donLast">Last Donate Date</label>
          <input type="text" id="donLastDisplay" placeholder="‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®" readonly style="cursor: pointer;"/>
          <input type="hidden" id="donLastInput" value="${d.lastDonateDate ? formatInputDate(d.lastDonateDate) : ''}" />
      </div>

      <div class="input-group" style="display:flex;align-items:center;gap:8px;">
        <input id="donWilling" type="checkbox" ${d.willing ? 'checked' : ''} style="width:auto;"/>
        <label for="donWilling" class="muted small">‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá ‡¶á‡¶ö‡ßç‡¶õ‡ßÅ‡¶ï</label>
      </div>
      
      <div class="btn-group">
        <button class="btn ghost" onclick="closeModal()">Cancel</button>
        <button class="btn primary" id="saveDonorBtn">${prefill ? 'Update' : 'Add'}</button>
      </div>
    </div>
  `);
  
  const donLastDisplay = document.getElementById('donLastDisplay');
  const donLastInput = document.getElementById('donLastInput');
  donLastDisplay.value = donLastInput.value;
  
  const modalInputs = document.querySelectorAll('.auth-form-container input, .auth-form-container select, .auth-form-container textarea');
  modalInputs.forEach(input => {
      if (currentTheme === 'light') {
          input.style.background = '#f8fafc';
          input.style.border = '1px solid rgba(0,0,0,0.15)';
          input.style.color = 'var(--text-color)'; 
      } else {
          input.style.background = 'var(--bg)';
          input.style.border = '1px solid var(--glass-border)';
          input.style.color = 'var(--text-color)';
      }
  });

  donLastDisplay.addEventListener('click', () => {
      activeDateInput = donLastInput;
      const initialDate = donLastInput.value ? new Date(donLastInput.value) : new Date();
      openCalendarModal(initialDate);
  });

  setTimeout(() => {

  document.getElementById('saveDonorBtn').onclick = async () => {

    const payload = {
      name: document.getElementById('donName').value.trim(),
      phone: document.getElementById('donPhone').value.trim(),
      blood: document.getElementById('donBlood').value,
      location: document.getElementById('donLocation').value.trim(),
      facebook: document.getElementById('donFacebook').value.trim() || null,
      lastDonateDate: donLastInput.value ? new Date(donLastInput.value).toISOString() : null,
      willing: document.getElementById('donWilling').checked
    };

    if (!payload.name || !payload.phone) {
      alert('Name ‡¶ì Phone ‡¶¨‡¶æ‡¶ß‡ßç‡¶Ø‡¶§‡¶æ‡¶Æ‡ßÇ‡¶≤‡¶ï');
      return;
    }

    try {

      // =====================================
      // UPDATE MODE
      // =====================================
      if (prefill && prefill.id) {

        await updateDonor(prefill.id, payload);

        closeModal();
        setActivePage('profile');

        setTimeout(() => {
          openUpdateDonorModal(); // ‡¶è‡¶á ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ
        }, 250);

        return;
      }

      // =====================================
      // NEW DONOR MODE
      // =====================================
      await addDonor(payload);

      closeModal();
      setActivePage('home');

      setTimeout(() => {
        openSuccessDonorModal("‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡ßü‡ßá‡¶õ‡ßá");
      }, 250);

    } catch (e) {
      alert('‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá: ' + (e.message || e));
    }

  };

}, 50);
}
function openSuccessDonorModal(){
  openModal(`
    <div style="padding:20px; text-align:center;">
      <h3>‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ!</h3>
      <p class="muted" style="font-size:16px; line-height:1.6;">
        ‡¶è‡¶ï‡¶ú‡¶® ‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡¶ï‡ßç‡¶§‡¶Ø‡ßã‡¶¶‡ßç‡¶ß‡¶æ‡¶ï‡ßá ‡¶™‡ßá‡ßü‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ü‡¶®‡¶®‡ßç‡¶¶‡¶ø‡¶§‡•§  
        ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶á ‡¶Æ‡¶π‡ßé ‡¶â‡¶¶‡ßç‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶Ü‡¶®‡ßç‡¶§‡¶∞‡¶ø‡¶ï ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶!
      </p>

      <div style="margin-top:20px;">
        <button class="btn primary" onclick="closeModal()">Done</button>
      </div>
    </div>
  `);
}
function openUpdateDonorModal() {
  openModal(`
    <h3>‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶∏‡¶´‡¶≤</h3>
    <p class="muted" style="text-align:center;font-size:16px;">
      ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§
    </p>
    <div style="display:flex;justify-content:flex-end;margin-top:12px;">
      <button class="btn primary" onclick="closeModal()">Done</button>
    </div>
  `);
}function openUpdateDonorModal() {
  openModal(`
    <h3>‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶∏‡¶´‡¶≤</h3>
    <p class="muted" style="text-align:center;font-size:16px;">
      ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§
    </p>
    <div style="display:flex;justify-content:flex-end;margin-top:12px;">
      <button class="btn primary" onclick="closeModal()">Done</button>
    </div>
  `);
}
// function openEditDonor(id) ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§ ‡¶Ü‡¶õ‡ßá‡•§
function openEditDonor(id){
  const d = donors[id];
  if(!d){ alert('‡¶°‡ßá‡¶ü‡¶æ ‡¶Æ‡ßá‡¶≤‡ßá‡¶®‡¶ø'); return; }
  if(!currentUser || d.owner !== currentUser.uid){ alert('‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶è‡¶á ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá ‡¶®‡¶æ'); return; }
  openAddDonorForm(d);
}
function openEditProfile(){
  if(!currentUser) return openAuthModal('login');
  openModal(`<h3>Edit Profile</h3><div style="margin-top:8px"><div class="auth-form-container"><label class="muted small">Name</label><input id="editName" value="${escapeHtml(currentUser.displayName||'')}" /><div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px"><button class="btn ghost" onclick="closeModal()">Cancel</button><button class="btn primary" id="saveProfileBtn">Save</button></div></div></div>`);
  setTimeout(()=> {
    // Apply theme-specific styles to the input
    const editNameInput = document.getElementById('editName');
    if (currentTheme === 'light') {
        editNameInput.style.background = '#f8fafc';
        editNameInput.style.border = '1px solid rgba(0,0,0,0.15)';
    } else {
        editNameInput.style.background = 'var(--bg)';
        editNameInput.style.border = '1px solid var(--glass-border)';
    }
    
    document.getElementById('saveProfileBtn').onclick = async ()=> {
      const name = document.getElementById('editName').value.trim();
      if(!name){ alert('Name ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®'); return; }
      await firebase.auth().currentUser.updateProfile({ displayName: name });
      await firebase.database().ref('users/' + firebase.auth().currentUser.uid).update({ name });
      closeModal();
      alert('Profile updated');
    };
  }, 50);
}
aboutBtn.addEventListener('click', ()=> { 
  closeMenuFunc(); 
  openModal(`
    <h3>About RESCUES</h3>
    <div class="muted">
      RESCUES  ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶§‡¶æ ‡¶ì ‡¶∞‡¶ï‡ßç‡¶§ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡¶¶‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶π‡¶ú ‡¶ì ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§ 
      ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶¶‡ßá‡¶ñ‡¶§‡ßá, ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶¶‡¶ø‡¶§‡ßá, ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶è‡¶¨‡¶Ç ‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§ 
      ‡¶è‡¶ü‡¶ø ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶´‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶≤‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶á‡¶â‡¶ú‡¶æ‡¶∞-‡¶´‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶≤‡¶ø ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ 
      ‡¶â‡¶¶‡ßç‡¶¶‡ßá‡¶∂‡ßç‡¶Ø ‡¶π‡¶≤‡ßã ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶Æ‡¶§‡ßã ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º‡¶§‡¶æ ‡¶Æ‡ßá‡¶ü‡¶æ‡¶®‡ßã ‡¶è‡¶¨‡¶Ç ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶π‡¶ú ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ‡•§
      <h2> <a> RESCUES Team </a> ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶Ü‡¶∞‡ßç‡¶•‡¶ø‡¶ï ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ, ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç ‡¶Ö‡¶∞‡ßç‡¶• ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶è‡ßú‡¶ø‡ßü‡ßá ‡¶ö‡¶≤‡ßÅ‡¶® </h2>
    </div>
    <div style="display:flex;justify-content:flex-end;margin-top:8px">
      <button class="btn ghost" onclick="closeModal()">Close</button>
    </div>
  `); 
});
guidelinesBtn.addEventListener('click', ()=> { 
  closeMenuFunc(); 
  openModal(`
    <h3>Guidelines</h3>
    <div class="muted">
      ‡ßß. ‡¶°‡ßã‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶¨ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶¨‡¶ø‡¶®‡ßÄ‡¶§ ‡¶ì ‡¶∏‡¶Æ‡ßç‡¶Æ‡¶æ‡¶®‡¶ú‡¶®‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡ßÅ‡¶®‡•§<br>
      ‡ß®. ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá ‡¶™‡ßå‡¶Å‡¶õ‡¶æ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶Æ‡¶§‡ßã ‡¶¶‡¶æ‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§<br>
      ‡ß©. ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶¨‡¶ø‡¶¨‡ßá‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®; ‡¶Ø‡¶¶‡¶ø ‡¶Ö‡¶∏‡ßÅ‡¶∏‡ßç‡¶• ‡¶¨‡ßã‡¶ß ‡¶ï‡¶∞‡ßá‡¶®, ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§<br>
      ‡ß™. ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶§‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶ó‡ßã‡¶™‡¶® ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§<br>
    </div>
    <div style="display:flex;justify-content:flex-end;margin-top:8px">
      <button class="btn ghost" onclick="closeModal()">Close</button>
    </div>
  `); 
});
// ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡¶æ
const healthCornerBtn = document.getElementById('healthCornerBtn');

// '‡¶π‡ßá‡¶≤‡¶• ‡¶ï‡¶∞‡ßç‡¶®‡¶æ‡¶∞' ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ
if (healthCornerBtn) {
  healthCornerBtn.addEventListener('click', ()=> { 
    // ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ
    closeMenuFunc(); 

    // ‡¶Æ‡ßã‡¶°‡¶æ‡¶≤ (Modal) ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá '‡¶π‡ßá‡¶≤‡¶• ‡¶ï‡¶∞‡ßç‡¶®‡¶æ‡¶∞' ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
    openModal(`
      <h3>Health Corner: ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ</h3>
      <div class="muted" style="text-align: left;">
        <h4>‡ßß. ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø‡¶§‡¶æ</h4>
        <ul>
          <li>‡¶¨‡¶Ø‡¶º‡¶∏: ‡ßß‡ßÆ ‡¶•‡ßá‡¶ï‡ßá ‡ß¨‡ß´ ‡¶¨‡¶õ‡¶∞‡•§</li>
          <li>‡¶ì‡¶ú‡¶®: ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡ß™‡ß´-‡ß´‡ß¶ ‡¶ï‡ßá‡¶ú‡¶ø‡•§</li>
          <li>‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø: ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶∏‡ßÅ‡¶∏‡ßç‡¶• ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶π‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡¶ó‡¶§ ‡ß®‡ß™ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶ú‡ßç‡¶¨‡¶∞ ‡¶¨‡¶æ ‡¶∏‡¶∞‡ßç‡¶¶‡¶ø-‡¶ï‡¶æ‡¶∂‡¶ø ‡¶•‡¶æ‡¶ï‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§</li>
          <li>‡¶∏‡¶Æ‡¶Ø‡¶º‡¶ï‡¶æ‡¶≤: ‡¶∂‡ßá‡¶∑ ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶™‡¶∞ ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß© ‡¶Æ‡¶æ‡¶∏ (‡ßß‡ß® ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π) ‡¶Ö‡¶§‡¶ø‡¶¨‡¶æ‡¶π‡¶ø‡¶§ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§</li>
        </ul>
        
        <h4>‡ß®. ‡¶≠‡ßÅ‡¶≤ ‡¶ß‡¶æ‡¶∞‡¶£‡¶æ ‡¶¶‡ßÇ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</h4>
        <div style="margin-left: 10px;">
          <p>‚ùå **‡¶Æ‡¶ø‡¶•:** ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶ø‡¶≤‡ßá ‡¶∂‡¶∞‡ßÄ‡¶∞ ‡¶¶‡ßÅ‡¶∞‡ßç‡¶¨‡¶≤ ‡¶π‡¶Ø‡¶º ‡¶¨‡¶æ ‡¶ì‡¶ú‡¶® ‡¶¨‡¶æ‡¶°‡¶º‡ßá‡•§</p>
          <p>‚úÖ **‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨‡¶§‡¶æ:** ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶ï‡ßç‡¶∑‡¶£‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡¶á ‡¶∂‡¶∞‡ßÄ‡¶∞ ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ò‡¶æ‡¶ü‡¶§‡¶ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßá‡•§ ‡¶è‡¶ü‡¶ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡¶ï‡ßç‡¶§‡¶ï‡¶£‡¶ø‡¶ï‡¶æ ‡¶â‡ßé‡¶™‡¶æ‡¶¶‡¶®‡ßá ‡¶â‡ßé‡¶∏‡¶æ‡¶π‡¶ø‡¶§ ‡¶ï‡¶∞‡ßá, ‡¶Ø‡¶æ ‡¶∂‡¶∞‡ßÄ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶â‡¶™‡¶ï‡¶æ‡¶∞‡ßÄ‡•§</p>
        </div>
        
        <h4>‡ß©. ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶ì ‡¶™‡¶∞‡ßá ‡¶ü‡¶ø‡¶™‡¶∏</h4>
        <ul>
          <li>**‡¶Ü‡¶ó‡ßá:** ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶ú‡¶≤ ‡¶™‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶ñ‡¶æ‡¶®‡•§</li>
          <li>**‡¶™‡¶∞‡ßá:** ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£‡ßá ‡¶§‡¶∞‡¶≤ ‡¶™‡¶æ‡¶®‡ßÄ‡¶Ø‡¶º (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ú‡¶≤, ‡¶´‡¶≤‡ßá‡¶∞ ‡¶∞‡¶∏) ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶ø‡¶∂‡ßç‡¶∞‡¶æ‡¶Æ ‡¶®‡¶ø‡¶®‡•§</li>
        </ul>
      </div>
      <div style="display:flex;justify-content:flex-end;margin-top:8px">
        <button class="btn ghost" onclick="closeModal()">Close</button>
      </div>
    `); 
  });
}
logoutBtn.addEventListener('click', ()=> {
  closeMenuFunc();
  logoutReasonInput.value = ""; // Clear previous reason
  logoutReasonModal.style.display = 'flex';
});
if(searchInput){
  searchInput.addEventListener('input', ()=> {
    renderSearchGrid();
    if(searchInput.value.length > 0) {
        clearSearch.classList.add('visible');
    } else {
        clearSearch.classList.remove('visible');
    }
  });
  clearSearch.addEventListener('click', ()=> { 
    searchInput.value=''; 
    renderSearchGrid(); 
    clearSearch.classList.remove('visible');
  });
}
setInterval(()=> { renderDonorsGrid(); renderSearchGrid(); renderMyDonors(); renderEmergencyPosts(); }, 60*1000);
window.openAuthModal = openAuthModal;
window.openEditDonor = openEditDonor;
window.openEditProfile = openEditProfile;
window.deleteDonor = deleteDonor;
window.openRatingModal = openRatingModal;
window.openDonorDetailsModal = openDonorDetailsModal;
window.openEmergencyPostModal = openEmergencyPostModal;
window.deleteEmergencyPost = deleteEmergencyPost;
window.setActivePage = setActivePage;
function scrollToTop() {
    document.querySelector('main').scrollTo({
        top: 0,
        behavior: 'smooth'
    });
}
window.scrollToTop = scrollToTop;

function refreshDonors() {
    loadAndRenderDonors();
}
window.refreshDonors = refreshDonors;

function loadAndRenderDonors() {
    // 1. ‡¶ó‡ßç‡¶∞‡¶ø‡¶° ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
    donorsGrid.innerHTML = '';
    
    // 2. ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®
    donorsLoginPrompt.style.display = 'none';
    donorsRefreshPrompt.style.display = 'none';
    noData.style.display = 'block';

    // ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶Ü‡¶á‡¶ï‡¶®‡¶ï‡ßá ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶∏‡ßç‡¶™‡¶ø‡¶®‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞
    // ‡¶Æ‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá‡¶®: 'rotating-spinner' ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡¶ü‡¶ø ‡¶Ü‡¶á‡¶ï‡¶®‡¶ü‡¶ø‡¶ï‡ßá ‡¶ò‡ßã‡¶∞‡¶æ‡¶¨‡ßá
    const downloadAsSpinner = `<i class="icon rotating-spinner" style="--icon: 'download-outline'; font-size: 40px; color: var(--primary-color);"></i>`;

    if (!currentUser) {
        // ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶≤‡¶ó‡¶á‡¶® ‡¶®‡ßá‡¶á: ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ö‡ßç‡¶õ‡ßá
        noData.innerHTML = `
            <div class="loading-container">
                ${downloadAsSpinner}
                <p>‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
            </div>
        `;

    } else {
        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ó‡¶á‡¶® ‡¶Ü‡¶õ‡ßá: ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ö‡ßç‡¶õ‡ßá
        noData.innerHTML = `
            <div class="loading-container">
                ${downloadAsSpinner}
                <p>Donor Data Is On The Way ...</p>
            </div>
        `;
    }

    donorsRef.off();

    donorsRef.once('value').then(snapshot => {
        donors = snapshot.val() || {};
        const latestEmergencyPost = Object.values(allEmergencyPosts).sort((a,b)=>b.timestamp - a.timestamp)[0];
        
        donorsGrid.innerHTML = '';
        const arr = Object.values(donors || {}).sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0));
        
if (latestEmergencyPost) {
  const postEl = document.createElement("div");
  postEl.className = "emergency-card";
  postEl.innerHTML = `
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
      <h3 style="margin: 0; color: white;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" 
     viewBox="0 0 24 24" fill="none" stroke="currentColor" 
     stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
     class="feather feather-alert">
  <path d="M12 2v4"></path>
  <path d="M5.22 5.22l2.83 2.83"></path>
  <path d="M2 12h4"></path>
  <path d="M20 12h4"></path>
  <path d="M18.78 5.22l-2.83 2.83"></path>
  <path d="M12 8a4 4 0 0 0-4 4v4H8a2 2 0 0 0-2 2v2h12v-2a2 2 0 0 0-2-2h0v-4a4 4 0 0 0-4-4z"></path>
</svg> ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®!</h3>
      <div class="blood-group-large">${escapeHtml(latestEmergencyPost.blood || "")}</div>
    </div>
    <p style="margin: 0; font-size: 16px;">
      <span style="font-weight: 600;">‡¶∞‡ßã‡¶ó‡ßÄ:</span> ${escapeHtml(latestEmergencyPost.patientName || latestEmergencyPost.patientname || "")}<br>
      <span style="font-weight: 600;">‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:</span> ${escapeHtml(latestEmergencyPost.patientAddress || latestEmergencyPost.patientaddress || latestEmergencyPost.location || '‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡¶®‡¶ø')}<br>
      <span style="font-weight: 600;">‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§:</span> ${escapeHtml(latestEmergencyPost.details || "")}
    </p>
    <div style="margin-top: 12px; display: flex; justify-content: space-between; align-items: center;">
      <a href="tel:${encodeURIComponent(latestEmergencyPost.phone || "")}" class="btn ghost" style="color: white; border-color: rgba(255,255,255,0.4);">‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</a>
      <div style="font-size: 12px; opacity: 0.7;">‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®: ${users[latestEmergencyPost.user] ? users[latestEmergencyPost.user].name : "Unknown User"}</div>
    </div>
  `;
  donorsGrid.appendChild(postEl);
}

        if (arr.length === 0) {
            if (currentUser) {
                donorsRefreshPrompt.style.display = 'block';
                noData.textContent = translations[currentLang].noSearchResult;
            }
            noData.style.display = 'block';
        } else {
            noData.style.display = 'none';
            donorsRefreshPrompt.style.display = 'none';
            arr.forEach(d => donorsGrid.appendChild(renderCard(d)));
        }
    }).catch(error => {
        console.error("Error fetching donors: ", error);
        noData.textContent = "‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§";
        noData.style.display = 'block';
        donorsRefreshPrompt.style.display = 'block';
    });

    donorsRef.on('value', snapshot => {
        donors = snapshot.val() || {};
        renderAll();
    });
}

const logoutReasonModalElement = document.getElementById("logoutReasonModal");
const logoutReasonInputElement = document.getElementById("logoutReasonInput");
const logoutReasonSubmitButton = document.getElementById("logoutReasonSubmit");

if(logoutReasonSubmitButton) {
  // Logout reason is now OPTIONAL
  logoutReasonSubmitButton.addEventListener("click", () => {
    let reason = logoutReasonInputElement.value.trim();
    
    if (reason !== "") {
        console.log("User logout reason (optional):", reason);
        // You can send this reason to a log/analytics service here
    }

    firebase.auth().signOut().then(() => {
      alert("‡¶Ü‡¶™‡¶®‡¶ø ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá‡¶®!");
      logoutReasonModalElement.style.display = "none";
      logoutReasonInputElement.value = ""; 
    }).catch((error) => {
      console.error("Logout Error:", error);
      alert("‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá: " + error.message);
    });
  });
}

// Event listener for the big PLUS button on the Add page
addPlus.addEventListener('click', () => {
    addPlus.classList.add('spin-animation');
    setTimeout(() => {
        addPlus.classList.remove('spin-animation');
    }, 600);

    if (currentUser) {
        openAddDonorForm();
    } else {
        openAuthModal('login');
    }
});
// ... (The entire existing script content up to the `loadAndRenderDonors` function)

// NEW: Normalization function for Bangla to English phonetic search
function normalizeBanglaToEnglish(text) {
    if (typeof text !== 'string') return '';
    text = text.toLowerCase().trim();
    
    // Simple, common, and effective phonetic substitutions for Bengali
    // This is not a perfect transliterator but covers common search use cases.
    const map = {
        '‡¶Ö': 'o', '‡¶Ü': 'a', '‡¶á': 'i', '‡¶à': 'i', '‡¶â': 'u', '‡¶ä': 'u', '‡¶ã': 'ri',
        '‡¶è': 'e', '‡¶ê': 'oi', '‡¶ì': 'o', '‡¶î': 'ou',
        
        '‡¶ï': 'k', '‡¶ñ': 'kh', '‡¶ó': 'g', '‡¶ò': 'gh', '‡¶ô': 'ng',
        '‡¶ö': 'c', '‡¶õ': 'ch', '‡¶ú': 'j', '‡¶ù': 'jh', '‡¶û': 'n',
        '‡¶ü': 't', '‡¶†': 'th', '‡¶°': 'd', '‡¶¢': 'dh', '‡¶£': 'n',
        '‡¶§': 't', '‡¶•': 'th', '‡¶¶': 'd', '‡¶ß': 'dh', '‡¶®': 'n',
        '‡¶™': 'p', '‡¶´': 'f', '‡¶¨': 'b', '‡¶≠': 'bh', '‡¶Æ': 'm',
        '‡¶Ø': 'j', '‡¶∞': 'r', '‡¶≤': 'l', '‡¶∂': 'sh', '‡¶∑': 'sh', '‡¶∏': 's', '‡¶π': 'h',
        '‡¶°‡¶º': 'r', '‡¶¢‡¶º': 'rh', '‡¶Ø‡¶º': 'y',
        '‡ßé': 't', '‡¶Ç': 'ng', '‡¶É': 'h', '‡¶Å': 'n',
        
        // Vowel signs (kar) - handled by the following logic, but included for completeness
        // '‡¶æ': 'a', '‡¶ø': 'i', '‡ßÄ': 'i', '‡ßÅ': 'u', '‡ßÇ': 'u', '‡ßÉ': 'ri',
        // '‡ßá': 'e', '‡ßà': 'oi', '‡ßã': 'o', '‡ßå': 'ou',
        
        // Numbers
        '‡ß¶': '0', '‡ßß': '1', '‡ß®': '2', '‡ß©': '3', '‡ß™': '4',
        '‡ß´': '5', '‡ß¨': '6', '‡ß≠': '7', '‡ßÆ': '8', '‡ßØ': '9',
    };

    let normalizedText = '';
    
    // First pass: replace characters from the map
    for (const char of text) {
        normalizedText += map[char] || char;
    }
    
    // Second pass: handle vowel signs (kar) and common conjuncts/nuances
    normalizedText = normalizedText
        .replace(/[‡¶æ]/g, 'a') // a-kar
        .replace(/[‡¶ø‡ßÄ]/g, 'i') // i/ee-kar
        .replace(/[‡ßÅ‡ßÇ]/g, 'u') // u/oo-kar
        .replace(/[‡ßá]/g, 'e') // e-kar
        .replace(/[‡ßà]/g, 'oi') // oi-kar
        .replace(/[‡ßã]/g, 'o') // o-kar
        .replace(/[‡ßå]/g, 'ou') // ou-kar
        .replace(/[‡ßÉ]/g, 'ri') // ri-kar
        .replace(/kkh/g, 'kh') // kshya (‡¶ï‡ßç‡¶∑) approximation
        .replace(/r\b/g, 'ro'); // Final r/or
        
    // Remove all non-alphanumeric characters (including space) for consistent comparison
    normalizedText = normalizedText.replace(/[^a-z0-9]/g, '');
    
    return normalizedText;
}


document.addEventListener("DOMContentLoaded", () => {

    const searchInput = document.getElementById("searchInput");
    const bloodGroupFilter = document.getElementById("bloodGroupFilter");
    const bloodGroupWrapper = document.getElementById("bloodGroupWrapper");

    searchInput.addEventListener("input", renderSearchGrid);
    bloodGroupFilter.addEventListener("change", renderSearchGrid);

    function renderSearchGrid() {
        const rawQ = (searchInput.value || '').trim().toLowerCase();
        const normalizedQ = normalizeBanglaToEnglish(rawQ);

        const grid = document.querySelector("#searchGrid .grid") || document.getElementById("searchGrid");
        grid.innerHTML = '';

        const arr = Object.values(donors || {}).sort((a,b)=> (b.createdAt||0) - (a.createdAt||0));

        let filtered = arr.filter(d=>{
            if(!rawQ) return true;

            const name = (d.name||'').toLowerCase();
            const location = (d.location||'').toLowerCase();
            const blood = (d.blood||'').toLowerCase();
            const phone = (d.phone||'').toLowerCase();

            const direct =
                  name.includes(rawQ)
              ||  location.includes(rawQ)
              ||  blood.includes(rawQ)
              ||  phone.includes(rawQ);

            if (direct) return true;

            const normalizedName = normalizeBanglaToEnglish(d.name||'');
            const normalizedLocation = normalizeBanglaToEnglish(d.location||'');

            return (
                normalizedName.includes(normalizedQ) ||
                normalizedLocation.includes(normalizedQ)
            );
        });

        // Detect if search looks like location
        const locationMatched = filtered.some(d =>
            (d.location || '').toLowerCase().includes(rawQ)
        );

        if (rawQ && locationMatched) {
            bloodGroupWrapper.style.display = "block";
        } else {
            bloodGroupWrapper.style.display = "none";
            bloodGroupFilter.value = "";
        }

        // Apply blood group filter
        const selectedBG = bloodGroupFilter.value;
        if (selectedBG) {
            filtered = filtered.filter(d => (d.blood || '') === selectedBG);
        }

        // Show no result
        const noSearch = document.getElementById("noSearch");
        noSearch.style.display = filtered.length === 0 ? 'block' : 'none';

        // Render all cards
        filtered.forEach(d => grid.appendChild(renderCard(d)));
    }

});
// ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® JavaScript ‡¶ï‡ßã‡¶°‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶è‡¶á ‡¶Ö‡¶Ç‡¶∂‡¶ü‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§


// ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶®
if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
}
const database = firebase.database();
const postsRef = database.ref('product_posts'); // Admin App-‡¶è‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶è‡¶ï‡¶á ‡¶™‡¶æ‡¶•

// --- ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶§‡ßà‡¶∞‡¶ø‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ---
function createProductCard(post) {
    const card = document.createElement('div');
    card.className = 'product-card';
    card.innerHTML = `
        <div class="product-image-container">
            <img src="${post.image}" alt="${post.text ? post.text.substring(0, 30) : 'Post image'}" class="product-image" onerror="this.onerror=null;this.src='https://via.placeholder.com/300?text=No+Image'">
        </div>
        <div class="product-text-box">
            <p class="product-description">${post.text ? post.text.substring(0, 100) : 'No description'}</p> 
            <a href="${post.fbLink}" target="_blank" class="buy-now-btn">Buy Now</a>
        </div>
    `;
    return card;
}

// --- ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶ì ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ---
function loadAndRenderProductPosts() {
    const grid = document.getElementById('productCardGrid');
    const noData = document.getElementById('noProductPosts');
    
    if (!grid || !noData) {
        return; 
    }

    grid.innerHTML = '<div class="muted">‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>';
    noData.style.display = 'none';

    // Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶∞‡¶ø‡ßü‡ßá‡¶≤‡¶ü‡¶æ‡¶á‡¶Æ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
    postsRef.on('value', (snapshot) => {
        grid.innerHTML = ''; // ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
        const posts = snapshot.val();
        
        if (posts) {
            // ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡¶ó‡ßÅ‡¶≤‡¶ø‡¶ï‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡ßÅ‡¶∞‡ßã‡¶®‡ßã ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶∏‡¶æ‡¶ú‡¶æ‡¶®‡ßã
            const postArray = Object.keys(posts).map(key => ({
                id: key,
                ...posts[key]
            })).sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0)); 

            if (postArray.length > 0) {
                postArray.forEach(post => {
                    grid.appendChild(createProductCard(post));
                });
                noData.style.display = 'none';
            } else {
                noData.style.display = 'block';
            }
        } else {
            noData.style.display = 'block';
        }
        
    }, (error) => {
        console.error("Error fetching product posts:", error);
        grid.innerHTML = '<div class="muted error" style="color:var(--danger)">‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§</div>';
    });
}
// ‡¶ß‡¶∞‡ßá ‡¶®‡¶ø‡¶ö‡ßç‡¶õ‡¶ø openModal() ‡¶è‡¶¨‡¶Ç closeModal() ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ‡ßá ‡¶∏‡¶Ç‡¶ú‡ßç‡¶û‡¶æ‡ßü‡¶ø‡¶§ ‡¶Ü‡¶õ‡ßá‡•§

document.getElementById('privacyPolicyBtn').addEventListener('click', (e) => {
    e.preventDefault();
    openPrivacyModal();
});

function openPrivacyModal() {
    const privacyContent = `
        <h3>Privacy Policy ‚Äì RESCUES App</h3>
        <div class="muted">üìú ‡¶ó‡ßã‡¶™‡¶®‡ßÄ‡ßü‡¶§‡¶æ ‡¶®‡ßÄ‡¶§‡¶ø ‡¶ì ‡¶§‡¶•‡ßç‡¶Ø ‡¶®‡¶ø‡ßü‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£‡ßá‡¶∞ ‡¶®‡ßÄ‡¶§‡¶ø‡¶Æ‡¶æ‡¶≤‡¶æ
        
        <div style="margin-top:10px;">**‡ßß. ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ì ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶â‡¶¶‡ßç‡¶¶‡ßá‡¶∂‡ßç‡¶Ø:**</div>
        <div style="padding-left:15px;">
            - ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶®‡¶æ‡¶Æ, ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™, ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶è‡¶¨‡¶Ç ‡¶≠‡ßå‡¶ó‡ßã‡¶≤‡¶ø‡¶ï ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® (Location) ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡¶ø‡•§
            - ‡¶â‡¶¶‡ßç‡¶¶‡ßá‡¶∂‡ßç‡¶Ø: ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶§‡ßá ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶§‡¶æ ‡¶ì ‡¶ó‡ßç‡¶∞‡¶π‡ßÄ‡¶§‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶ì ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡¶∞‡ßÄ ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶® ‡¶ï‡¶∞‡¶æ‡•§
            - ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶õ‡¶æ‡ßú‡¶æ ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¨‡¶æ ‡¶¨‡¶æ‡¶£‡¶ø‡¶ú‡ßç‡¶Ø‡¶ø‡¶ï ‡¶ï‡¶æ‡¶ú‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá ‡¶®‡¶æ‡•§
        </div>
        
        <div style="margin-top:10px;">**‡ß®. ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶ì ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£:**</div>
        <div style="padding-left:15px;">
            - ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶è‡¶®‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∂‡¶ø‡¶≤‡ßç‡¶™‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶ø‡•§
            - ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶ï‡¶†‡ßã‡¶∞‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶ø‡ßü‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡•§
        </div>
        
        <div style="margin-top:10px;">**‡ß©. ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ö‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ (Data Control):**</div>
        <div style="padding-left:15px;">
            - **‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶ì ‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶®:** ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡ßü ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶§‡¶•‡ßç‡¶Ø‡ßá ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ ‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡•§
            - **‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ‡¶∞ ‡¶Ö‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞:** ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶≤‡ßá ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶ú‡¶æ‡¶®‡¶æ‡¶≤‡ßá, ‡¶Ü‡¶á‡¶®‡¶ø ‡¶¨‡¶æ‡¶ß‡ßç‡¶Ø‡¶¨‡¶æ‡¶ß‡¶ï‡¶§‡¶æ ‡¶Æ‡ßá‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶®‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶¨‡ßá‡•§ ‡¶è‡¶á ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ü‡¶ø‡¶Æ‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
        </div>
        
        <div style="margin-top:10px;">**‡ß™. ‡¶•‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶æ‡¶∞‡ßç‡¶ü‡¶ø‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶∂‡ßá‡ßü‡¶æ‡¶∞:**</div>
        <div style="padding-left:15px;">
            - ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßá (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Ø‡¶ñ‡¶® ‡¶ï‡ßã‡¶®‡ßã ‡¶ó‡ßç‡¶∞‡¶π‡ßÄ‡¶§‡¶æ‡¶∞ ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®), ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡ßá‡¶á ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶ó‡ßç‡¶∞‡¶π‡ßÄ‡¶§‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡ßã ‡¶•‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶æ‡¶∞‡ßç‡¶ü‡¶ø‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø ‡¶¨‡¶æ ‡¶≤‡¶ø‡¶ú ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶¨‡ßá ‡¶®‡¶æ‡•§
        </div>
        
        <div style="margin-top:10px;">**‡ß´. ‡¶®‡ßÄ‡¶§‡¶ø‡¶Æ‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®:**</div>
        <div style="padding-left:15px;">
            - ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶è‡¶á ‡¶ó‡ßã‡¶™‡¶®‡ßÄ‡ßü‡¶§‡¶æ ‡¶®‡ßÄ‡¶§‡¶ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§ ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡ßú ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶ú‡¶æ‡¶®‡¶ø‡ßü‡ßá ‡¶¶‡ßá‡¶¨‡•§
        </div>
        
        </div>
        <div style="display:flex;justify-content:flex-end;margin-top:15px">
            <button class="btn ghost" onclick="closeModal()">Close</button>
        </div>
    `;
    
    // ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶ñ‡ßã‡¶≤‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ü‡¶ø ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
    openModal(privacyContent); 
}
// =================================================================
// üö® ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®: ‡¶°‡¶ï‡ßÅ‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ü‡¶ø ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§ 
// =================================================================
document.addEventListener('DOMContentLoaded', loadAndRenderProductPosts);

// =======================================================
// ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶ñ‡ßã‡¶≤‡¶æ‡¶∞/‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶á‡¶â‡¶ü‡¶ø‡¶≤‡¶ø‡¶ü‡¶ø ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
// =======================================================
function toggleOverlay(overlayId) {
  const overlay = document.getElementById(overlayId);
  if (overlay) {
    overlay.style.display = overlay.style.display === "flex" ? "none" : "flex";
  }
}

/* =======================================================
  FAQ JavaScript ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§)
========================================================== */

function showFaqQuestions() {
    const initialScreen = document.getElementById('faq-initial-screen');
    const questionList = document.getElementById('faq-list');
    if (initialScreen && questionList) {
        initialScreen.style.display = 'none';
        questionList.style.display = 'block';
    }
}

function toggleDetails(button) {
    const parent = button.closest('.menu-item-with-details');
    if (!parent) return;

    const details = parent.querySelector('.item-details');
    const isOpening = !details.style.maxHeight || details.style.maxHeight === '0px';

    document.querySelectorAll('.menu-item-with-details.open').forEach(openParent => {
        if (openParent !== parent) {
            openParent.classList.remove('open');
            openParent.querySelector('.item-details').style.maxHeight = null;
            openParent.querySelector('.answer-toggle-btn').textContent = '‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®';
        }
    });

    if (isOpening) {
        details.style.maxHeight = details.scrollHeight + "px";
        parent.classList.add('open');
        button.textContent = '‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®';
    } else {
        details.style.maxHeight = null;
        parent.classList.remove('open');
        button.textContent = '‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®';
    }
}

function resetFaqState() {
    document.querySelectorAll('.menu-item-with-details.open').forEach(parent => {
        parent.classList.remove('open');
        parent.querySelector('.item-details').style.maxHeight = null;
        const button = parent.querySelector('.answer-toggle-btn');
        if (button) {
            button.textContent = '‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®';
        }
    });

    const initialScreen = document.getElementById('faq-initial-screen');
    const questionList = document.getElementById('faq-list');

    if (initialScreen && questionList) {
        initialScreen.style.display = 'block'; 
        questionList.style.display = 'none'; 
    }
}

function closeFaqAndReset() {
    resetFaqState();
    toggleOverlay('faqPage'); 
}

/* =======================================================
  Donor Post Modal, Form Handling & Story Loading
========================================================== */
window.onload = function () {
  /* üîπ Donor Post Modal Open/Close */
  window.openDonorPostModal = function () {
    toggleOverlay("donorPostModal");
  };

  window.closeDonorPostModal = function () {
    const form = document.getElementById("donorPostForm");
    toggleOverlay("donorPostModal");
    if (form) form.reset();
  };

  /* üîπ Donor Story Form Submit (Firebase Save) */
  const donorPostForm = document.getElementById("donorPostForm");
  if (donorPostForm) {
    donorPostForm.addEventListener("submit", function (event) {
      event.preventDefault();

      const name = document.getElementById("donorName").value.trim();
      const date = document.getElementById("donationDate").value;
      const story = document.getElementById("donorStory").value.trim();

      if (!date || !story) {
        alert("‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§");
        return;
      }

      const newPost = {
        name: name || "Anonymous Donor",
        date,
        story,
        status: "pending",
        createdAt: firebase.database.ServerValue.TIMESTAMP,
      };

      database.ref("donor_stories")
        .push(newPost)
        .then(() => {
          alert("‚úÖ ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶®‡ßá‡¶∞ ‡¶™‡¶∞ ‡¶™‡ßç‡¶∞‡¶¶‡¶∞‡ßç‡¶∂‡¶ø‡¶§ ‡¶π‡¶¨‡ßá‡•§");
          closeDonorPostModal();
        })
        .catch((error) => {
          console.error("Firebase Save Error:", error);
          alert("‚ùå ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
        });
    });
  }

  
  /* üîπ Donor Stories Loader */
  loadDonorStories();
};

/* =======================================================
  Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø ‡¶≤‡ßã‡¶° ‡¶ì ‡¶™‡ßç‡¶∞‡¶¶‡¶∞‡ßç‡¶∂‡¶®
========================================================== */
function loadDonorStories() {
  const storiesGrid = document.getElementById("storiesGrid");
  if (!storiesGrid) return;

  const dbRef = database.ref("donor_stories");
  dbRef.orderByChild("createdAt").on("value", (snapshot) => {
    storiesGrid.innerHTML = "";

    if (!snapshot.exists()) {
      storiesGrid.innerHTML = `
        <div class="muted" style="margin-top:10px; text-align:center; padding:15px;">
          ‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§
        </div>`;
      return;
    }

    snapshot.forEach((child) => {
      const storyId = child.key;
      const data = child.val();
      if (data.status !== "approved") return;

      const storyEl = document.createElement("div");
      storyEl.className = "story-card";

      const randomColor = getRandomProfileColor();

      storyEl.innerHTML = `
        <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
            <div style="
                width:42px; 
                height:42px; 
                border-radius:50%; 
                background:${randomColor}; 
                display:flex; 
                align-items:center; 
                justify-content:center; 
                font-size:22px;
                color:white;">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64" fill="none">
  <circle cx="32" cy="20" r="12" stroke="#000" stroke-width="4"/>
  <path d="M16 56c0-8.837 7.163-16 16-16s16 7.163 16 16" stroke="#000" stroke-width="4"/>
</svg>
            </div>

            <div>
                <h4 style="margin:0; font-size:17px;">${data.name}</h4>
                <p class="muted small" style="margin:0; font-size:13px;">${data.date}</p>
            </div>
        </div>

        <p style="margin-top:8px; line-height:1.45;">${data.story}</p>

        <div class="likeBox" id="likeBox-${storyId}" 
             style="margin-top:14px; cursor:pointer; display:flex; align-items:center; gap:6px;">

          <span class="likeIcon" id="likeIcon-${storyId}" 
                style="font-size:25px; transition:0.25s;">ü§ç</span>

          <span class="likeCount" id="likeCount-${storyId}" 
                style="font-size:16px;">0</span>
        </div>
      `;

      storiesGrid.prepend(storyEl);

      setupLikeToggle(storyId);
    });
  });
}
function setupLikeToggle(storyId) {
  const userId = currentUser?.uid;
  const likeIcon = document.getElementById("likeIcon-" + storyId);
  const likeCountEl = document.getElementById("likeCount-" + storyId);
  const likeBox = document.getElementById("likeBox-" + storyId);

  const likesRef = database.ref(`donor_stories/${storyId}/likes`);

  // Realtime update listener
  likesRef.on("value", (snap) => {
    const likesObj = snap.val() || {};
    const count = Object.keys(likesObj).length;

    likeCountEl.textContent = count;

    if (userId && likesObj[userId]) {
      likeIcon.textContent = "‚ù§Ô∏è";
    } else {
      likeIcon.textContent = "ü§ç";
    }
  });

  // Toggle click event
  likeBox.onclick = () => {
    if (!userId) {
      alert("‡¶≤‡¶æ‡¶á‡¶ï ‡¶¶‡¶ø‡¶§‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®");
      return;
    }

    const userLikeRef = database.ref(`donor_stories/${storyId}/likes/${userId}`);

    userLikeRef.once("value", (snap) => {
      if (snap.exists()) {
        // Already liked ‚Üí dislike
        userLikeRef.remove();
        dislikeWithBrokenHeart(likeIcon);
      } else {
        // Not liked ‚Üí like
        userLikeRef.set(true);
        likeAnimation(likeIcon);
      }
    });
  };
}
function likeAnimation(icon) {
  icon.style.transform = "scale(1.6)";
  icon.style.transition = "transform 0.25s ease";

  setTimeout(() => {
    icon.style.transform = "scale(1)";
  }, 250);
}
function dislikeWithBrokenHeart(icon) {
  icon.textContent = "üíî";
  icon.style.transform = "scale(1.3)";
  icon.style.transition = "transform 0.25s ease";

  setTimeout(() => {
    icon.style.transform = "scale(1)";
  }, 200);

  setTimeout(() => {
    icon.textContent = "ü§ç";
  }, 600);
}
function getRandomProfileColor() {
  const colors = [
    "#6D28D9",
    "#2563EB",
    "#DB2777",
    "#059669",
    "#D97706",
    "#DC2626",
    "#0EA5E9",
    "#7C3AED",
    "#14B8A6",
    "#F59E0B"
  ];

  return colors[Math.floor(Math.random() * colors.length)];
}
</script>
</body>
</html>
